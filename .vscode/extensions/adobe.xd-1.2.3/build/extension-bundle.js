/*! For license information please see extension-bundle.js.LICENSE.txt */
!function(e,t){for(var r in t)e[r]=t[r]}(exports,function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=88)}([function(e,t){e.exports=require("path")},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deepClone=t.Logger=void 0,o(r(89),t),o(r(90),t),o(r(97),t),o(r(98),t),o(r(18),t),o(r(50),t),o(r(30),t),o(r(100),t),o(r(101),t),o(r(102),t),o(r(103),t),o(r(104),t),o(r(49),t),o(r(51),t),o(r(106),t),o(r(107),t),o(r(108),t),o(r(109),t);const i=s(r(51));t.Logger=new i.default,t.deepClone=e=>JSON.parse(JSON.stringify(e))},function(e,t){e.exports=require("vscode")},function(e,t){e.exports=require("fs")},function(e,t,r){var n,o,s=r(3),i=r(138),a=r(140),c=r(141),l=r(6);function u(e,t){Object.defineProperty(e,n,{get:function(){return t}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(n=Symbol.for("graceful-fs.queue"),o=Symbol.for("graceful-fs.previous")):(n="___graceful-fs.queue",o="___graceful-fs.previous");var d=function(){};if(l.debuglog?d=l.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(d=function(){var e=l.format.apply(l,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),!s[n]){var h=global[n]||[];u(s,h),s.close=function(e){function t(t,r){return e.call(s,t,(function(e){e||m(),"function"==typeof r&&r.apply(this,arguments)}))}return Object.defineProperty(t,o,{value:e}),t}(s.close),s.closeSync=function(e){function t(t){e.apply(s,arguments),m()}return Object.defineProperty(t,o,{value:e}),t}(s.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){d(s[n]),r(57).equal(s[n].length,0)}))}function p(e){i(e),e.gracefulify=p,e.createReadStream=function(t,r){return new e.ReadStream(t,r)},e.createWriteStream=function(t,r){return new e.WriteStream(t,r)};var t=e.readFile;e.readFile=function(e,r,n){"function"==typeof r&&(n=r,r=null);return function e(r,n,o){return t(r,n,(function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?("function"==typeof o&&o.apply(this,arguments),m()):f([e,[r,n,o]])}))}(e,r,n)};var r=e.writeFile;e.writeFile=function(e,t,n,o){"function"==typeof n&&(o=n,n=null);return function e(t,n,o,s){return r(t,n,o,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?("function"==typeof s&&s.apply(this,arguments),m()):f([e,[t,n,o,s]])}))}(e,t,n,o)};var n=e.appendFile;n&&(e.appendFile=function(e,t,r,o){"function"==typeof r&&(o=r,r=null);return function e(t,r,o,s){return n(t,r,o,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?("function"==typeof s&&s.apply(this,arguments),m()):f([e,[t,r,o,s]])}))}(e,t,r,o)});var o=e.readdir;function s(t){return o.apply(e,t)}if(e.readdir=function(e,t,r){var n=[e];"function"!=typeof t?n.push(t):r=t;return n.push((function(e,t){t&&t.sort&&t.sort();!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?("function"==typeof r&&r.apply(this,arguments),m()):f([s,[n]])})),s(n)},"v0.8"===process.version.substr(0,4)){var c=a(e);g=c.ReadStream,y=c.WriteStream}var l=e.ReadStream;l&&(g.prototype=Object.create(l.prototype),g.prototype.open=function(){var e=this;b(e.path,e.flags,e.mode,(function(t,r){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r),e.read())}))});var u=e.WriteStream;u&&(y.prototype=Object.create(u.prototype),y.prototype.open=function(){var e=this;b(e.path,e.flags,e.mode,(function(t,r){t?(e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r))}))}),Object.defineProperty(e,"ReadStream",{get:function(){return g},set:function(e){g=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return y},set:function(e){y=e},enumerable:!0,configurable:!0});var d=g;Object.defineProperty(e,"FileReadStream",{get:function(){return d},set:function(e){d=e},enumerable:!0,configurable:!0});var h=y;function g(e,t){return this instanceof g?(l.apply(this,arguments),this):g.apply(Object.create(g.prototype),arguments)}function y(e,t){return this instanceof y?(u.apply(this,arguments),this):y.apply(Object.create(y.prototype),arguments)}Object.defineProperty(e,"FileWriteStream",{get:function(){return h},set:function(e){h=e},enumerable:!0,configurable:!0});var v=e.open;function b(e,t,r,n){return"function"==typeof r&&(n=r,r=null),function e(t,r,n,o){return v(t,r,n,(function(s,i){!s||"EMFILE"!==s.code&&"ENFILE"!==s.code?("function"==typeof o&&o.apply(this,arguments),m()):f([e,[t,r,n,o]])}))}(e,t,r,n)}return e.open=b,e}function f(e){d("ENQUEUE",e[0].name,e[1]),s[n].push(e)}function m(){var e=s[n].shift();e&&(d("RETRY",e[0].name,e[1]),e[0].apply(null,e[1]))}global[n]||u(global,s[n]),e.exports=p(c(s)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!s.__patched&&(e.exports=p(s),s.__patched=!0)},function(e,t,r){"use strict";t.fromCallback=function(e){return Object.defineProperty((function(...t){if("function"!=typeof t[t.length-1])return new Promise((r,n)=>{e.apply(this,t.concat([(e,t)=>e?n(e):r(t)]))});e.apply(this,t)}),"name",{value:e.name})},t.fromPromise=function(e){return Object.defineProperty((function(...t){const r=t[t.length-1];if("function"!=typeof r)return e.apply(this,t);e.apply(this,t.slice(0,-1)).then(e=>r(null,e),r)}),"name",{value:e.name})}},function(e,t){e.exports=require("util")},function(e,t,r){"use strict";const n=r(5).fromPromise,{makeDir:o,makeDirSync:s}=r(143),i=n(o);e.exports={mkdirs:i,mkdirsSync:s,mkdirp:i,mkdirpSync:s,ensureDir:i,ensureDirSync:s}},function(e,t){e.exports=require("crypto")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(15);const o=(e,t)=>t.some(t=>t.id===e)?t.find(t=>t.id===e):null;t.default=new class{constructor(){this.consumerSnippetFilter=[]}get currentFolderPlatformPath(){var e,t;return n.isWindows()?(null===(e=this.currentFolder)||void 0===e?void 0:e.fsPath)||"":(null===(t=this.currentFolder)||void 0===t?void 0:t.path)||""}get tokenNames(){if(this.currentFile){const e=this.currentFile;return[].concat(e.colors,e.fonts,e.components,e.custom).map(e=>e.id)}return[]}getTokenByName(e){let t=null;if(this.currentFile){const r=this.currentFile,n=[r.colors,r.fonts,r.sizes,r.components,r.custom];for(let r=0;r<n.length;r++){const s=o(e,n[r]);if(null!==s){t=s;break}}}return t}}},function(e,t){e.exports=require("stream")},function(e,t,r){"use strict";const n=r(5).fromPromise,o=r(23);e.exports={pathExists:n((function(e){return o.access(e).then(()=>!0).catch(()=>!1)})),pathExistsSync:o.existsSync}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];const o=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement",...n];const s=["null","undefined","string","number","bigint","boolean","symbol"];function i(e){return t=>typeof t===e}const{toString:a}=Object.prototype,c=e=>{const t=a.call(e).slice(8,-1);return/HTML\w+Element/.test(t)&&u.domElement(e)?"HTMLElement":(r=t,o.includes(r)?t:void 0);var r},l=e=>t=>c(t)===e;function u(e){if(null===e)return"null";switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol"}if(u.observable(e))return"Observable";if(u.array(e))return"Array";if(u.buffer(e))return"Buffer";const t=c(e);if(t)return t;if(e instanceof String||e instanceof Boolean||e instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}u.undefined=i("undefined"),u.string=i("string");const d=i("number");u.number=e=>d(e)&&!u.nan(e),u.bigint=i("bigint"),u.function_=i("function"),u.null_=e=>null===e,u.class_=e=>u.function_(e)&&e.toString().startsWith("class "),u.boolean=e=>!0===e||!1===e,u.symbol=i("symbol"),u.numericString=e=>u.string(e)&&!u.emptyStringOrWhitespace(e)&&!Number.isNaN(Number(e)),u.array=Array.isArray,u.buffer=e=>{var t,r,n,o;return null!==(o=null===(n=null===(r=null===(t=e)||void 0===t?void 0:t.constructor)||void 0===r?void 0:r.isBuffer)||void 0===n?void 0:n.call(r,e))&&void 0!==o&&o},u.nullOrUndefined=e=>u.null_(e)||u.undefined(e),u.object=e=>!u.null_(e)&&("object"==typeof e||u.function_(e)),u.iterable=e=>{var t;return u.function_(null===(t=e)||void 0===t?void 0:t[Symbol.iterator])},u.asyncIterable=e=>{var t;return u.function_(null===(t=e)||void 0===t?void 0:t[Symbol.asyncIterator])},u.generator=e=>u.iterable(e)&&u.function_(e.next)&&u.function_(e.throw),u.asyncGenerator=e=>u.asyncIterable(e)&&u.function_(e.next)&&u.function_(e.throw),u.nativePromise=e=>l("Promise")(e);u.promise=e=>u.nativePromise(e)||(e=>{var t,r;return u.function_(null===(t=e)||void 0===t?void 0:t.then)&&u.function_(null===(r=e)||void 0===r?void 0:r.catch)})(e),u.generatorFunction=l("GeneratorFunction"),u.asyncGeneratorFunction=e=>"AsyncGeneratorFunction"===c(e),u.asyncFunction=e=>"AsyncFunction"===c(e),u.boundFunction=e=>u.function_(e)&&!e.hasOwnProperty("prototype"),u.regExp=l("RegExp"),u.date=l("Date"),u.error=l("Error"),u.map=e=>l("Map")(e),u.set=e=>l("Set")(e),u.weakMap=e=>l("WeakMap")(e),u.weakSet=e=>l("WeakSet")(e),u.int8Array=l("Int8Array"),u.uint8Array=l("Uint8Array"),u.uint8ClampedArray=l("Uint8ClampedArray"),u.int16Array=l("Int16Array"),u.uint16Array=l("Uint16Array"),u.int32Array=l("Int32Array"),u.uint32Array=l("Uint32Array"),u.float32Array=l("Float32Array"),u.float64Array=l("Float64Array"),u.bigInt64Array=l("BigInt64Array"),u.bigUint64Array=l("BigUint64Array"),u.arrayBuffer=l("ArrayBuffer"),u.sharedArrayBuffer=l("SharedArrayBuffer"),u.dataView=l("DataView"),u.directInstanceOf=(e,t)=>Object.getPrototypeOf(e)===t.prototype,u.urlInstance=e=>l("URL")(e),u.urlString=e=>{if(!u.string(e))return!1;try{return new URL(e),!0}catch(e){return!1}},u.truthy=e=>Boolean(e),u.falsy=e=>!e,u.nan=e=>Number.isNaN(e),u.primitive=e=>{return u.null_(e)||(t=typeof e,s.includes(t));var t},u.integer=e=>Number.isInteger(e),u.safeInteger=e=>Number.isSafeInteger(e),u.plainObject=e=>{if("[object Object]"!==a.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.getPrototypeOf({})},u.typedArray=e=>{return t=c(e),n.includes(t);var t};u.arrayLike=e=>!u.nullOrUndefined(e)&&!u.function_(e)&&(e=>u.safeInteger(e)&&e>=0)(e.length),u.inRange=(e,t)=>{if(u.number(t))return e>=Math.min(0,t)&&e<=Math.max(t,0);if(u.array(t)&&2===t.length)return e>=Math.min(...t)&&e<=Math.max(...t);throw new TypeError("Invalid range: "+JSON.stringify(t))};const h=["innerHTML","ownerDocument","style","attributes","nodeValue"];u.domElement=e=>u.object(e)&&1===e.nodeType&&u.string(e.nodeName)&&!u.plainObject(e)&&h.every(t=>t in e),u.observable=e=>{var t,r,n,o;return!!e&&(e===(null===(r=(t=e)[Symbol.observable])||void 0===r?void 0:r.call(t))||e===(null===(o=(n=e)["@@observable"])||void 0===o?void 0:o.call(n)))},u.nodeStream=e=>u.object(e)&&u.function_(e.pipe)&&!u.observable(e),u.infinite=e=>e===1/0||e===-1/0;const p=e=>t=>u.integer(t)&&Math.abs(t%2)===e;u.evenInteger=p(0),u.oddInteger=p(1),u.emptyArray=e=>u.array(e)&&0===e.length,u.nonEmptyArray=e=>u.array(e)&&e.length>0,u.emptyString=e=>u.string(e)&&0===e.length,u.nonEmptyString=e=>u.string(e)&&e.length>0;u.emptyStringOrWhitespace=e=>u.emptyString(e)||(e=>u.string(e)&&!/\S/.test(e))(e),u.emptyObject=e=>u.object(e)&&!u.map(e)&&!u.set(e)&&0===Object.keys(e).length,u.nonEmptyObject=e=>u.object(e)&&!u.map(e)&&!u.set(e)&&Object.keys(e).length>0,u.emptySet=e=>u.set(e)&&0===e.size,u.nonEmptySet=e=>u.set(e)&&e.size>0,u.emptyMap=e=>u.map(e)&&0===e.size,u.nonEmptyMap=e=>u.map(e)&&e.size>0;const f=(e,t,r)=>{if(!u.function_(t))throw new TypeError("Invalid predicate: "+JSON.stringify(t));if(0===r.length)throw new TypeError("Invalid number of values");return e.call(r,t)};u.any=(e,...t)=>(u.array(e)?e:[e]).some(e=>f(Array.prototype.some,e,t)),u.all=(e,...t)=>f(Array.prototype.every,e,t);const m=(e,t,r)=>{if(!e)throw new TypeError(`Expected value which is \`${t}\`, received value of type \`${u(r)}\`.`)};t.assert={undefined:e=>m(u.undefined(e),"undefined",e),string:e=>m(u.string(e),"string",e),number:e=>m(u.number(e),"number",e),bigint:e=>m(u.bigint(e),"bigint",e),function_:e=>m(u.function_(e),"Function",e),null_:e=>m(u.null_(e),"null",e),class_:e=>m(u.class_(e),"Class",e),boolean:e=>m(u.boolean(e),"boolean",e),symbol:e=>m(u.symbol(e),"symbol",e),numericString:e=>m(u.numericString(e),"string with a number",e),array:e=>m(u.array(e),"Array",e),buffer:e=>m(u.buffer(e),"Buffer",e),nullOrUndefined:e=>m(u.nullOrUndefined(e),"null or undefined",e),object:e=>m(u.object(e),"Object",e),iterable:e=>m(u.iterable(e),"Iterable",e),asyncIterable:e=>m(u.asyncIterable(e),"AsyncIterable",e),generator:e=>m(u.generator(e),"Generator",e),asyncGenerator:e=>m(u.asyncGenerator(e),"AsyncGenerator",e),nativePromise:e=>m(u.nativePromise(e),"native Promise",e),promise:e=>m(u.promise(e),"Promise",e),generatorFunction:e=>m(u.generatorFunction(e),"GeneratorFunction",e),asyncGeneratorFunction:e=>m(u.asyncGeneratorFunction(e),"AsyncGeneratorFunction",e),asyncFunction:e=>m(u.asyncFunction(e),"AsyncFunction",e),boundFunction:e=>m(u.boundFunction(e),"Function",e),regExp:e=>m(u.regExp(e),"RegExp",e),date:e=>m(u.date(e),"Date",e),error:e=>m(u.error(e),"Error",e),map:e=>m(u.map(e),"Map",e),set:e=>m(u.set(e),"Set",e),weakMap:e=>m(u.weakMap(e),"WeakMap",e),weakSet:e=>m(u.weakSet(e),"WeakSet",e),int8Array:e=>m(u.int8Array(e),"Int8Array",e),uint8Array:e=>m(u.uint8Array(e),"Uint8Array",e),uint8ClampedArray:e=>m(u.uint8ClampedArray(e),"Uint8ClampedArray",e),int16Array:e=>m(u.int16Array(e),"Int16Array",e),uint16Array:e=>m(u.uint16Array(e),"Uint16Array",e),int32Array:e=>m(u.int32Array(e),"Int32Array",e),uint32Array:e=>m(u.uint32Array(e),"Uint32Array",e),float32Array:e=>m(u.float32Array(e),"Float32Array",e),float64Array:e=>m(u.float64Array(e),"Float64Array",e),bigInt64Array:e=>m(u.bigInt64Array(e),"BigInt64Array",e),bigUint64Array:e=>m(u.bigUint64Array(e),"BigUint64Array",e),arrayBuffer:e=>m(u.arrayBuffer(e),"ArrayBuffer",e),sharedArrayBuffer:e=>m(u.sharedArrayBuffer(e),"SharedArrayBuffer",e),dataView:e=>m(u.dataView(e),"DataView",e),urlInstance:e=>m(u.urlInstance(e),"URL",e),urlString:e=>m(u.urlString(e),"string with a URL",e),truthy:e=>m(u.truthy(e),"truthy",e),falsy:e=>m(u.falsy(e),"falsy",e),nan:e=>m(u.nan(e),"NaN",e),primitive:e=>m(u.primitive(e),"primitive",e),integer:e=>m(u.integer(e),"integer",e),safeInteger:e=>m(u.safeInteger(e),"integer",e),plainObject:e=>m(u.plainObject(e),"plain object",e),typedArray:e=>m(u.typedArray(e),"TypedArray",e),arrayLike:e=>m(u.arrayLike(e),"array-like",e),domElement:e=>m(u.domElement(e),"HTMLElement",e),observable:e=>m(u.observable(e),"Observable",e),nodeStream:e=>m(u.nodeStream(e),"Node.js Stream",e),infinite:e=>m(u.infinite(e),"infinite number",e),emptyArray:e=>m(u.emptyArray(e),"empty array",e),nonEmptyArray:e=>m(u.nonEmptyArray(e),"non-empty array",e),emptyString:e=>m(u.emptyString(e),"empty string",e),nonEmptyString:e=>m(u.nonEmptyString(e),"non-empty string",e),emptyStringOrWhitespace:e=>m(u.emptyStringOrWhitespace(e),"empty string or whitespace",e),emptyObject:e=>m(u.emptyObject(e),"empty object",e),nonEmptyObject:e=>m(u.nonEmptyObject(e),"non-empty object",e),emptySet:e=>m(u.emptySet(e),"empty set",e),nonEmptySet:e=>m(u.nonEmptySet(e),"non-empty set",e),emptyMap:e=>m(u.emptyMap(e),"empty map",e),nonEmptyMap:e=>m(u.nonEmptyMap(e),"non-empty map",e),evenInteger:e=>m(u.evenInteger(e),"even integer",e),oddInteger:e=>m(u.oddInteger(e),"odd integer",e),directInstanceOf:(e,t)=>m(u.directInstanceOf(e,t),"T",e),inRange:(e,t)=>m(u.inRange(e,t),"in range",e),any:(e,...t)=>m(u.any(e,...t),"predicate returns truthy for any value",t),all:(e,...t)=>m(u.all(e,...t),"predicate returns truthy for all values",t)},Object.defineProperties(u,{class:{value:u.class_},function:{value:u.function_},null:{value:u.null_}}),Object.defineProperties(t.assert,{class:{value:t.assert.class_},function:{value:t.assert.function_},null:{value:t.assert.null_}}),t.default=u,e.exports=u,e.exports.default=u,e.exports.assert=t.assert},function(e,t,r){"use strict";function n(e,t,r,n){var o=n?" !== ":" === ",s=n?" || ":" && ",i=n?"!":"",a=n?"":"!";switch(e){case"null":return t+o+"null";case"array":return i+"Array.isArray("+t+")";case"object":return"("+i+t+s+"typeof "+t+o+'"object"'+s+a+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+o+'"number"'+s+a+"("+t+" % 1)"+s+t+o+t+(r?s+i+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+o+'"'+e+'"'+(r?s+i+"isFinite("+t+")":"")+")";default:return"typeof "+t+o+'"'+e+'"'}}e.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:n,checkDataTypes:function(e,t,r){switch(e.length){case 1:return n(e[0],t,r,!0);default:var o="",i=s(e);for(var a in i.array&&i.object&&(o=i.null?"(":"(!"+t+" || ",o+="typeof "+t+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer,i)o+=(o?" && ":"")+n(a,t,r,!0);return o}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++){var s=t[n];(o[s]||"array"===e&&"array"===s)&&(r[r.length]=s)}if(r.length)return r}else{if(o[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:s,getProperty:c,escapeQuotes:l,equal:r(38),ucs2length:r(169),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var n in e)if(n!=r&&t[n])return!0},schemaUnknownRules:function(e,t){if("boolean"==typeof e)return;for(var r in e)if(!t[r])return r},toQuotedString:u,getPathExpr:function(e,t,r,n){return p(e,r?"'/' + "+t+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var n=u(r?"/"+f(t):c(t));return p(e,n)},getData:function(e,t,r){var n,o,s,i;if(""===e)return"rootData";if("/"==e[0]){if(!d.test(e))throw new Error("Invalid JSON-pointer: "+e);o=e,s="rootData"}else{if(!(i=e.match(h)))throw new Error("Invalid JSON-pointer: "+e);if(n=+i[1],"#"==(o=i[2])){if(n>=t)throw new Error("Cannot access property/index "+n+" levels up, current level is "+t);return r[t-n]}if(n>t)throw new Error("Cannot access data "+n+" levels up, current level is "+t);if(s="data"+(t-n||""),!o)return s}for(var a=s,l=o.split("/"),u=0;u<l.length;u++){var p=l[u];p&&(s+=c(m(p)),a+=" && "+s)}return a},unescapeFragment:function(e){return m(decodeURIComponent(e))},unescapeJsonPointer:m,escapeFragment:function(e){return encodeURIComponent(f(e))},escapeJsonPointer:f};var o=s(["string","number","integer","boolean","null"]);function s(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var i=/^[a-z$_][a-z$_0-9]*$/i,a=/'|\\/g;function c(e){return"number"==typeof e?"["+e+"]":i.test(e)?"."+e:"['"+l(e)+"']"}function l(e){return e.replace(a,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function u(e){return"'"+l(e)+"'"}var d=/^\/(?:[^~]|~0|~1)*$/,h=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function p(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function f(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function m(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebViewPanel=void 0;const c=r(1),l=s(r(0)),u=s(r(2)),d=r(1),h=r(6),p=r(1),f=a(r(9)),m=r(19);class g{constructor(e,t){this._disposables=[],this._onColorClick=new u.EventEmitter,this._onFileUpdate=new u.EventEmitter,this._onSavePreferences=new u.EventEmitter,this._onFileSave=new u.EventEmitter,this._onDownloadRenditions=new u.EventEmitter,this._onExportTokens=new u.EventEmitter,this._onAuthorize=new u.EventEmitter,this._onOpenURL=new u.EventEmitter,this._onResetDSP=new u.EventEmitter,this._onStartEdit=new u.EventEmitter,this._onGetSettings=new u.EventEmitter,this._onLinkToOutput=new u.EventEmitter,this._onLinkToAssets=new u.EventEmitter,this._onOpenExtensionSettings=new u.EventEmitter,this._onSetIsCreationMode=new u.EventEmitter,this._onReadyForDeeplink=new u.EventEmitter,this._onUpdateConsumerSnippetFilter=new u.EventEmitter,this._onSavePreviewToAssets=new u.EventEmitter,this._onDeleteFromAssets=new u.EventEmitter,this._onGetLocalResourceUri=new u.EventEmitter,this._onGetMarkdownWithLocalResourceUris=new u.EventEmitter,this._onCheckForLocalAssets=new u.EventEmitter,this._onChooseSaveLocation=new u.EventEmitter,this._onFetch=new u.EventEmitter,this._onLoadPreferences=new u.EventEmitter,this._onLoadRenditionImage=new u.EventEmitter,this._onBrowseForImage=new u.EventEmitter,this._onGetStartupSettings=new u.EventEmitter,this._onLoadDSPFile=new u.EventEmitter,this._onGetMetaData=new u.EventEmitter,this._onCopyTokensTo=new u.EventEmitter,this.asyncMessagesMap=new Map,this.messagesMap=new Map([["colorClick",e=>{this._onColorClick.fire(e)}],["saveDSPFile",e=>{this._onFileSave.fire(e)}],["updateDSPFile",e=>{this._onFileUpdate.fire(e)}],["downloadRenditions",e=>{this._onDownloadRenditions.fire(e)}],["exportTokens",()=>{this._onExportTokens.fire()}],["authorize",()=>{this._onAuthorize.fire()}],["openURL",e=>{this._onOpenURL.fire(e)}],["reset",()=>{this._onResetDSP.fire()}],["startEditing",()=>{this._onStartEdit.fire()}],["showErrorMessage",e=>{this.showErrorMessage(e)}],["showMessage",e=>{this.showMessage(e)}],["getSettings",e=>{this._onGetSettings.fire(e)}],["linkToOutput",()=>{this._onLinkToOutput.fire()}],["linkToAssets",()=>{this._onLinkToAssets.fire()}],["savePreferences",e=>{this._onSavePreferences.fire(e)}],["setIsCreationMode",e=>{this._onSetIsCreationMode.fire(e)}],["log",e=>{p.Logger.log("[source: webview] "+e)}],["savePreviewToAssets",e=>{this._onSavePreviewToAssets.fire(e)}],["deleteFromAssets",e=>{this._onDeleteFromAssets.fire(e)}],["openExtensionSettings",()=>{this._onOpenExtensionSettings.fire()}],["readyForDeeplink",e=>{this._onReadyForDeeplink.fire(e)}],["updateConsumerSnippetFilters",e=>{this._onUpdateConsumerSnippetFilter.fire(e)}],["getLocalResourceUri",e=>{this._onGetLocalResourceUri.fire(e)}],["getMarkdownWithLocalResourceUris",e=>{this._onGetMarkdownWithLocalResourceUris.fire(e)}],["checkForLocalAssets",()=>{this._onCheckForLocalAssets.fire()}]]),this._panel=e,this._extensionPath=t,this._update(),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.onDidChangeViewState(e=>{this._panel.visible&&this._update()},null,this._disposables),this.registerAsyncMessage("chooseSaveLocation",this._onChooseSaveLocation),this.registerAsyncMessage("fetch",this._onFetch),this.registerAsyncMessage("loadPreferences",this._onLoadPreferences),this.registerAsyncMessage("loadRenditionImage",this._onLoadRenditionImage),this.registerAsyncMessage("browseForImage",this._onBrowseForImage),this.registerAsyncMessage("getStartupSettings",this._onGetStartupSettings),this.registerAsyncMessage("loadDSPFile",this._onLoadDSPFile),this.registerAsyncMessage("getMetadata",this._onGetMetaData),this.registerAsyncMessage("copyTokensTo",this._onCopyTokensTo),this._panel.webview.onDidReceiveMessage(e=>{if(e.__id){const t=this.asyncMessagesMap.get(e.command);t&&t(e)}else{const t=this.messagesMap.get(e.command);t?t(e.data):console.error(`\`${e.command}\` not found.  Did you forget to add this to the \`messagesMap?\``)}})}get currentDeeplink(){return this._currentDeeplink}clearDeeplink(){this._currentDeeplink=void 0}get localResourceRoots(){return this._panel.webview.options.localResourceRoots}get onColorClick(){var e;return null===(e=this._onColorClick)||void 0===e?void 0:e.event}get onFileUpdate(){var e;return null===(e=this._onFileUpdate)||void 0===e?void 0:e.event}get onSavePreferences(){var e;return null===(e=this._onSavePreferences)||void 0===e?void 0:e.event}get onFileSave(){var e;return null===(e=this._onFileSave)||void 0===e?void 0:e.event}get downloadRenditions(){var e;return null===(e=this._onDownloadRenditions)||void 0===e?void 0:e.event}get onExportTokens(){var e;return null===(e=this._onExportTokens)||void 0===e?void 0:e.event}get onAuthorize(){var e;return null===(e=this._onAuthorize)||void 0===e?void 0:e.event}get onOpenURL(){var e;return null===(e=this._onOpenURL)||void 0===e?void 0:e.event}get onResetDSP(){var e;return null===(e=this._onResetDSP)||void 0===e?void 0:e.event}get onStartEdit(){var e;return null===(e=this._onStartEdit)||void 0===e?void 0:e.event}get onGetSettings(){var e;return null===(e=this._onGetSettings)||void 0===e?void 0:e.event}get onLinkToOutput(){var e;return null===(e=this._onLinkToOutput)||void 0===e?void 0:e.event}get onLinkToAssets(){var e;return null===(e=this._onLinkToAssets)||void 0===e?void 0:e.event}get onOpenExtensionSettings(){var e;return null===(e=this._onOpenExtensionSettings)||void 0===e?void 0:e.event}get onSetIsCreationMode(){var e;return null===(e=this._onSetIsCreationMode)||void 0===e?void 0:e.event}get onReadyForDeeplink(){var e;return null===(e=this._onReadyForDeeplink)||void 0===e?void 0:e.event}get onUpdateConsumerSnippetFilter(){var e;return null===(e=this._onUpdateConsumerSnippetFilter)||void 0===e?void 0:e.event}get onSavePreviewToAssets(){var e;return null===(e=this._onSavePreviewToAssets)||void 0===e?void 0:e.event}get onDeleteFromAssets(){var e;return null===(e=this._onDeleteFromAssets)||void 0===e?void 0:e.event}get onGetLocalResourceUri(){var e;return null===(e=this._onGetLocalResourceUri)||void 0===e?void 0:e.event}get onGetMarkdownWithLocalResourceUris(){var e;return null===(e=this._onGetMarkdownWithLocalResourceUris)||void 0===e?void 0:e.event}get onCheckForLocalAssets(){var e;return null===(e=this._onCheckForLocalAssets)||void 0===e?void 0:e.event}get onChooseSaveLocation(){var e;return null===(e=this._onChooseSaveLocation)||void 0===e?void 0:e.event}get onFetch(){var e;return null===(e=this._onFetch)||void 0===e?void 0:e.event}get onLoadPreferences(){var e;return null===(e=this._onLoadPreferences)||void 0===e?void 0:e.event}get onLoadRenditionImage(){var e;return null===(e=this._onLoadRenditionImage)||void 0===e?void 0:e.event}get onBrowseForImage(){var e;return null===(e=this._onBrowseForImage)||void 0===e?void 0:e.event}get onGetStartupSettings(){var e;return null===(e=this._onGetStartupSettings)||void 0===e?void 0:e.event}get onLoadDSPFile(){var e;return null===(e=this._onLoadDSPFile)||void 0===e?void 0:e.event}get onGetMetaData(){var e;return null===(e=this._onGetMetaData)||void 0===e?void 0:e.event}get onCopyTokensTo(){var e;return null===(e=this._onCopyTokensTo)||void 0===e?void 0:e.event}showErrorMessage(e){return i(this,void 0,void 0,(function*(){const t=yield u.window.showErrorMessage(e.message,e.confirmLabel?e.confirmLabel:c.getString("Button.Confirm"),e.cancelLabel?e.cancelLabel:c.getString("Button.Cancel"));this._postMessage("errorMessageResult",t||e.cancelLabel)}))}showMessage(e){u.window.showInformationMessage(e)}static createOrShow(e,t){const r=u.window.activeTextEditor?u.ViewColumn.Beside:void 0;if(g.currentPanel)return void g.currentPanel._panel.reveal(r);let n=[];const o=u.workspace.getConfiguration(c.SettingsSectionName).get(d.ExtSetting.LastPackage);o&&n.push(u.Uri.file(o)),f.default.currentFolder&&n.push(f.default.currentFolder);const s=u.window.createWebviewPanel(g.viewType,g.title,r||u.ViewColumn.One,{enableScripts:!0,localResourceRoots:n.length?[u.Uri.file(l.join(e,g._webviewResourcePath)),...n]:void 0});s.iconPath=u.Uri.file(l.join(e,"build/app-icon.png")),g.currentPanel=new g(s,e),g.currentPanel._currentDeeplink=t}static revive(e,t){g.currentPanel=new g(e,t)}registerAsyncMessage(e,t){this.asyncMessagesMap.set(e,e=>{t.fire(e)})}_postMessage(e,t){this._panel.webview.postMessage({command:e,data:t})}setCCLoginState(e){this._postMessage("userCCAuthorizationChange",e)}onDidChangeActiveColorTheme(e){this._postMessage("changeActiveColorTheme",e)}onCreationModeChange(e){this._postMessage("setIsCreationMode",e)}onAuthorNameChange(e){this._postMessage("setAuthorName",e)}deeplinkToToken(e){this._panel.visible?this._postMessage("deeplinkToken",e):(this._currentDeeplink=e,this.reveal())}updateComplete(e){this._postMessage("updateComplete",e)}onAsyncMessageComplete(e){this._postMessage("__async",e)}reveal(){this._panel.reveal()}get active(){return this._panel.active}setLocalResourceUri(e){if(f.default.currentFolder){p.Logger.log("WebViewPanel setLocalResourceUri() assetPath: "+e);const t=u.Uri.file(l.join(f.default.currentFolder.path,e)),r=this._panel.webview.asWebviewUri(t);this._postMessage("setLocalResourceUri",r.toString())}}setMarkdownWithLocalResourceUris(e){f.default.currentFolder&&(e=this._replacePaths(m.LOCAL_ASSET_REGEX,e,f.default.currentFolder),e=this._replacePaths(m.LOCAL_SRC_REGEX,e,f.default.currentFolder),this._postMessage("setMarkdownWithLocalResourceUris",e))}dispose(){for(g.currentPanel=void 0,this._onColorClick.dispose(),this._onFileUpdate.dispose(),this._onFileSave.dispose(),this._onDownloadRenditions.dispose(),this._onExportTokens.dispose(),this._onAuthorize.dispose(),this._onOpenURL.dispose(),this._onChooseSaveLocation.dispose(),this._onResetDSP.dispose(),this._onStartEdit.dispose(),this._onGetSettings.dispose(),this._onLinkToOutput.dispose(),this._onLinkToAssets.dispose(),this._onSetIsCreationMode.dispose(),this._onOpenExtensionSettings.dispose(),this._onReadyForDeeplink.dispose(),this._onUpdateConsumerSnippetFilter.dispose(),this._onGetLocalResourceUri.dispose(),this._onGetMarkdownWithLocalResourceUris.dispose(),this._onCheckForLocalAssets.dispose(),this._panel.dispose();this._disposables.length;){const e=this._disposables.pop();e&&e.dispose()}}_update(){return i(this,void 0,void 0,(function*(){const e=this._panel.webview;e.html=yield this._getHtmlForWebview(e)}))}_getHtmlForWebview(e){return i(this,void 0,void 0,(function*(){const e=u.Uri.file(l.join(this._extensionPath,g._webviewResourcePath,"index.html")),t=yield u.workspace.fs.readFile(e);let r=new h.TextDecoder("utf-8").decode(t);const n=u.Uri.file(l.join(this._extensionPath,g._webviewResourcePath));r=this._replacePaths(/(?<=script src=")([\/.\w~-]+)/g,r,n);return r=this._replacePaths(/(?<=link href=")([\/.\w]+)/g,r,n),r}))}_replacePaths(e,t,r){let n=t,o=[],s=e.exec(n);for(;null!==s;)o.push(s[0]),s=e.exec(n);return o.map(e=>{const t=u.Uri.file(l.join(r.path,e)),o=this._panel.webview.asWebviewUri(t);n=n.replace(e,o.toString())}),n}}t.WebViewPanel=g,g.viewType="DSP",g.title=c.getString("GLOBAL.App_Name"),g._webviewResourcePath="./build"},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.openInFileExplorer=t.pathJoin=t.isWindows=t.installSDLocally=t.generateTokensWithSD=t.generateSDConfigJSON=t.generateSDConfigJS=t.getSDVersion=t.ToFontsStyleDictionary=t.getSDFormatAliasValue=t.ToSizesStyleDictionary=t.ToCustomStyleDictionary=t.ToColorsStyleDictionary=t.GenerateStyleDictionaryJson=t.SD_SIZE_NAME=t.SD_CUSTOM_NAME=t.SD_FONTS_NAME=t.SD_COLORS_NAME=t.SD_CONFIG_NAME=t.PROPERTIES_FOLDER=t.GENERATED_FOLDER_NAME=t.DIST_FOLDER=void 0;const c=r(1),l=a(r(0)),u=a(r(31)),d=r(1),h=a(r(111)),p=r(137),f=r(22),m=r(26),g=r(1),y=s(r(2));t.DIST_FOLDER="dist",t.GENERATED_FOLDER_NAME=t.DIST_FOLDER+"/styledictionary",t.PROPERTIES_FOLDER="properties",t.SD_CONFIG_NAME="config.js",t.SD_COLORS_NAME="colors.json",t.SD_FONTS_NAME="fonts.json",t.SD_CUSTOM_NAME="custom.json",t.SD_SIZE_NAME="sizes.json",t.GenerateStyleDictionaryJson=e=>{if(void 0===e)return;const r=c.buildAllTokensCache(e),n=[],o=[],s=[];e.aliases.map(e=>{const t=c.getSourceForAlias(r.tokenEntityMap,e);if(t instanceof Error)d.Logger.log(`TokenUtils GenerateStyleDictionaryJson() Error: ${t.toString()} Alias: ${e.name}`);else if(t)switch(t.type){case c.EntityType.Color:n.push(e);break;case c.EntityType.Custom:o.push(e);break;case c.EntityType.Size:s.push(e)}});return{colors:t.ToColorsStyleDictionary([...n,...e.colors]),custom:t.ToCustomStyleDictionary([...o,...e.custom]),sizes:t.ToSizesStyleDictionary([...s,...e.sizes]),fonts:t.ToFontsStyleDictionary(r.tokenEntityMap,[...e.fonts])}},t.ToColorsStyleDictionary=e=>{let t={color:{}};return e.map(e=>{const r=c.sanitizeValueForSD(e.name);t.color[r]={value:e.type===c.EntityType.Alias?`{color.${d.getCleanReferenceValue(e.value,!0)}.value}`:e.value},e.description&&(t.color[r].comment=v(e.description))}),t},t.ToCustomStyleDictionary=e=>{let t={custom:{}};return e.map(e=>{const r=c.sanitizeValueForSD(e.name);t.custom[r]={value:e.type===c.EntityType.Alias?`{custom.${d.getCleanReferenceValue(e.value,!0)}.value}`:e.value},e.description&&(t.custom[r].comment=v(e.description))}),t},t.ToSizesStyleDictionary=e=>{let t={size:{}};return e.map(e=>{const r=c.sanitizeValueForSD(e.name);t.size[r]={value:e.type===c.EntityType.Alias?`{size.${d.getCleanReferenceValue(e.value,!0)}.value}`:e.value},e.description&&(t.size[r].comment=v(e.description))}),t};const v=e=>{const t=e.slice(0,80),r=t.indexOf("\r\n"),n=t.indexOf("\n");return r>-1&&r<n?t.slice(0,r):n>-1?t.slice(0,n):t};t.getSDFormatAliasValue=(e,t)=>{var r,n;if(!c.isReferenceValue(t))return t;{const o=g.getSourceForReferenceValue(e,t);if(void 0!==(r=o)&&"key"in r&&void 0!==(null===(n=r)||void 0===n?void 0:n.key))return o.key===c.FontKey.Size?`{size.font.${d.getCleanReferenceValue(o.name,!0,!0)}.value}`:`{font.${d.getCleanReferenceValue(o.name,!0,!0)}.${o.key}.value}`;if((e=>{var t;return void 0!==e&&"type"in e&&void 0!==(null===(t=e)||void 0===t?void 0:t.type)})(o))switch(o.type){case c.EntityType.Color:case c.EntityType.Custom:case c.EntityType.Size:return`{${o.type}.${d.getCleanReferenceValue(o.name,!0)}.value}`}}},t.ToFontsStyleDictionary=(e,r)=>{let n={font:{},size:{font:{}}};return r.map(r=>{var o,s,i;const a=c.sanitizeValueForSD(r.name),l=t.getSDFormatAliasValue(e,(null===(o=r.tokens.find(e=>e.key===c.FontKey.Family))||void 0===o?void 0:o.value)||""),u=t.getSDFormatAliasValue(e,(null===(s=r.tokens.find(e=>e.key===c.FontKey.Weight))||void 0===s?void 0:s.value)||""),d=t.getSDFormatAliasValue(e,(null===(i=r.tokens.find(e=>e.key===c.FontKey.Size))||void 0===i?void 0:i.value)||"");let h={};l&&""!==l&&(h.family={value:l}),u&&""!==u&&(h.weight={value:u}),n.font[a]=h,d&&""!==d&&(n.size.font[a]={value:d})}),n},t.getSDVersion=e=>i(void 0,void 0,void 0,(function*(){const t=yield b();if(null!==t)return d.Logger.log(`getSDVersion() globalVersion: ${t} rootPath: ${e}`),t;const r=yield w(e);return null!==r?(d.Logger.log(`getSDVersion() localVersion: ${r} rootPath: ${e}`),r):(d.Logger.log("getSDVersion() null, rootPath: "+e),null)}));const b=()=>new Promise((e,t)=>{try{p.exec("style-dictionary --version",(t,r,n)=>{e(t?null:r)})}catch(t){e(null)}}),w=e=>new Promise((t,r)=>{try{const r=S(e);r&&p.exec(r+" --version",(e,r,n)=>{t(e?null:r)})}catch(e){t(null)}}),S=(e,r=!0)=>{const n=h.default("node_modules",{cwd:e});if(n){const e=n.split("\\").join("/")+"/style-dictionary/bin/style-dictionary";if(n&&f.existsSync(e))return t.isWindows()?`node "${y.Uri.file(e).fsPath}"`:`"${e}"`}return r&&(()=>{try{const e=p.execSync("npx -v");if(null==e?void 0:e.toString("utf8"))return!0}catch(e){}return!1})()?"npx style-dictionary":null};t.generateSDConfigJS=(e,r)=>i(void 0,void 0,void 0,(function*(){const n=l.default.resolve(r,"build/SDConfig.template.js");try{const r=yield m.readAsync(n);return r.replace("REPLACE_CONFIG_HERE",t.generateSDConfigJSON(e))}catch(e){return d.Logger.log("Error generating Default SD Config"),""}})),t.generateSDConfigJSON=e=>{var r;let n={source:[t.pathJoin(t.PROPERTIES_FOLDER,t.SD_COLORS_NAME),t.pathJoin(t.PROPERTIES_FOLDER,t.SD_FONTS_NAME),t.pathJoin(t.PROPERTIES_FOLDER,t.SD_CUSTOM_NAME),t.pathJoin(t.PROPERTIES_FOLDER,t.SD_SIZE_NAME)],platforms:{}};if(null==e?void 0:e.settings.languages){const t=e.settings.languages.filter(e=>e.export_tokens);for(let e of t)if(e.export_tokens){let t=(null===(r=e[c.styledictionaryID])||void 0===r?void 0:r.toString())||"",o={};switch(e[c.styledictionaryID]){case c.SDLanguage.css:o.files=[{destination:"variables.css",format:"css/variables"}];break;case c.SDLanguage.scss:o.files=[{destination:"variables.scss",format:"scss/variables"}];break;case c.SDLanguage.android:o.files=[{destination:"font_dimens.xml",format:"android/fontDimens"},{destination:"colors.xml",format:"android/colors"}];break;case c.SDLanguage.ios:o.files=[{destination:"StyleDictionaryColor.h",format:"ios/colors.h",className:"StyleDictionaryColor",type:"StyleDictionaryColorName",filter:{attributes:{category:"color"}}},{destination:"StyleDictionarySize.h",format:"ios/static.h",className:"StyleDictionarySize",type:"float",filter:{attributes:{category:"size"}}},{destination:"StyleDictionarySize.m",format:"ios/static.m",className:"StyleDictionarySize",type:"float",filter:{attributes:{category:"size"}}}];break;case c.SDLanguage.swift:o.files=[{destination:"StyleDictionary.swift",format:"ios-swift/class.swift",className:"StyleDictionary",filter:{}}];break;case c.SDLanguage.javascript:o.files=[{destination:"tokens.js",format:"javascript/es6"}];break;case c.SDLanguage.flutter:o.files=[{destination:"style_dictionary.dart",format:"flutter/class.dart",className:"StyleDictionary"}]}const s=Object.assign({},o);s.transformGroup=e[c.styledictionaryID],s.buildPath=t,s.buildPath.lastIndexOf("/")!==s.buildPath.length-1&&(s.buildPath+="/"),n.platforms[t]=s}}return JSON.stringify(n,null,2)},t.generateTokensWithSD=(e,r)=>new Promise((n,o)=>i(void 0,void 0,void 0,(function*(){let o="style-dictionary";const s=S(e,!1);if(s){o=s;const i=`${t.isWindows()?e.substr(0,2)+" && ":""}cd "${e}" && ${o} build -c ${r}`;d.Logger.log("TokenUtils.generateTokensWithSD(): "+i),p.exec(i,(e,t,r)=>{e?(d.Logger.log("generateTokensWithSD Error: "+r),n({success:!1,output:r})):(d.Logger.log("generateTokensWithSD Success: "+t),n({success:!0,output:t}))})}else n({success:!1,output:c.getString("Error.MissingStyleDictionary"),btn:c.getString("Toast.Button.InstallSD")})}))),t.installSDLocally=e=>new Promise((r,n)=>i(void 0,void 0,void 0,(function*(){const n=`${t.isWindows()?e.substr(0,2)+" && ":""}cd "${e}" && npm i style-dictionary`;d.Logger.log("TokenUtils.installSDLocally(): "+n),p.exec(n,(e,t,n)=>{e?(d.Logger.log("installSDLocally Error: "+n),r({success:!1,output:`${n} ${c.getString("Toast.InstallNodeJS")}`,btn:c.getString("Toast.Button.DownloadNodeJS")})):(d.Logger.log("installSDLocally Success: "+t),r({success:!0,output:t}))})}))),t.isWindows=()=>"win32"===u.default.platform(),t.pathJoin=(...e)=>{let r=l.default.join.apply(null,e).split("\\").join("/");return t.isWindows()&&"/"===r[0]&&(r=r.substr(1)),r},t.openInFileExplorer=e=>{d.Logger.log("TokenUtils.openInFileExplorer(): "+e);let t="";switch(u.default.platform()){case"win32":t="explorer";break;case"darwin":t="open";break;case"linux":t="xdg-open"}if(""!==t){const r=p.spawn(t,[e]);r.on("error",e=>{d.Logger.log(e),r.kill()})}else d.Logger.log("Un-supported OS: "+u.default.platform())}},function(e,t){e.exports=require("url")},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.CancelError=t.ParseError=void 0;const s=r(42);Object.defineProperty(t,"CancelError",{enumerable:!0,get:function(){return s.CancelError}});const i=r(29);class a extends i.RequestError{constructor(e,t){const{options:r}=t.request;super(`${e.message} in "${r.url.toString()}"`,e,t.request),this.name="ParseError",Object.defineProperty(this,"response",{enumerable:!1,value:t})}}t.ParseError=a,o(r(29),t)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontKey=t.EntityType=t.EntityClass=t.adobeCClibID=void 0,t.adobeCClibID="ext-com_adobe-cclib",function(e){e.Token="token",e.Collection="collection",e.Document="doc",e.Component="component"}(t.EntityClass||(t.EntityClass={})),function(e){e.Color="color",e.Font="font",e.Size="size",e.Custom="custom",e.Alias="alias",e.Page="page"}(t.EntityType||(t.EntityType={})),function(e){e.None="none",e.Family="family",e.Weight="weight",e.Size="size"}(t.FontKey||(t.FontKey={}))},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.containsLocalReferences=t.entityToQuickpick=t.openExtensionSettings=t.packageExists=t.tryFindPackage=t.LOCAL_SRC_REGEX=t.LOCAL_ASSET_REGEX=void 0;const c=a(r(0)),l=s(r(2)),u=r(1);t.LOCAL_ASSET_REGEX=/\/assets\/[\w\-]+.\w+/g,t.LOCAL_SRC_REGEX=/(?<=src='|")\/[\w\-\/]+.\w+/g,t.tryFindPackage=()=>i(void 0,void 0,void 0,(function*(){u.Logger.log("tryFindPackage()");const e=(t,r,n)=>i(void 0,void 0,void 0,(function*(){for(let o of r){const r=o[0],s=o[1];if(s===l.FileType.Directory&&0!==r.indexOf(".")){const o=l.Uri.file(c.default.join(t,r)),s=yield l.workspace.fs.readDirectory(o);if(n<2){const o=yield e(c.default.join(t,r),s,n+1);if(o)return o}}else if(s===l.FileType.File&&r===u.MAIN_FILE_NAME)return l.Uri.file(t)}})),t=l.workspace.workspaceFolders||[];for(let r of t){const t=yield l.workspace.fs.readDirectory(r.uri),n=yield e(r.uri.path,t,0);if(n)return n}})),t.packageExists=e=>i(void 0,void 0,void 0,(function*(){try{const t=yield l.workspace.fs.readDirectory(e);for(let e of t){const t=e[0];if(e[1]===l.FileType.File&&t===u.MAIN_FILE_NAME)return!0}return!1}catch(e){return!1}})),t.openExtensionSettings=()=>{l.commands.executeCommand("workbench.action.openSettings","@ext:adobe.xd")},t.entityToQuickpick=e=>({label:e.name,alwaysShow:!0}),t.containsLocalReferences=e=>{if(e){const r=[e.docs,e.colors,e.fonts,e.components,e.custom],n=e=>e.some(e=>{var r,n;return!!(null===(r=e.description)||void 0===r?void 0:r.match(t.LOCAL_ASSET_REGEX))||!!(null===(n=e.description)||void 0===n?void 0:n.match(t.LOCAL_SRC_REGEX))}),o=r.length;for(let e=0;e<o;e++)if(n(r[e]))return!0}return!1}},function(e,t,r){"use strict";const n=r(0),o="win32"===process.platform,{REGEX_BACKSLASH:s,REGEX_REMOVE_BACKSLASH:i,REGEX_SPECIAL_CHARS:a,REGEX_SPECIAL_CHARS_GLOBAL:c}=r(21);t.isObject=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),t.hasRegexChars=e=>a.test(e),t.isRegexChar=e=>1===e.length&&t.hasRegexChars(e),t.escapeRegex=e=>e.replace(c,"\\$1"),t.toPosixSlashes=e=>e.replace(s,"/"),t.removeBackslashes=e=>e.replace(i,e=>"\\"===e?"":e),t.supportsLookbehinds=()=>{const e=process.version.slice(1).split(".").map(Number);return 3===e.length&&e[0]>=9||8===e[0]&&e[1]>=10},t.isWindows=e=>e&&"boolean"==typeof e.windows?e.windows:!0===o||"\\"===n.sep,t.escapeLast=(e,r,n)=>{const o=e.lastIndexOf(r,n);return-1===o?e:"\\"===e[o-1]?t.escapeLast(e,r,o-1):`${e.slice(0,o)}\\${e.slice(o)}`},t.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r},t.wrapOutput=(e,t={},r={})=>{let n=`${r.contains?"":"^"}(?:${e})${r.contains?"":"$"}`;return!0===t.negated&&(n=`(?:^(?!${n}).*$)`),n}},function(e,t,r){"use strict";const n=r(0),o={DOT_LITERAL:"\\.",PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:"\\/",ONE_CHAR:"(?=.)",QMARK:"[^/]",END_ANCHOR:"(?:\\/|$)",DOTS_SLASH:"\\.{1,2}(?:\\/|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|\\/)\\.{1,2}(?:\\/|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:\\/|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:\\/|$))",QMARK_NO_DOT:"[^.\\/]",STAR:"[^/]*?",START_ANCHOR:"(?:^|\\/)"},s={...o,SLASH_LITERAL:"[\\\\/]",QMARK:"[^\\\\/]",STAR:"[^\\\\/]*?",DOTS_SLASH:"\\.{1,2}(?:[\\\\/]|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|[\\\\/])\\.{1,2}(?:[\\\\/]|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:[\\\\/]|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:[\\\\/]|$))",QMARK_NO_DOT:"[^.\\\\/]",START_ANCHOR:"(?:^|[\\\\/])",END_ANCHOR:"(?:[\\\\/]|$)"};e.exports={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:n.sep,extglobChars:e=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:e=>!0===e?s:o}},function(e,t,r){"use strict";e.exports={...r(23),...r(58),...r(61),...r(145),...r(147),...r(153),...r(7),...r(158),...r(160),...r(35),...r(11),...r(25)};const n=r(3);Object.getOwnPropertyDescriptor(n,"promises")&&Object.defineProperty(e.exports,"promises",{get:()=>n.promises})},function(e,t,r){"use strict";const n=r(5).fromCallback,o=r(4),s=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>"function"==typeof o[e]);Object.keys(o).forEach(e=>{"promises"!==e&&(t[e]=o[e])}),s.forEach(e=>{t[e]=n(o[e])}),t.exists=function(e,t){return"function"==typeof t?o.exists(e,t):new Promise(t=>o.exists(e,t))},t.read=function(e,t,r,n,s,i){return"function"==typeof i?o.read(e,t,r,n,s,i):new Promise((i,a)=>{o.read(e,t,r,n,s,(e,t,r)=>{if(e)return a(e);i({bytesRead:t,buffer:r})})})},t.write=function(e,t,...r){return"function"==typeof r[r.length-1]?o.write(e,t,...r):new Promise((n,s)=>{o.write(e,t,...r,(e,t,r)=>{if(e)return s(e);n({bytesWritten:t,buffer:r})})})},"function"==typeof o.writev&&(t.writev=function(e,t,...r){return"function"==typeof r[r.length-1]?o.writev(e,t,...r):new Promise((n,s)=>{o.writev(e,t,...r,(e,t,r)=>{if(e)return s(e);n({bytesWritten:t,buffers:r})})})}),"function"==typeof o.realpath.native&&(t.realpath.native=n(o.realpath.native))},function(e,t,r){"use strict";const n=r(23),o=r(0),s=r(6),i=r(59)("10.5.0"),a=e=>i?n.stat(e,{bigint:!0}):n.stat(e),c=e=>i?n.statSync(e,{bigint:!0}):n.statSync(e);function l(e,t){return Promise.all([a(e),a(t).catch(e=>{if("ENOENT"===e.code)return null;throw e})]).then(([e,t])=>({srcStat:e,destStat:t}))}function u(e,t){if(t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev){if(i||t.ino<Number.MAX_SAFE_INTEGER)return!0;if(t.size===e.size&&t.mode===e.mode&&t.nlink===e.nlink&&t.atimeMs===e.atimeMs&&t.mtimeMs===e.mtimeMs&&t.ctimeMs===e.ctimeMs&&t.birthtimeMs===e.birthtimeMs)return!0}return!1}function d(e,t){const r=o.resolve(e).split(o.sep).filter(e=>e),n=o.resolve(t).split(o.sep).filter(e=>e);return r.reduce((e,t,r)=>e&&n[r]===t,!0)}function h(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}e.exports={checkPaths:function(e,t,r,n){s.callbackify(l)(e,t,(o,s)=>{if(o)return n(o);const{srcStat:i,destStat:a}=s;return a&&u(i,a)?n(new Error("Source and destination must not be the same.")):i.isDirectory()&&d(e,t)?n(new Error(h(e,t,r))):n(null,{srcStat:i,destStat:a})})},checkPathsSync:function(e,t,r){const{srcStat:n,destStat:o}=function(e,t){let r;const n=c(e);try{r=c(t)}catch(e){if("ENOENT"===e.code)return{srcStat:n,destStat:null};throw e}return{srcStat:n,destStat:r}}(e,t);if(o&&u(n,o))throw new Error("Source and destination must not be the same.");if(n.isDirectory()&&d(e,t))throw new Error(h(e,t,r));return{srcStat:n,destStat:o}},checkParentPaths:function e(t,r,s,a,c){const l=o.resolve(o.dirname(t)),d=o.resolve(o.dirname(s));if(d===l||d===o.parse(d).root)return c();const p=(n,o)=>n?"ENOENT"===n.code?c():c(n):u(r,o)?c(new Error(h(t,s,a))):e(t,r,d,a,c);i?n.stat(d,{bigint:!0},p):n.stat(d,p)},checkParentPathsSync:function e(t,r,n,s){const i=o.resolve(o.dirname(t)),a=o.resolve(o.dirname(n));if(a===i||a===o.parse(a).root)return;let l;try{l=c(a)}catch(e){if("ENOENT"===e.code)return;throw e}if(u(r,l))throw new Error(h(t,n,s));return e(t,r,a,s)},isSrcSubdir:d}},function(e,t,r){"use strict";const n=r(5).fromCallback,o=r(146);e.exports={remove:n(o),removeSync:o.sync}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getSizeAsync=t.getDefaultWorkspaceUri=t.ensureDir=t.writeAsync=t.readAsync=void 0;const c=s(r(2)),l=r(6),u=a(r(162));t.readAsync=e=>i(void 0,void 0,void 0,(function*(){const t=yield c.workspace.fs.readFile(c.Uri.file(e));return new l.TextDecoder("utf-8").decode(t)})),t.writeAsync=(e,t)=>i(void 0,void 0,void 0,(function*(){const r=(new l.TextEncoder).encode(t);return yield c.workspace.fs.writeFile(c.Uri.file(e),r)})),t.ensureDir=e=>i(void 0,void 0,void 0,(function*(){yield c.workspace.fs.createDirectory(e)})),t.getDefaultWorkspaceUri=()=>{let e=void 0;const t=(c.workspace.workspaceFolders||[]).find(e=>e);return t&&(e=t.uri),e},t.getSizeAsync=e=>new Promise(t=>{u.default(e.fsPath,(e,r)=>{t(r)})})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=new class{initialize(e){this._context=e}get context(){return this._context}}},function(e,t){e.exports=require("events")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnsupportedProtocolError=t.ReadError=t.TimeoutError=t.UploadError=t.CacheError=t.HTTPError=t.MaxRedirectsError=t.RequestError=t.setNonEnumerableProperties=t.knownHookEvents=t.withoutBody=t.kIsNormalizedAlready=void 0;const n=r(6),o=r(10),s=r(3),i=r(16),a=r(43),c=r(43),l=r(73),u=r(203),d=r(205),h=r(207),p=r(221),f=r(224),m=r(45),g=r(12),y=r(231),v=r(81),b=r(82),w=r(232),S=r(234),E=r(235),_=r(236),P=r(83),x=r(237),k=r(238),C=Symbol("request"),T=Symbol("response"),A=Symbol("responseSize"),O=Symbol("downloadedSize"),R=Symbol("bodySize"),D=Symbol("uploadedSize"),L=Symbol("serverResponsesPiped"),F=Symbol("unproxyEvents"),j=Symbol("isFromCache"),I=Symbol("cancelTimeouts"),M=Symbol("startedReading"),N=Symbol("stopReading"),$=Symbol("triggerRead"),H=Symbol("body"),U=Symbol("jobs"),B=Symbol("originalResponse");t.kIsNormalizedAlready=Symbol("isNormalizedAlready");const z=g.default.string(process.versions.brotli);t.withoutBody=new Set(["GET","HEAD"]),t.knownHookEvents=["init","beforeRequest","beforeRedirect","beforeError"];const q=new _.default,V=new Set([300,301,302,303,304,307,308]),Q=["context","body","json","form"];t.setNonEnumerableProperties=(e,t)=>{const r={};for(const t of e)if(t)for(const e of Q)e in t&&(r[e]={writable:!0,configurable:!0,enumerable:!1,value:t[e]});Object.defineProperties(t,r)};class W extends Error{constructor(e,t,r){var n;if(super(e),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=t.code,r instanceof re?(Object.defineProperty(this,"request",{enumerable:!1,value:r}),Object.defineProperty(this,"response",{enumerable:!1,value:r[T]}),Object.defineProperty(this,"options",{enumerable:!1,value:r.options})):Object.defineProperty(this,"options",{enumerable:!1,value:r}),this.timings=null===(n=this.request)||void 0===n?void 0:n.timings,!g.default.undefined(t.stack)){const e=this.stack.indexOf(this.message)+this.message.length,r=this.stack.slice(e).split("\n").reverse(),n=t.stack.slice(t.stack.indexOf(t.message)+t.message.length).split("\n").reverse();for(;0!==n.length&&n[0]===r[0];)r.shift();this.stack=`${this.stack.slice(0,e)}${r.reverse().join("\n")}${n.reverse().join("\n")}`}}}t.RequestError=W;class G extends W{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError"}}t.MaxRedirectsError=G;class J extends W{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError"}}t.HTTPError=J;class K extends W{constructor(e,t){super(e.message,e,t),this.name="CacheError"}}t.CacheError=K;class X extends W{constructor(e,t){super(e.message,e,t),this.name="UploadError"}}t.UploadError=X;class Y extends W{constructor(e,t,r){super(e.message,e,r),this.name="TimeoutError",this.event=e.event,this.timings=t}}t.TimeoutError=Y;class Z extends W{constructor(e,t){super(e.message,e,t),this.name="ReadError"}}t.ReadError=Z;class ee extends W{constructor(e){super(`Unsupported protocol "${e.url.protocol}"`,{},e),this.name="UnsupportedProtocolError"}}t.UnsupportedProtocolError=ee;const te=["socket","connect","continue","information","upgrade","timeout"];class re extends o.Duplex{constructor(e,r={},n){super({highWaterMark:0}),this[O]=0,this[D]=0,this.requestInitialized=!1,this[L]=new Set,this.redirects=[],this[N]=!1,this[$]=!1,this[U]=[],this._progressCallbacks=[];const o=()=>this._unlockWrite(),i=()=>this._lockWrite();this.on("pipe",e=>{e.prependListener("data",o),e.on("data",i),e.prependListener("end",o),e.on("end",i)}),this.on("unpipe",e=>{e.off("data",o),e.off("data",i),e.off("end",o),e.off("end",i)}),this.on("pipe",e=>{e instanceof c.IncomingMessage&&(this.options.headers={...e.headers,...this.options.headers})});const{json:a,body:l,form:u}=r;(a||l||u)&&this._lockWrite(),(async r=>{var o;try{r.body instanceof s.ReadStream&&await(async e=>new Promise((t,r)=>{const n=e=>{r(e)};e.pending||t(),e.once("error",n),e.once("ready",()=>{e.off("error",n),t()})}))(r.body),t.kIsNormalizedAlready in r?this.options=r:this.options=this.constructor.normalizeArguments(e,r,n);const{url:i}=this.options;if(!i)throw new TypeError("Missing `url` property");if(this.requestUrl=i.toString(),decodeURI(this.requestUrl),await this._finalizeBody(),await this._makeRequest(),this.destroyed)return void(null===(o=this[C])||void 0===o||o.destroy());for(const e of this[U])e();this.requestInitialized=!0}catch(e){if(e instanceof W)return void this._beforeError(e);this.destroyed||this.destroy(e)}})(r)}static normalizeArguments(e,r,o){var s,a,c,l;const u=r;if(g.default.object(e)&&!g.default.urlInstance(e))r={...o,...e,...r};else{if(e&&r&&void 0!==r.url)throw new TypeError("The `url` option is mutually exclusive with the `input` argument");r={...o,...r},void 0!==e&&(r.url=e),g.default.urlInstance(r.url)&&(r.url=new i.URL(r.url.toString()))}if(!1===r.cache&&(r.cache=void 0),!1===r.dnsCache&&(r.dnsCache=void 0),g.assert.any([g.default.string,g.default.undefined],r.method),g.assert.any([g.default.object,g.default.undefined],r.headers),g.assert.any([g.default.string,g.default.urlInstance,g.default.undefined],r.prefixUrl),g.assert.any([g.default.object,g.default.undefined],r.cookieJar),g.assert.any([g.default.object,g.default.string,g.default.undefined],r.searchParams),g.assert.any([g.default.object,g.default.string,g.default.undefined],r.cache),g.assert.any([g.default.object,g.default.number,g.default.undefined],r.timeout),g.assert.any([g.default.object,g.default.undefined],r.context),g.assert.any([g.default.object,g.default.undefined],r.hooks),g.assert.any([g.default.boolean,g.default.undefined],r.decompress),g.assert.any([g.default.boolean,g.default.undefined],r.ignoreInvalidCookies),g.assert.any([g.default.boolean,g.default.undefined],r.followRedirect),g.assert.any([g.default.number,g.default.undefined],r.maxRedirects),g.assert.any([g.default.boolean,g.default.undefined],r.throwHttpErrors),g.assert.any([g.default.boolean,g.default.undefined],r.http2),g.assert.any([g.default.boolean,g.default.undefined],r.allowGetBody),g.assert.any([g.default.string,g.default.undefined],r.localAddress),g.assert.any([x.isDnsLookupIpVersion,g.default.undefined],r.dnsLookupIpVersion),g.assert.any([g.default.object,g.default.undefined],r.https),g.assert.any([g.default.boolean,g.default.undefined],r.rejectUnauthorized),r.https&&(g.assert.any([g.default.boolean,g.default.undefined],r.https.rejectUnauthorized),g.assert.any([g.default.function_,g.default.undefined],r.https.checkServerIdentity),g.assert.any([g.default.string,g.default.object,g.default.array,g.default.undefined],r.https.certificateAuthority),g.assert.any([g.default.string,g.default.object,g.default.array,g.default.undefined],r.https.key),g.assert.any([g.default.string,g.default.object,g.default.array,g.default.undefined],r.https.certificate),g.assert.any([g.default.string,g.default.undefined],r.https.passphrase)),g.default.string(r.method)?r.method=r.method.toUpperCase():r.method="GET",r.headers===(null==o?void 0:o.headers)?r.headers={...r.headers}:r.headers=m({...null==o?void 0:o.headers,...r.headers}),"slashes"in r)throw new TypeError("The legacy `url.Url` has been deprecated. Use `URL` instead.");if("auth"in r)throw new TypeError("Parameter `auth` is deprecated. Use `username` / `password` instead.");if("searchParams"in r&&r.searchParams&&r.searchParams!==(null==o?void 0:o.searchParams)){let e;if(g.default.string(r.searchParams)||r.searchParams instanceof i.URLSearchParams)e=new i.URLSearchParams(r.searchParams);else{!function(e){for(const t in e){const r=e[t];if(!(g.default.string(r)||g.default.number(r)||g.default.boolean(r)||g.default.null_(r)||g.default.undefined(r)))throw new TypeError(`The \`searchParams\` value '${String(r)}' must be a string, number, boolean or null`)}}(r.searchParams),e=new i.URLSearchParams;for(const t in r.searchParams){const n=r.searchParams[t];null===n?e.append(t,""):void 0!==n&&e.append(t,n)}}null===(s=null==o?void 0:o.searchParams)||void 0===s||s.forEach((t,r)=>{e.has(r)||e.append(r,t)}),r.searchParams=e}if(r.username=null!==(a=r.username)&&void 0!==a?a:"",r.password=null!==(c=r.password)&&void 0!==c?c:"",r.prefixUrl?(r.prefixUrl=r.prefixUrl.toString(),""===r.prefixUrl||r.prefixUrl.endsWith("/")||(r.prefixUrl+="/")):r.prefixUrl="",g.default.string(r.url)){if(r.url.startsWith("/"))throw new Error("`input` must not start with a slash when using `prefixUrl`");r.url=E.default(r.prefixUrl+r.url,r)}else(g.default.undefined(r.url)&&""!==r.prefixUrl||r.protocol)&&(r.url=E.default(r.prefixUrl,r));if(r.url){let{prefixUrl:e}=r;Object.defineProperty(r,"prefixUrl",{set:t=>{const n=r.url;if(!n.href.startsWith(t))throw new Error(`Cannot change \`prefixUrl\` from ${e} to ${t}: ${n.href}`);r.url=new i.URL(t+n.href.slice(e.length)),e=t},get:()=>e});let{protocol:t}=r.url;if("unix:"===t&&(t="http:",r.url=new i.URL(`http://unix${r.url.pathname}${r.url.search}`)),r.searchParams&&(r.url.search=r.searchParams.toString()),"http:"!==t&&"https:"!==t)throw new ee(r);""===r.username?r.username=r.url.username:r.url.username=r.username,""===r.password?r.password=r.url.password:r.url.password=r.password}const{cookieJar:p}=r;if(p){let{setCookie:e,getCookieString:t}=p;g.assert.function_(e),g.assert.function_(t),4===e.length&&0===t.length&&(e=n.promisify(e.bind(r.cookieJar)),t=n.promisify(t.bind(r.cookieJar)),r.cookieJar={setCookie:e,getCookieString:t})}const{cache:f}=r;if(f&&(q.has(f)||q.set(f,new h((e,t)=>{const r=e[C](e,t);return g.default.promise(r)&&(r.once=(e,t)=>{if("error"===e)r.catch(t);else{if("abort"!==e)throw new Error("Unknown HTTP2 promise event: "+e);(async()=>{try{(await r).once("abort",t)}catch(e){}})()}return r}),r},f))),!0===r.dnsCache)r.dnsCache=new d.default;else if(!g.default.undefined(r.dnsCache)&&!r.dnsCache.lookup)throw new TypeError("Parameter `dnsCache` must be a CacheableLookup instance or a boolean, got "+g.default(r.dnsCache));g.default.number(r.timeout)?r.timeout={request:r.timeout}:o&&r.timeout!==o.timeout?r.timeout={...o.timeout,...r.timeout}:r.timeout={...r.timeout},r.context||(r.context={});const y=r.hooks===(null==o?void 0:o.hooks);r.hooks={...r.hooks};for(const e of t.knownHookEvents)if(e in r.hooks){if(!g.default.array(r.hooks[e]))throw new TypeError(`Parameter \`${e}\` must be an Array, got ${g.default(r.hooks[e])}`);r.hooks[e]=[...r.hooks[e]]}else r.hooks[e]=[];if(o&&!y)for(const e of t.knownHookEvents){0!==o.hooks[e].length&&(r.hooks[e]=[...o.hooks[e],...r.hooks[e]])}if("family"in r&&k.default('"options.family" was never documented, please use "options.dnsLookupIpVersion"'),(null==o?void 0:o.https)&&(r.https={...o.https,...r.https}),"rejectUnauthorized"in r&&k.default('"options.rejectUnauthorized" is now deprecated, please use "options.https.rejectUnauthorized"'),"checkServerIdentity"in r&&k.default('"options.checkServerIdentity" was never documented, please use "options.https.checkServerIdentity"'),"ca"in r&&k.default('"options.ca" was never documented, please use "options.https.certificateAuthority"'),"key"in r&&k.default('"options.key" was never documented, please use "options.https.key"'),"cert"in r&&k.default('"options.cert" was never documented, please use "options.https.certificate"'),"passphrase"in r&&k.default('"options.passphrase" was never documented, please use "options.https.passphrase"'),"followRedirects"in r)throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.");if(r.agent)for(const e in r.agent)if("http"!==e&&"https"!==e&&"http2"!==e)throw new TypeError(`Expected the \`options.agent\` properties to be \`http\`, \`https\` or \`http2\`, got \`${e}\``);return r.maxRedirects=null!==(l=r.maxRedirects)&&void 0!==l?l:0,t.setNonEnumerableProperties([o,u],r),r}_lockWrite(){const e=()=>{throw new TypeError("The payload has been already provided")};this.write=e,this.end=e}_unlockWrite(){this.write=super.write,this.end=super.end}async _finalizeBody(){const{options:e}=this,{headers:r}=e,n=!g.default.undefined(e.form),s=!g.default.undefined(e.json),a=!g.default.undefined(e.body),c=n||s||a,l=t.withoutBody.has(e.method)&&!("GET"===e.method&&e.allowGetBody);if(this._cannotHaveBody=l,c){if(l)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);if([a,n,s].filter(e=>e).length>1)throw new TypeError("The `body`, `json` and `form` options are mutually exclusive");if(a&&!(e.body instanceof o.Readable)&&!g.default.string(e.body)&&!g.default.buffer(e.body)&&!v.default(e.body))throw new TypeError("The `body` option must be a stream.Readable, string or Buffer");if(n&&!g.default.object(e.form))throw new TypeError("The `form` option must be an Object");{const t=!g.default.string(r["content-type"]);a?(v.default(e.body)&&t&&(r["content-type"]="multipart/form-data; boundary="+e.body.getBoundary()),this[H]=e.body):n?(t&&(r["content-type"]="application/x-www-form-urlencoded"),this[H]=new i.URLSearchParams(e.form).toString()):(t&&(r["content-type"]="application/json"),this[H]=e.stringifyJson(e.json));const o=await y.default(this[H],e.headers);g.default.undefined(r["content-length"])&&g.default.undefined(r["transfer-encoding"])&&(l||g.default.undefined(o)||(r["content-length"]=String(o)))}}else l?this._lockWrite():this._unlockWrite();this[R]=Number(r["content-length"])||void 0}async _onResponseBase(e){const{options:t}=this,{url:r}=t;this[B]=e,t.decompress&&(e=p(e));const n=e.statusCode,o=e;o.statusMessage=o.statusMessage?o.statusMessage:a.STATUS_CODES[n],o.url=t.url.toString(),o.requestUrl=this.requestUrl,o.redirectUrls=this.redirects,o.request=this,o.isFromCache=e.fromCache||!1,o.ip=this.ip,this[j]=o.isFromCache,this[A]=Number(e.headers["content-length"])||void 0,this[T]=e,e.once("end",()=>{this[A]=this[O],this.emit("downloadProgress",this.downloadProgress)}),e.once("error",t=>{e.destroy(),this._beforeError(new Z(t,this))}),e.once("aborted",()=>{this._beforeError(new Z({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);const s=e.headers["set-cookie"];if(g.default.object(t.cookieJar)&&s){let e=s.map(async e=>t.cookieJar.setCookie(e,r.toString()));t.ignoreInvalidCookies&&(e=e.map(async e=>e.catch(()=>{})));try{await Promise.all(e)}catch(e){return void this._beforeError(e)}}if(t.followRedirect&&e.headers.location&&V.has(n)){e.resume(),this[C]&&(this[I](),delete this[C],this[F]());if(!(303===n&&"GET"!==t.method&&"HEAD"!==t.method)&&t.methodRewriting||(t.method="GET","body"in t&&delete t.body,"json"in t&&delete t.json,"form"in t&&delete t.form),this.redirects.length>=t.maxRedirects)return void this._beforeError(new G(this));try{const n=Buffer.from(e.headers.location,"binary").toString(),s=new i.URL(n,r),a=s.toString();decodeURI(a),s.hostname!==r.hostname&&("host"in t.headers&&delete t.headers.host,"cookie"in t.headers&&delete t.headers.cookie,"authorization"in t.headers&&delete t.headers.authorization,(t.username||t.password)&&(delete t.username,delete t.password)),this.redirects.push(a),t.url=s;for(const e of t.hooks.beforeRedirect)await e(t,o);this.emit("redirect",o,t),await this._makeRequest()}catch(e){return void this._beforeError(e)}return}const c=t.followRedirect?299:399,l=n>=200&&n<=c||304===n;if(!t.throwHttpErrors||l||(this._beforeError(new J(o)),!this[N])){e.on("readable",()=>{this[$]&&this._read()}),this.on("resume",()=>{e.resume()}),this.on("pause",()=>{e.pause()}),e.once("end",()=>{this.push(null)}),this.emit("response",e);for(const r of this[L])if(!r.headersSent){for(const n in e.headers){const o=!t.decompress||"content-encoding"!==n,s=e.headers[n];o&&r.setHeader(n,s)}r.statusCode=n}}}async _onResponse(e){try{await this._onResponseBase(e)}catch(e){this._beforeError(e)}}_onRequest(e){const{options:t}=this,{timeout:r,url:n}=t;u.default(e),this[I]=w.default(e,r,n);const o=t.cache?"cacheableResponse":"response";e.once(o,e=>{this._onResponse(e)}),e.once("error",t=>{var r;e.destroy(),null===(r=e.res)||void 0===r||r.removeAllListeners("end"),t=t instanceof w.TimeoutError?new Y(t,this.timings,this):new W(t.message,t,this),this._beforeError(t)}),this[F]=b.default(e,this,te),this[C]=e,this.emit("uploadProgress",this.uploadProgress);const s=this[H],i=0===this.redirects.length?this:e;g.default.nodeStream(s)?(s.pipe(i),s.once("error",e=>{this._beforeError(new X(e,this))}),s.once("end",()=>{delete t.body})):(this._unlockWrite(),g.default.undefined(s)?(this._cannotHaveBody||this._noPipe)&&(i.end(),this._lockWrite()):(this._writeRequest(s,void 0,()=>{}),i.end(),this._lockWrite())),this.emit("request",e)}async _createCacheableRequest(e,t){return new Promise((r,n)=>{let o;Object.assign(t,S.default(e)),delete t.url;const s=q.get(t.cache)(t,async e=>{e._readableState.autoDestroy=!1,o&&(await o).emit("cacheableResponse",e),r(e)});t.url=e,s.once("error",n),s.once("request",async e=>{o=e,r(o)})})}async _makeRequest(){var e;const{options:t}=this,{headers:r}=t;for(const e in r)if(g.default.undefined(r[e]))delete r[e];else if(g.default.null_(r[e]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${e}\` header`);if(t.decompress&&g.default.undefined(r["accept-encoding"])&&(r["accept-encoding"]=z?"gzip, deflate, br":"gzip, deflate"),t.cookieJar){const e=await t.cookieJar.getCookieString(t.url.toString());g.default.nonEmptyString(e)&&(t.headers.cookie=e)}for(const e of t.hooks.beforeRequest){const r=await e(t);if(!g.default.undefined(r)){t.request=()=>r;break}}const{agent:n,request:o,timeout:s,url:i}=t;if(t.dnsCache&&!("lookup"in t)&&(t.lookup=t.dnsCache.lookup),"unix"===i.hostname){const e=/(?<socketPath>.+?):(?<path>.+)/.exec(`${i.pathname}${i.search}`);if(null==e?void 0:e.groups){const{socketPath:r,path:n}=e.groups;Object.assign(t,{socketPath:r,path:n,host:""})}}const c="https:"===i.protocol;let u;u=t.http2?f.auto:c?l.request:a.request;const d=null!==(e=t.request)&&void 0!==e?e:u,p=t.cache?this._createCacheableRequest:d;n&&!t.http2&&(t.agent=n[c?"https":"http"]),t[C]=d,delete t.request,delete t.timeout;const m=t;if(void 0!==t.dnsLookupIpVersion)try{m.family=x.dnsLookupIpVersionToFamily(t.dnsLookupIpVersion)}catch(e){throw new Error("Invalid `dnsLookupIpVersion` option value")}t.https&&("rejectUnauthorized"in t.https&&(m.rejectUnauthorized=t.https.rejectUnauthorized),t.https.checkServerIdentity&&(m.checkServerIdentity=t.https.checkServerIdentity),t.https.certificateAuthority&&(m.ca=t.https.certificateAuthority),t.https.certificate&&(m.cert=t.https.certificate),t.https.key&&(m.key=t.https.key),t.https.passphrase&&(m.passphrase=t.https.passphrase));try{let e=await p(i,m);g.default.undefined(e)&&(e=u(i,m)),t.request=o,t.timeout=s,t.agent=n,y=e,g.default.object(y)&&!("statusCode"in y)?this._onRequest(e):this.writable?(this.once("finish",()=>{this._onResponse(e)}),this._unlockWrite(),this.end(),this._lockWrite()):this._onResponse(e)}catch(e){if(e instanceof h.CacheError)throw new K(e,this);throw new W(e.message,e,this)}var y}_beforeError(e){this.destroyed||(this[N]=!0,e instanceof W||(e=new W(e.message,e,this)),(async()=>{try{const{response:t}=e;t&&(t.setEncoding(this._readableState.encoding),t.rawBody=await P.default(t),t.body=t.rawBody.toString())}catch(e){}try{for(const t of this.options.hooks.beforeError)e=await t(e)}catch(t){e=new W(t.message,t,this)}this.destroy(e)})())}_read(){this[$]=!0;const e=this[T];if(e&&!this[N]){let t;for(e.readableLength&&(this[$]=!1);null!==(t=e.read());){this[O]+=t.length,this[M]=!0;const e=this.downloadProgress;e.percent<1&&this.emit("downloadProgress",e),this.push(t)}}}_write(e,t,r){const n=()=>{this._writeRequest(e,t,r)};this.requestInitialized?n():this[U].push(n)}_writeRequest(e,t,r){this._progressCallbacks.push(()=>{this[D]+=Buffer.byteLength(e,t);const r=this.uploadProgress;r.percent<1&&this.emit("uploadProgress",r)}),this[C].write(e,t,e=>{e||0===this._progressCallbacks.length||this._progressCallbacks.shift()(),r(e)})}_final(e){const t=()=>{for(;0!==this._progressCallbacks.length;)this._progressCallbacks.shift()();C in this?this[C].destroyed?e():this[C].end(t=>{t||(this[R]=this[D],this.emit("uploadProgress",this.uploadProgress),this[C].emit("upload-complete")),e(t)}):e()};this.requestInitialized?t():this[U].push(t)}_destroy(e,t){var r;this[N]=!0,C in this&&(this[I](),(null===(r=this[T])||void 0===r?void 0:r.complete)||this[C].destroy()),null===e||g.default.undefined(e)||e instanceof W||(e=new W(e.message,e,this)),t(e)}get ip(){var e;return null===(e=this[C])||void 0===e?void 0:e.socket.remoteAddress}get aborted(){var e,t,r;return(null!==(t=null===(e=this[C])||void 0===e?void 0:e.destroyed)&&void 0!==t?t:this.destroyed)&&!(null===(r=this[B])||void 0===r?void 0:r.complete)}get socket(){var e;return null===(e=this[C])||void 0===e?void 0:e.socket}get downloadProgress(){let e;return e=this[A]?this[O]/this[A]:this[A]===this[O]?1:0,{percent:e,transferred:this[O],total:this[A]}}get uploadProgress(){let e;return e=this[R]?this[D]/this[R]:this[R]===this[D]?1:0,{percent:e,transferred:this[D],total:this[R]}}get timings(){var e;return null===(e=this[C])||void 0===e?void 0:e.timings}get isFromCache(){return this[j]}get _response(){return this[T]}pipe(e,t){if(this[M])throw new Error("Failed to pipe. The response has been emitted already.");return e instanceof c.ServerResponse&&this[L].add(e),super.pipe(e,t)}unpipe(e){return e instanceof c.ServerResponse&&this[L].delete(e),super.unpipe(e),this}}t.default=re},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isStringValid=t.getString=void 0;const i=s(r(99));t.getString=function(e,r=null){if(e in i){let n=i[e];return r&&Object.keys(r).forEach(e=>{n=n.replace(`{{${e}}}`,t.isStringValid(r[e])?String(r[e]):"-")}),n}return console.warn(`%c **** >>>  Missing string key: ${e} << ****`,"color: red; font-weight: bolder;"),` **** >> ${e} << ****`},t.isStringValid=e=>!(null==e)},function(e,t){e.exports=require("os")},function(e,t,r){"use strict";const n=r(33);e.exports=(e,t={})=>{let r=(e,o={})=>{let s=t.escapeInvalid&&n.isInvalidBrace(o),i=!0===e.invalid&&!0===t.escapeInvalid,a="";if(e.value)return(s||i)&&n.isOpenOrClose(e)?"\\"+e.value:e.value;if(e.value)return e.value;if(e.nodes)for(let t of e.nodes)a+=r(t);return a};return r(e)}},function(e,t,r){"use strict";t.isInteger=e=>"number"==typeof e?Number.isInteger(e):"string"==typeof e&&""!==e.trim()&&Number.isInteger(Number(e)),t.find=(e,t)=>e.nodes.find(e=>e.type===t),t.exceedsLimit=(e,r,n=1,o)=>!1!==o&&(!(!t.isInteger(e)||!t.isInteger(r))&&(Number(r)-Number(e))/Number(n)>=o),t.escapeNode=(e,t=0,r)=>{let n=e.nodes[t];n&&(r&&n.type===r||"open"===n.type||"close"===n.type)&&!0!==n.escaped&&(n.value="\\"+n.value,n.escaped=!0)},t.encloseBrace=e=>"brace"===e.type&&(e.commas>>0+e.ranges>>0==0&&(e.invalid=!0,!0)),t.isInvalidBrace=e=>"brace"===e.type&&(!(!0!==e.invalid&&!e.dollar)||(e.commas>>0+e.ranges>>0==0||!0!==e.open||!0!==e.close)&&(e.invalid=!0,!0)),t.isOpenOrClose=e=>"open"===e.type||"close"===e.type||(!0===e.open||!0===e.close),t.reduce=e=>e.reduce((e,t)=>("text"===t.type&&e.push(t.value),"range"===t.type&&(t.type="text"),e),[]),t.flatten=(...e)=>{const t=[],r=e=>{for(let n=0;n<e.length;n++){let o=e[n];Array.isArray(o)?r(o,t):void 0!==o&&t.push(o)}return t};return r(e),t}},function(e,t){e.exports={stringify:function(e,t={}){const r=t.EOL||"\n";return JSON.stringify(e,t?t.replacer:null,t.spaces).replace(/\n/g,r)+r},stripBom:function(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}}},function(e,t,r){"use strict";const n=r(5).fromCallback,o=r(4),s=r(0),i=r(7),a=r(11).pathExists;e.exports={outputFile:n((function(e,t,r,n){"function"==typeof r&&(n=r,r="utf8");const c=s.dirname(e);a(c,(s,a)=>s?n(s):a?o.writeFile(e,t,r,n):void i.mkdirs(c,s=>{if(s)return n(s);o.writeFile(e,t,r,n)}))})),outputFileSync:function(e,...t){const r=s.dirname(e);if(o.existsSync(r))return o.writeFileSync(e,...t);i.mkdirsSync(r),o.writeFileSync(e,...t)}}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_FILTERS=void 0;const c=r(1),l=s(r(0)),u=r(15),d=s(r(2)),h=r(1),p=r(26),f=a(r(27)),m=r(165),g=r(22),y=r(40);t.DEFAULT_FILTERS=["json"];t.default=new class{loadPackageFrom(e){return i(this,void 0,void 0,(function*(){try{const t=this.getUriFrom(e,c.MAIN_FILE_NAME),[r,n]=yield this.loadFile(t),o=m.validateDSP(n);o.isValid||this.showValidationWarning(o,t);let s=c.DSPJsonToFile(r);const i=r.import;for(let t of i){const r=this.getUriFrom(e,t.src);try{const[e,t]=yield this.loadFile(r),n=m.validateEntitys(t);n.isValid||this.showValidationWarning(n,r);const o=e.entities,i=e.categories||[];s.categories=[...s.categories,...i];for(let e of o)switch(void 0===e.name&&(e.name=e.id),e.class){case c.EntityClass.Token:case c.EntityClass.Collection:switch(e.type){case c.EntityType.Color:e.filter=c.TokenFilterType.Color,s.colors.push(e);break;case c.EntityType.Size:e.filter=c.TokenFilterType.Size,s.sizes.push(e);break;case c.EntityType.Font:null==e.related_entity_ids&&(e.related_entity_ids=[]),s.fonts.push(e);break;case c.EntityType.Custom:e.filter=c.TokenFilterType.Custom,s.custom.push(e);break;case c.EntityType.Alias:e.filter=c.TokenFilterType.Alias,s.aliases.push(e)}break;case c.EntityClass.Component:s.components.push(e);break;case c.EntityClass.Document:s.docs.push(e)}}catch(e){h.Logger.log("Error loading import file: "+r),console.error(e);continue}}h.refreshReferences(s);let a=[];const p=d.Uri.file(l.default.join(e.path,u.GENERATED_FOLDER_NAME)).fsPath,f=d.Uri.file(l.default.join(e.path,u.DIST_FOLDER)).fsPath,y=g.existsSync(p)?p:f;try{(yield d.workspace.fs.readDirectory(d.Uri.file(y))).map(e=>{const t=e[0];if(e[1]===d.FileType.Directory&&t!==u.PROPERTIES_FOLDER&&"node_modules"!==t){const e=l.default.join(y,t);a.push(e)}})}catch(e){console.log("DSPFileService loadPackageFrom() error"),console.log(e)}return[e,s,a]}catch(t){return console.error(t),void console.log("loadPackageFrom() - Error loading packagePath: "+e.path)}}))}showValidationWarning(e,t){console.log("File is not valid: "+t.fsPath),console.log(e.errors)}loadPackage(){return i(this,void 0,void 0,(function*(){const e=yield d.window.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,defaultUri:p.getDefaultWorkspaceUri(),openLabel:"Load Package",title:"Load Package Location"});if(null==e?void 0:e.length){const t=e[0];return yield this.loadPackageFrom(t)}}))}savePackage(e,t){return i(this,void 0,void 0,(function*(){const r=this.getUriFrom(t,c.DATA_FOLDER_NAME);yield p.ensureDir(r),yield p.ensureDir(this.getUriFrom(t,y.ASSET_FOLDER_NAME)),this.saveFile(c.DSPFileToJson(e),this.getUriFrom(t,c.MAIN_FILE_NAME)),yield Promise.all([this.saveFile(c.DSPTokensToJSON(e),this.getDSPDataUri(t,c.TOKENS_FILE_NAME),c.BaseEntityJSONReplacer),this.saveFile(c.DSPFontsToJSON(e),this.getDSPDataUri(t,c.FONTS_FILE_NAME),c.BaseEntityJSONReplacer),this.saveFile(c.DSPComponentsToJson(e),this.getDSPDataUri(t,c.COMPONENTS_FILE_NAME),c.BaseEntityJSONReplacer),this.saveFile(c.DSPDocsToJson(e),this.getDSPDataUri(t,c.DOCS_FILE_NAME),c.BaseEntityJSONReplacer)]).catch(e=>{h.Logger.log(e),d.window.showErrorMessage(c.getString("Error.DSP.FileSave"),c.getString("Button.Confirm"))})}))}savePackageAs(e){return i(this,void 0,void 0,(function*(){const t=yield d.window.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,defaultUri:p.getDefaultWorkspaceUri(),openLabel:c.getString("DSP.OpenPackageLabel"),title:c.getString("DSP.OpenPackageTitle")});if(null==t?void 0:t.length){const r=t[0],n=e.settings.name;let o=this.getUriFrom(r,n);return yield p.ensureDir(o),console.log("Save Package to: "+o.path),this.savePackage(e,o),o}}))}saveSDInput(e,t){var r;return i(this,void 0,void 0,(function*(){const n=u.GenerateStyleDictionaryJson(e),o=JSON.stringify((null==n?void 0:n.colors)||"",null,2),s=JSON.stringify((null==n?void 0:n.custom)||"",null,2),i=JSON.stringify((null==n?void 0:n.sizes)||"",null,2),a=JSON.stringify((null==n?void 0:n.fonts)||"",null,2),l=this.getUriFrom(t,u.GENERATED_FOLDER_NAME);yield p.ensureDir(l);const m=this.getUriFrom(l,u.PROPERTIES_FOLDER);yield p.ensureDir(m);const g=this.getUriFrom(m,u.SD_COLORS_NAME),y=this.getUriFrom(m,u.SD_FONTS_NAME),v=this.getUriFrom(m,u.SD_CUSTOM_NAME),b=this.getUriFrom(m,u.SD_SIZE_NAME),w=this.getUriFrom(l,u.SD_CONFIG_NAME),S=yield u.generateSDConfigJS(e,(null===(r=f.default.context)||void 0===r?void 0:r.extensionPath)||"");yield Promise.all([p.writeAsync(g.path,o),p.writeAsync(y.path,a),p.writeAsync(v.path,s),p.writeAsync(b.path,i),p.writeAsync(w.path,S)]).catch(e=>{d.window.showErrorMessage(c.getString("Error.DSP.FileSave"),c.getString("Button.Confirm")),h.Logger.log(e)})}))}saveFile(e,t,r,n){return i(this,void 0,void 0,(function*(){h.Logger.log("Saving as "+t);const n=JSON.stringify(e,r,2);yield p.writeAsync(t.path,n)}))}loadFile(e){return i(this,void 0,void 0,(function*(){const t=e.path,r=yield p.readAsync(t);let n,o;try{o=JSON.parse(r),n=JSON.parse(r,c.JsonDateReviver)}catch(t){throw h.Logger.log("Failed reading: "+e.fsPath),h.Logger.log(t),t}return[n,o]}))}getDSPDataUri(e,t){return this.getUriFrom(e,c.DATA_FOLDER_NAME,t)}getUriFrom(e,...t){return d.Uri.file(l.default.join(e.path,...t))}}},function(e,t,r){"use strict";var n=r(168),o=r(38),s=r(13),i=r(63),a=r(170);function c(e,t,r){var n=this._refs[r];if("string"==typeof n){if(!this._refs[n])return c.call(this,e,t,n);n=this._refs[n]}if((n=n||this._schemas[r])instanceof i)return f(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var o,s,a,u=l.call(this,t,r);return u&&(o=u.schema,t=u.root,a=u.baseId),o instanceof i?s=o.validate||e.call(this,o.schema,t,void 0,a):void 0!==o&&(s=f(o,this._opts.inlineRefs)?o:e.call(this,o,t,void 0,a)),s}function l(e,t){var r=n.parse(t),o=g(r),s=m(this._getId(e.schema));if(0===Object.keys(e.schema).length||o!==s){var a=v(o),c=this._refs[a];if("string"==typeof c)return u.call(this,e,c,r);if(c instanceof i)c.validate||this._compile(c),e=c;else{if(!((c=this._schemas[a])instanceof i))return;if(c.validate||this._compile(c),a==v(t))return{schema:c,root:e,baseId:s};e=c}if(!e.schema)return;s=m(this._getId(e.schema))}return h.call(this,r,s,e.schema,e)}function u(e,t,r){var n=l.call(this,e,t);if(n){var o=n.schema,s=n.baseId;e=n.root;var i=this._getId(o);return i&&(s=b(s,i)),h.call(this,r,s,o,e)}}e.exports=c,c.normalizeId=v,c.fullPath=m,c.url=b,c.ids=function(e){var t=v(this._getId(e)),r={"":t},i={"":m(t,!1)},c={},l=this;return a(e,{allKeys:!0},(function(e,t,a,u,d,h,p){if(""!==t){var f=l._getId(e),m=r[u],g=i[u]+"/"+d;if(void 0!==p&&(g+="/"+("number"==typeof p?p:s.escapeFragment(p))),"string"==typeof f){f=m=v(m?n.resolve(m,f):f);var y=l._refs[f];if("string"==typeof y&&(y=l._refs[y]),y&&y.schema){if(!o(e,y.schema))throw new Error('id "'+f+'" resolves to more than one schema')}else if(f!=v(g))if("#"==f[0]){if(c[f]&&!o(e,c[f]))throw new Error('id "'+f+'" resolves to more than one schema');c[f]=e}else l._refs[f]=g}r[t]=m,i[t]=g}})),c},c.inlineRef=f,c.schema=l;var d=s.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function h(e,t,r,n){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var o=e.fragment.split("/"),i=1;i<o.length;i++){var a=o[i];if(a){if(void 0===(r=r[a=s.unescapeFragment(a)]))break;var c;if(!d[a]&&((c=this._getId(r))&&(t=b(t,c)),r.$ref)){var u=b(t,r.$ref),h=l.call(this,n,u);h&&(r=h.schema,n=h.root,t=h.baseId)}}}return void 0!==r&&r!==n.schema?{schema:r,root:n,baseId:t}:void 0}}var p=s.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function f(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if("object"==typeof(r=t[n])&&!e(r))return!1}else for(var o in t){if("$ref"==o)return!1;if("object"==typeof(r=t[o])&&!e(r))return!1}return!0}(e):t?function e(t){var r,n=0;if(Array.isArray(t)){for(var o=0;o<t.length;o++)if("object"==typeof(r=t[o])&&(n+=e(r)),n==1/0)return 1/0}else for(var s in t){if("$ref"==s)return 1/0;if(p[s])n++;else if("object"==typeof(r=t[s])&&(n+=e(r)+1),n==1/0)return 1/0}return n}(e)<=t:void 0)}function m(e,t){return!1!==t&&(e=v(e)),g(n.parse(e))}function g(e){return n.serialize(e).split("#")[0]+"#"}var y=/#\/?$/;function v(e){return e?e.replace(y,""):""}function b(e,t){return t=v(t),n.resolve(e,t)}},function(e,t,r){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,o,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(o=n;0!=o--;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=n;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,s[o]))return!1;for(o=n;0!=o--;){var i=s[o];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r}},function(e,t,r){"use strict";var n=r(37);function o(e,t,r){this.message=r||o.message(e,t),this.missingRef=n.url(e,t),this.missingSchema=n.normalizeId(n.fullPath(this.missingRef))}function s(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:s((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:s(o)},o.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.downloadRenditions=t.imageToBase64=t.loadRenditionImage=t.savePreviewToAssets=t.ASSET_FOLDER_NAME=void 0;const c=s(r(2)),l=a(r(27)),u=r(1),d=a(r(41)),h=r(2),p=a(r(9)),f=a(r(8)),m=r(15),g=s(r(22)),y=r(3);t.ASSET_FOLDER_NAME="assets",t.savePreviewToAssets=e=>{var r;const n=u.parseBase64Data(e.imageData),o=null===(r=p.default.currentFolder)||void 0===r?void 0:r.path;if(n.mime&&n.base64&&o){const r=Buffer.from(n.base64,"base64"),s=`${e.id}.${b(n.mime)}`,i=m.pathJoin(o,t.ASSET_FOLDER_NAME);g.ensureDir(i);const a=m.pathJoin(i,s);y.writeFile(a,r,e=>{u.Logger.log(e)})}},t.loadRenditionImage=e=>{var r;const n=null===(r=p.default.currentFolder)||void 0===r?void 0:r.path,o=[...e.localRenditions,e.id,e[u.adobeCClibID]];return new Promise(r=>{let s="",i="";if(n)e:for(let r=0;r<u.supportedComponentPreviewTypes.length;r++){let a,c=u.supportedComponentPreviewTypes[r];for(let r=0;r<o.length;r++){if(o[r]==e.id||o[r]==e[u.adobeCClibID])a=m.pathJoin(n,t.ASSET_FOLDER_NAME,`${o[r]}.${c}`);else{const e=o[r].substr(o[r].lastIndexOf(".")+1);u.supportedComponentPreviewTypes.toString().split(",").includes(e)&&(c=e),a=m.pathJoin(n,t.ASSET_FOLDER_NAME,o[r])}if(s=t.imageToBase64(a,c),i=a,s)break e;i=""}}r({base64:s,path:i})})},t.imageToBase64=(e,t)=>{let r="";try{const n=g.default.readFileSync(e);n&&(r=`data:${v(t)};base64,${n.toString("base64")}`)}catch(e){}return r};const v=e=>{switch(e){case"svg":return"image/svg+xml";case"png":return"image/png";default:return null}},b=e=>{switch(e){case"image/svg+xml":return"svg";case"image/png":return"png";default:return null}};t.downloadRenditions=({renditions:e,auth:r})=>{var n;const o=null===(n=p.default.currentFolder)||void 0===n?void 0:n.path;o&&c.window.withProgress({location:h.ProgressLocation.Notification,title:u.getString("Onboarding.CCL.Importing.RenditionsLabel"),cancellable:!1},(n,s)=>new Promise((s,a)=>{const l=e.length;let d=0;const h=100/l,p=()=>i(void 0,void 0,void 0,(function*(){const i=e.pop();if(i){const e=m.pathJoin(o,t.ASSET_FOLDER_NAME,i.id+".svg"),{success:s}=yield w(e,i);d++,n.report({message:u.getString("Onboarding.CCL.Importing.RenditionsCount",{count:d,total:l}),increment:h}),s?p():S(i.url,e,r).then(()=>{p()})}else c.window.showInformationMessage(u.getString("Onboarding.CCL.Importing.RenditionsComplete")),s(null)}));p()}))};const w=(e,t)=>i(void 0,void 0,void 0,(function*(){return new Promise(r=>{g.default.pathExists(e,(n,o)=>{o?g.default.readFile(e,"utf8",(e,n)=>{if(e)r({success:!1});else{const e=f.default.createHash("sha256").update(n).digest("hex")===t.hash;r({success:e,file:e?n:""})}}):r({success:!1})})})})),S=(e,t,r)=>i(void 0,void 0,void 0,(function*(){if(l.default.context){const n=yield d.default.get(e,{headers:{"x-api-key":"adobe_xd_vscode_extension",Authorization:"Bearer "+r.accessToken}});yield g.default.outputFile(t,n.body).catch(e=>{console.log(e)})}}))},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});const s=r(16),i=r(71),a={options:{method:"GET",retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:e})=>e},timeout:{},headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},hooks:{init:[],beforeRequest:[],beforeRedirect:[],beforeRetry:[],beforeError:[],afterResponse:[]},cache:void 0,dnsCache:void 0,decompress:!0,throwHttpErrors:!0,followRedirect:!0,isStream:!1,responseType:"text",resolveBodyOnly:!1,maxRedirects:10,prefixUrl:"",methodRewriting:!0,ignoreInvalidCookies:!1,context:{},http2:!1,allowGetBody:!1,https:void 0,pagination:{transform:e=>"json"===e.request.options.responseType?e.body:JSON.parse(e.body),paginate:e=>{if(!Reflect.has(e.headers,"link"))return!1;const t=e.headers.link.split(",");let r;for(const e of t){const t=e.split(";");if(t[1].includes("next")){r=t[0].trimStart().trim(),r=r.slice(1,-1);break}}if(r){return{url:new s.URL(r)}}return!1},filter:()=>!0,shouldContinue:()=>!0,countLimit:1/0,backoff:0,requestLimit:1e4,stackAllItems:!0},parseJson:e=>JSON.parse(e),stringifyJson:e=>JSON.stringify(e)},handlers:[i.defaultHandler],mutableDefaults:!1},c=i.default(a);t.default=c,e.exports=c,e.exports.default=c,e.exports.__esModule=!0,o(r(71),t),o(r(72),t)},function(e,t,r){"use strict";class n extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}}class o{static fn(e){return(...t)=>new o((r,n,o)=>{t.push(o),e(...t).then(r,n)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((t,r)=>{this._reject=r;const n=e=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(e)};return Object.defineProperties(n,{shouldReject:{get:()=>this._rejectOnCancel,set:e=>{this._rejectOnCancel=e}}}),e(e=>{this._isPending=!1,t(e)},e=>{this._isPending=!1,r(e)},n)})}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(this._isPending&&!this._isCanceled){if(this._cancelHandlers.length>0)try{for(const e of this._cancelHandlers)e()}catch(e){this._reject(e)}this._isCanceled=!0,this._rejectOnCancel&&this._reject(new n(e))}}get isCanceled(){return this._isCanceled}}Object.setPrototypeOf(o.prototype,Promise.prototype),e.exports=o,e.exports.CancelError=n},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("tls")},function(e,t,r){"use strict";e.exports=e=>{const t={};for(const[r,n]of Object.entries(e))t[r.toLowerCase()]=n;return t}},function(e,t){e.exports=require("http2")},function(e,t,r){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(e,t,r){var n=r(47),o={};for(var s in n)n.hasOwnProperty(s)&&(o[n[s]]=s);var i=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var a in i)if(i.hasOwnProperty(a)){if(!("channels"in i[a]))throw new Error("missing channels property: "+a);if(!("labels"in i[a]))throw new Error("missing channel labels property: "+a);if(i[a].labels.length!==i[a].channels)throw new Error("channel and label counts mismatch: "+a);var c=i[a].channels,l=i[a].labels;delete i[a].channels,delete i[a].labels,Object.defineProperty(i[a],"channels",{value:c}),Object.defineProperty(i[a],"labels",{value:l})}i.rgb.hsl=function(e){var t,r,n=e[0]/255,o=e[1]/255,s=e[2]/255,i=Math.min(n,o,s),a=Math.max(n,o,s),c=a-i;return a===i?t=0:n===a?t=(o-s)/c:o===a?t=2+(s-n)/c:s===a&&(t=4+(n-o)/c),(t=Math.min(60*t,360))<0&&(t+=360),r=(i+a)/2,[t,100*(a===i?0:r<=.5?c/(a+i):c/(2-a-i)),100*r]},i.rgb.hsv=function(e){var t,r,n,o,s,i=e[0]/255,a=e[1]/255,c=e[2]/255,l=Math.max(i,a,c),u=l-Math.min(i,a,c),d=function(e){return(l-e)/6/u+.5};return 0===u?o=s=0:(s=u/l,t=d(i),r=d(a),n=d(c),i===l?o=n-r:a===l?o=1/3+t-n:c===l&&(o=2/3+r-t),o<0?o+=1:o>1&&(o-=1)),[360*o,100*s,100*l]},i.rgb.hwb=function(e){var t=e[0],r=e[1],n=e[2];return[i.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(r,n))),100*(n=1-1/255*Math.max(t,Math.max(r,n)))]},i.rgb.cmyk=function(e){var t,r=e[0]/255,n=e[1]/255,o=e[2]/255;return[100*((1-r-(t=Math.min(1-r,1-n,1-o)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-o-t)/(1-t)||0),100*t]},i.rgb.keyword=function(e){var t=o[e];if(t)return t;var r,s,i,a=1/0;for(var c in n)if(n.hasOwnProperty(c)){var l=n[c],u=(s=e,i=l,Math.pow(s[0]-i[0],2)+Math.pow(s[1]-i[1],2)+Math.pow(s[2]-i[2],2));u<a&&(a=u,r=c)}return r},i.keyword.rgb=function(e){return n[e]},i.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*r+.0722*n),100*(.0193*t+.1192*r+.9505*n)]},i.rgb.lab=function(e){var t=i.rgb.xyz(e),r=t[0],n=t[1],o=t[2];return n/=100,o/=108.883,r=(r/=95.047)>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(r-n),200*(n-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]},i.hsl.rgb=function(e){var t,r,n,o,s,i=e[0]/360,a=e[1]/100,c=e[2]/100;if(0===a)return[s=255*c,s,s];t=2*c-(r=c<.5?c*(1+a):c+a-c*a),o=[0,0,0];for(var l=0;l<3;l++)(n=i+1/3*-(l-1))<0&&n++,n>1&&n--,s=6*n<1?t+6*(r-t)*n:2*n<1?r:3*n<2?t+(r-t)*(2/3-n)*6:t,o[l]=255*s;return o},i.hsl.hsv=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,o=r,s=Math.max(n,.01);return r*=(n*=2)<=1?n:2-n,o*=s<=1?s:2-s,[t,100*(0===n?2*o/(s+o):2*r/(n+r)),100*((n+r)/2)]},i.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,o=Math.floor(t)%6,s=t-Math.floor(t),i=255*n*(1-r),a=255*n*(1-r*s),c=255*n*(1-r*(1-s));switch(n*=255,o){case 0:return[n,c,i];case 1:return[a,n,i];case 2:return[i,n,c];case 3:return[i,a,n];case 4:return[c,i,n];case 5:return[n,i,a]}},i.hsv.hsl=function(e){var t,r,n,o=e[0],s=e[1]/100,i=e[2]/100,a=Math.max(i,.01);return n=(2-s)*i,r=s*a,[o,100*(r=(r/=(t=(2-s)*a)<=1?t:2-t)||0),100*(n/=2)]},i.hwb.rgb=function(e){var t,r,n,o,s,i,a,c=e[0]/360,l=e[1]/100,u=e[2]/100,d=l+u;switch(d>1&&(l/=d,u/=d),n=6*c-(t=Math.floor(6*c)),0!=(1&t)&&(n=1-n),o=l+n*((r=1-u)-l),t){default:case 6:case 0:s=r,i=o,a=l;break;case 1:s=o,i=r,a=l;break;case 2:s=l,i=r,a=o;break;case 3:s=l,i=o,a=r;break;case 4:s=o,i=l,a=r;break;case 5:s=r,i=l,a=o}return[255*s,255*i,255*a]},i.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,o=e[3]/100;return[255*(1-Math.min(1,t*(1-o)+o)),255*(1-Math.min(1,r*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o))]},i.xyz.rgb=function(e){var t,r,n,o=e[0]/100,s=e[1]/100,i=e[2]/100;return r=-.9689*o+1.8758*s+.0415*i,n=.0557*o+-.204*s+1.057*i,t=(t=3.2406*o+-1.5372*s+-.4986*i)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(t=Math.min(Math.max(0,t),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]},i.xyz.lab=function(e){var t=e[0],r=e[1],n=e[2];return r/=100,n/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(t-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},i.lab.xyz=function(e){var t,r,n,o=e[0];t=e[1]/500+(r=(o+16)/116),n=r-e[2]/200;var s=Math.pow(r,3),i=Math.pow(t,3),a=Math.pow(n,3);return r=s>.008856?s:(r-16/116)/7.787,t=i>.008856?i:(t-16/116)/7.787,n=a>.008856?a:(n-16/116)/7.787,[t*=95.047,r*=100,n*=108.883]},i.lab.lch=function(e){var t,r=e[0],n=e[1],o=e[2];return(t=360*Math.atan2(o,n)/2/Math.PI)<0&&(t+=360),[r,Math.sqrt(n*n+o*o),t]},i.lch.lab=function(e){var t,r=e[0],n=e[1];return t=e[2]/360*2*Math.PI,[r,n*Math.cos(t),n*Math.sin(t)]},i.rgb.ansi16=function(e){var t=e[0],r=e[1],n=e[2],o=1 in arguments?arguments[1]:i.rgb.hsv(e)[2];if(0===(o=Math.round(o/50)))return 30;var s=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return 2===o&&(s+=60),s},i.hsv.ansi16=function(e){return i.rgb.ansi16(i.hsv.rgb(e),e[2])},i.rgb.ansi256=function(e){var t=e[0],r=e[1],n=e[2];return t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},i.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var r=.5*(1+~~(e>50));return[(1&t)*r*255,(t>>1&1)*r*255,(t>>2&1)*r*255]},i.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var r;return e-=16,[Math.floor(e/36)/5*255,Math.floor((r=e%36)/6)/5*255,r%6/5*255]},i.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},i.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];3===t[0].length&&(r=r.split("").map((function(e){return e+e})).join(""));var n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},i.rgb.hcg=function(e){var t,r=e[0]/255,n=e[1]/255,o=e[2]/255,s=Math.max(Math.max(r,n),o),i=Math.min(Math.min(r,n),o),a=s-i;return t=a<=0?0:s===r?(n-o)/a%6:s===n?2+(o-r)/a:4+(r-n)/a+4,t/=6,[360*(t%=1),100*a,100*(a<1?i/(1-a):0)]},i.hsl.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1,o=0;return(n=r<.5?2*t*r:2*t*(1-r))<1&&(o=(r-.5*n)/(1-n)),[e[0],100*n,100*o]},i.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=t*r,o=0;return n<1&&(o=(r-n)/(1-n)),[e[0],100*n,100*o]},i.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(0===r)return[255*n,255*n,255*n];var o,s=[0,0,0],i=t%1*6,a=i%1,c=1-a;switch(Math.floor(i)){case 0:s[0]=1,s[1]=a,s[2]=0;break;case 1:s[0]=c,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=a;break;case 3:s[0]=0,s[1]=c,s[2]=1;break;case 4:s[0]=a,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=c}return o=(1-r)*n,[255*(r*s[0]+o),255*(r*s[1]+o),255*(r*s[2]+o)]},i.hcg.hsv=function(e){var t=e[1]/100,r=t+e[2]/100*(1-t),n=0;return r>0&&(n=t/r),[e[0],100*n,100*r]},i.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100*(1-t)+.5*t,n=0;return r>0&&r<.5?n=t/(2*r):r>=.5&&r<1&&(n=t/(2*(1-r))),[e[0],100*n,100*r]},i.hcg.hwb=function(e){var t=e[1]/100,r=t+e[2]/100*(1-t);return[e[0],100*(r-t),100*(1-r)]},i.hwb.hcg=function(e){var t=e[1]/100,r=1-e[2]/100,n=r-t,o=0;return n<1&&(o=(r-n)/(1-n)),[e[0],100*n,100*o]},i.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},i.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},i.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},i.gray.hsl=i.gray.hsv=function(e){return[0,0,e[0]]},i.gray.hwb=function(e){return[0,100,e[0]]},i.gray.cmyk=function(e){return[0,0,0,e[0]]},i.gray.lab=function(e){return[e[0],0,0]},i.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r},i.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeHex=t.isColor=t.isOpacity=t.isColor24=t.hexTo24=t.getAlpha=t.changeAlpha=void 0,t.changeAlpha=(e,r)=>{if(!e)return"";let n=t.normalizeHex(e);if(!t.isColor24(n))return e;if(8===n.length)n=n.substr(0,6);else if(n.length<6)return n;r>0&&(r/=100);const o=(255*Math.min(1,Math.max(r,0))|0).toString(16);return"#"+n+(2===o.length?o:"0"+o)},t.getAlpha=e=>e?8===(null==(e=t.normalizeHex(e))?void 0:e.length)?Math.ceil((255&parseInt(e,16))/255*100):100:1,t.hexTo24=e=>e?"#"+(e=t.normalizeHex(e)).substr(0,6):"",t.isColor24=e=>{if(!e)return!1;const r=t.normalizeHex(e);return t.isColor(r)&&6===r.length},t.isOpacity=e=>!!/^\d{1,3}%$/.test(e)&&!(parseInt(e.replace("%",""))>100),t.isColor=e=>{if(!e)return!1;return null!==t.normalizeHex(e).match(/^([0-9a-f]{6,8})$/i)},t.normalizeHex=e=>e&&"#"===e[0]?e.substr(1):e},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.snippetLanguageToMime=t.SnippetLanguageList=t.SDLanguagesList=t.SupportedLanguagesList=t.styledictionaryID=t.SDLanguage=void 0;const n=r(30);var o;!function(e){e.css="css",e.scss="scss",e.android="android",e.swift="ios-swift",e.ios="ios",e.javascript="js",e.flutter="flutter"}(o=t.SDLanguage||(t.SDLanguage={})),t.styledictionaryID="ext-com_adobe_xd-styledictionary_id",t.SupportedLanguagesList=[{label:n.getString("Language.Type.coffeescript"),export_tokens:!1,snippet_id:"coffeescript",syntax:"text/x-coffeescript"},{label:n.getString("Language.Type.c"),export_tokens:!1,snippet_id:"c",syntax:"text/x-csrc"},{label:n.getString("Language.Type.csharp"),export_tokens:!1,snippet_id:"csharp",syntax:"text/x-csharp"},{label:n.getString("Language.Type.css"),export_tokens:!0,snippet_id:"css",syntax:"text/css",[t.styledictionaryID]:o.css},{label:n.getString("Language.Type.dart"),export_tokens:!1,snippet_id:"dart",syntax:"application/vnd.dart",[t.styledictionaryID]:o.flutter},{label:n.getString("Language.Type.fsharp"),export_tokens:!1,snippet_id:"fsharp",syntax:"text/x-csharp"},{label:n.getString("Language.Type.go"),export_tokens:!1,snippet_id:"go",syntax:"text/x-go"},{label:n.getString("Language.Type.groovy"),export_tokens:!1,snippet_id:"groovy",syntax:"text/x-groovy"},{label:n.getString("Language.Type.handlebars"),export_tokens:!1,snippet_id:"handlebars",syntax:"text/x-handlebars-template"},{label:n.getString("Language.Type.html"),export_tokens:!1,snippet_id:"html",syntax:"text/html"},{label:n.getString("Language.Type.java"),export_tokens:!1,snippet_id:"java",syntax:"text/x-java",[t.styledictionaryID]:o.android},{label:n.getString("Language.Type.javascript"),export_tokens:!1,snippet_id:"javascript",syntax:"text/javascript",[t.styledictionaryID]:o.javascript},{label:n.getString("Language.Type.javascriptreact"),export_tokens:!1,snippet_id:"javascriptreact",syntax:"text/jsx"},{label:n.getString("Language.Type.less"),export_tokens:!1,snippet_id:"less",syntax:"text/x-less"},{label:n.getString("Language.Type.lua"),export_tokens:!1,snippet_id:"lua",syntax:"text/x-lua"},{label:n.getString("Language.Type.obj-c"),export_tokens:!1,snippet_id:"objective-c",syntax:"text/x-objectivec",[t.styledictionaryID]:o.ios},{label:n.getString("Language.Type.obj-cpp"),export_tokens:!1,snippet_id:"objective-cpp",syntax:"text/x-c++src"},{label:n.getString("Language.Type.jade"),export_tokens:!1,snippet_id:"jade",syntax:"text/html"},{label:n.getString("Language.Type.python"),export_tokens:!1,snippet_id:"python",syntax:"text/x-python"},{label:n.getString("Language.Type.razor"),export_tokens:!1,snippet_id:"razor",syntax:"text/x-csharp"},{label:n.getString("Language.Type.ruby"),export_tokens:!1,snippet_id:"ruby",syntax:"text/x-ruby"},{label:n.getString("Language.Type.rust"),export_tokens:!1,snippet_id:"rust",syntax:"text/x-rustsrc"},{label:n.getString("Language.Type.scss"),export_tokens:!1,snippet_id:"scss",syntax:"text/x-sass",[t.styledictionaryID]:o.scss},{label:n.getString("Language.Type.sass"),export_tokens:!1,snippet_id:"sass",syntax:"text/x-sass"},{label:n.getString("Language.Type.shaderLab"),export_tokens:!1,snippet_id:"shaderlab",syntax:"text/x-vertex"},{label:n.getString("Language.Type.swift"),export_tokens:!1,snippet_id:"swift",syntax:"text/x-swift",[t.styledictionaryID]:o.swift},{label:n.getString("Language.Type.typescript"),export_tokens:!1,snippet_id:"typescript",syntax:"text/typescript"},{label:n.getString("Language.Type.typescriptreact"),export_tokens:!1,snippet_id:"typescriptreact",syntax:"text/typescript-jsx"},{label:n.getString("Language.Type.markdown"),export_tokens:!1,snippet_id:"markdown",syntax:"text/x-markdown"}],t.SDLanguagesList=t.SupportedLanguagesList.filter(e=>void 0!==e[t.styledictionaryID]),t.SnippetLanguageList=t.SupportedLanguagesList,t.snippetLanguageToMime=e=>{var r;return null===(r=t.SnippetLanguageList.find(t=>t.snippet_id===e))||void 0===r?void 0:r.syntax}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.logs=[]}log(e){const t=new Date,r=(""+t.toUTCString()).match(/^(.*)+\s([A-Z]+)/)||[],n=`${r[1]}.${t.getMilliseconds()} ${r[2]}: ${e}`;for(console.log(n),this.logs.unshift(n);this.logs.join().length>102400;)this.logs.pop()}exportLog(){return this.logs.join("\n")}}},function(e,t,r){var n=r(53),o=r(0);e.exports=function(e){var t=n();return 126===e.charCodeAt(0)?43===e.charCodeAt(1)?o.join(process.cwd(),e.slice(2)):t?o.join(t,e.slice(1)):e:e}},function(e,t,r){"use strict";var n=r(31);void 0!==n.homedir?e.exports=n.homedir:e.exports=r(115)},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){var n,o,s,i;i=function(){"use strict";return function(){return process&&("win32"===process.platform||/^(msys|cygwin)$/.test(process.env.OSTYPE))}},t&&"object"==typeof t&&void 0!==e?e.exports=i():(o=[],void 0===(s="function"==typeof(n=i)?n.apply(t,o):n)||(e.exports=s))},function(e,t,r){"use strict";const n=r(6),o=r(128),s=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),i=e=>"number"==typeof e||"string"==typeof e&&""!==e,a=e=>Number.isInteger(+e),c=e=>{let t=""+e,r=-1;if("-"===t[0]&&(t=t.slice(1)),"0"===t)return!1;for(;"0"===t[++r];);return r>0},l=(e,t,r)=>{if(t>0){let r="-"===e[0]?"-":"";r&&(e=e.slice(1)),e=r+e.padStart(r?t-1:t,"0")}return!1===r?String(e):e},u=(e,t)=>{let r="-"===e[0]?"-":"";for(r&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return r?"-"+e:e},d=(e,t,r,n)=>{if(r)return o(e,t,{wrap:!1,...n});let s=String.fromCharCode(e);return e===t?s:`[${s}-${String.fromCharCode(t)}]`},h=(e,t,r)=>{if(Array.isArray(e)){let t=!0===r.wrap,n=r.capture?"":"?:";return t?`(${n}${e.join("|")})`:e.join("|")}return o(e,t,r)},p=(...e)=>new RangeError("Invalid range arguments: "+n.inspect(...e)),f=(e,t,r)=>{if(!0===r.strictRanges)throw p([e,t]);return[]},m=(e,t,r=1,n={})=>{let o=Number(e),s=Number(t);if(!Number.isInteger(o)||!Number.isInteger(s)){if(!0===n.strictRanges)throw p([e,t]);return[]}0===o&&(o=0),0===s&&(s=0);let i=o>s,a=String(e),f=String(t),m=String(r);r=Math.max(Math.abs(r),1);let g=c(a)||c(f)||c(m),y=g?Math.max(a.length,f.length,m.length):0,v=!1===g&&!1===((e,t,r)=>"string"==typeof e||"string"==typeof t||!0===r.stringify)(e,t,n),b=n.transform||(e=>t=>!0===e?Number(t):String(t))(v);if(n.toRegex&&1===r)return d(u(e,y),u(t,y),!0,n);let w={negatives:[],positives:[]},S=[],E=0;for(;i?o>=s:o<=s;)!0===n.toRegex&&r>1?w[(_=o)<0?"negatives":"positives"].push(Math.abs(_)):S.push(l(b(o,E),y,v)),o=i?o-r:o+r,E++;var _;return!0===n.toRegex?r>1?((e,t)=>{e.negatives.sort((e,t)=>e<t?-1:e>t?1:0),e.positives.sort((e,t)=>e<t?-1:e>t?1:0);let r,n=t.capture?"":"?:",o="",s="";return e.positives.length&&(o=e.positives.join("|")),e.negatives.length&&(s=`-(${n}${e.negatives.join("|")})`),r=o&&s?`${o}|${s}`:o||s,t.wrap?`(${n}${r})`:r})(w,n):h(S,null,{wrap:!1,...n}):S},g=(e,t,r,n={})=>{if(null==t&&i(e))return[e];if(!i(e)||!i(t))return f(e,t,n);if("function"==typeof r)return g(e,t,1,{transform:r});if(s(r))return g(e,t,0,r);let o={...n};return!0===o.capture&&(o.wrap=!0),r=r||o.step||1,a(r)?a(e)&&a(t)?m(e,t,r,o):((e,t,r=1,n={})=>{if(!a(e)&&e.length>1||!a(t)&&t.length>1)return f(e,t,n);let o=n.transform||(e=>String.fromCharCode(e)),s=(""+e).charCodeAt(0),i=(""+t).charCodeAt(0),c=s>i,l=Math.min(s,i),u=Math.max(s,i);if(n.toRegex&&1===r)return d(l,u,!1,n);let p=[],m=0;for(;c?s>=i:s<=i;)p.push(o(s,m)),s=c?s-r:s+r,m++;return!0===n.toRegex?h(p,null,{wrap:!1,options:n}):p})(e,t,Math.max(Math.abs(r),1),o):null==r||s(r)?g(e,t,1,r):((e,t)=>{if(!0===t.strictRanges)throw new TypeError(`Expected step "${e}" to be a number`);return[]})(r,o)};e.exports=g},function(e,t){e.exports=require("assert")},function(e,t,r){"use strict";e.exports={copySync:r(142)}},function(e,t){e.exports=e=>{const t=process.versions.node.split(".").map(e=>parseInt(e,10));return e=e.split(".").map(e=>parseInt(e,10)),t[0]>e[0]||t[0]===e[0]&&(t[1]>e[1]||t[1]===e[1]&&t[2]>=e[2])}},function(e,t,r){"use strict";const n=r(4);e.exports={utimesMillis:function(e,t,r,o){n.open(e,"r+",(e,s)=>{if(e)return o(e);n.futimes(s,t,r,e=>{n.close(s,t=>{o&&o(e||t)})})})},utimesMillisSync:function(e,t,r){const o=n.openSync(e,"r+");return n.futimesSync(o,t,r),n.closeSync(o)}}},function(e,t,r){"use strict";const n=r(5).fromCallback;e.exports={copy:n(r(144))}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const c=a(r(9)),l=a(r(36)),u=r(15),d=a(r(0)),h=s(r(2)),p=r(1);t.default=new class{constructor(){this.name="xd.exportTokens"}execute(){var e,t,r,n,o;return i(this,void 0,void 0,(function*(){if(c.default.currentFile&&c.default.currentFolder){if(0===c.default.currentFile.colors.length&&0===c.default.currentFile.custom.length&&0===c.default.currentFile.sizes.length&&0===c.default.currentFile.aliases.length&&0===c.default.currentFile.fonts.length)return;if(0===((null===(e=c.default.currentFile.settings.languages)||void 0===e?void 0:e.filter(e=>e.export_tokens))||[]).length)return;yield l.default.saveSDInput(c.default.currentFile,c.default.currentFolder);const s=d.default.join(c.default.currentFolderPlatformPath,u.GENERATED_FOLDER_NAME),i=yield u.generateTokensWithSD(s,(null===(r=null===(t=c.default.currentFile)||void 0===t?void 0:t.settings)||void 0===r?void 0:r.build_params)||"");if(i.success){let e="";if(c.default.currentFile.settings.build_params===p.DEFAULT_BUILD_PARAMS){const t=(null===(o=null===(n=c.default.currentFile.settings.languages)||void 0===n?void 0:n.filter(e=>e.export_tokens))||void 0===o?void 0:o.map(e=>e.label))||[];if(t.length>1){const r=t.pop();e=`${p.getString("Toast.TokensDone")}${t.join(", ").concat(" and "+r)}`}else e=`${p.getString("Toast.TokensDone")}${t.join(",")}`}else e=p.getString("Toast.TokensDoneCustom");(yield h.window.showInformationMessage(e,p.getString("Toast.OpenFolder")))===p.getString("Toast.OpenFolder")&&u.openInFileExplorer(s)}else if(i.btn){if((yield h.window.showWarningMessage(""+i.output,i.btn))===p.getString("Toast.Button.InstallSD")){const e=yield u.installSDLocally(s);if(e.success&&e.output){(yield h.window.showInformationMessage(e.output,p.getString("Menu.Button.ExportTokens")))===p.getString("Menu.Button.ExportTokens")&&this.execute()}else{(yield h.window.showErrorMessage(e.output||"",e.btn||""))===p.getString("Toast.Button.DownloadNodeJS")&&h.env.openExternal(h.Uri.parse(p.getString("Url.NodeJS")))}}}else h.window.showErrorMessage(`${p.getString("Toast.TokensError")}: ${i.output}`)}}))}}},function(e,t,r){"use strict";var n=r(13);e.exports=function(e){n.copy(e,this)}},function(e,t,r){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,n="boolean"==typeof t.cycles&&t.cycles,o=t.cmp&&(r=t.cmp,function(e){return function(t,n){var o={key:t,value:e[t]},s={key:n,value:e[n]};return r(o,s)}}),s=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,i;if(Array.isArray(t)){for(i="[",r=0;r<t.length;r++)r&&(i+=","),i+=e(t[r])||"null";return i+"]"}if(null===t)return"null";if(-1!==s.indexOf(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var a=s.push(t)-1,c=Object.keys(t).sort(o&&o(t));for(i="",r=0;r<c.length;r++){var l=c[r],u=e(t[l]);u&&(i&&(i+=","),i+=JSON.stringify(l)+":"+u)}return s.splice(a,1),"{"+i+"}"}}(e)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n="",o=!0===e.schema.$async,s=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),i=e.self._getId(e.schema);if(e.opts.strictKeywords){var a=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(a){var c="unknown keyword: "+a;if("log"!==e.opts.strictKeywords)throw new Error(c);e.logger.warn(c)}}if(e.isTop&&(n+=" var validate = ",o&&(e.async=!0,n+="async "),n+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",i&&(e.opts.sourceCode||e.opts.processCode)&&(n+=" /*# sourceURL="+i+" */ ")),"boolean"==typeof e.schema||!s&&!e.schema.$ref){var l=e.level,u=e.dataLevel,d=e.schema["false schema"],h=e.schemaPath+e.util.getProperty("false schema"),p=e.errSchemaPath+"/false schema",f=!e.opts.allErrors,m="data"+(u||""),g="valid"+l;if(!1===e.schema){e.isTop?f=!0:n+=" var "+g+" = false; ",(K=K||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'boolean schema is false' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";var y=n;n=K.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?n+=o?" return data; ":" validate.errors = null; return true; ":n+=" var "+g+" = true; ";return e.isTop&&(n+=" }; return validate; "),n}if(e.isTop){var v=e.isTop;l=e.level=0,u=e.dataLevel=0,m="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{l=e.level,m="data"+((u=e.dataLevel)||"");if(i&&(e.baseId=e.resolve.url(e.baseId,i)),o&&!e.async)throw new Error("async schema in sync schema");n+=" var errs_"+l+" = errors;"}g="valid"+l,f=!e.opts.allErrors;var w="",S="",E=e.schema.type,_=Array.isArray(E);if(E&&e.opts.nullable&&!0===e.schema.nullable&&(_?-1==E.indexOf("null")&&(E=E.concat("null")):"null"!=E&&(E=[E,"null"],_=!0)),_&&1==E.length&&(E=E[0],_=!1),e.schema.$ref&&s){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(s=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(n+=" "+e.RULES.all.$comment.code(e,"$comment")),E){if(e.opts.coerceTypes)var P=e.util.coerceToTypes(e.opts.coerceTypes,E);var x=e.RULES.types[E];if(P||_||!0===x||x&&!X(x)){h=e.schemaPath+".type",p=e.errSchemaPath+"/type",h=e.schemaPath+".type",p=e.errSchemaPath+"/type";var k=_?"checkDataTypes":"checkDataType";if(n+=" if ("+e.util[k](E,m,e.opts.strictNumbers,!0)+") { ",P){var C="dataType"+l,T="coerced"+l;n+=" var "+C+" = typeof "+m+"; var "+T+" = undefined; ","array"==e.opts.coerceTypes&&(n+=" if ("+C+" == 'object' && Array.isArray("+m+") && "+m+".length == 1) { "+m+" = "+m+"[0]; "+C+" = typeof "+m+"; if ("+e.util.checkDataType(e.schema.type,m,e.opts.strictNumbers)+") "+T+" = "+m+"; } "),n+=" if ("+T+" !== undefined) ; ";var A=P;if(A)for(var O,R=-1,D=A.length-1;R<D;)"string"==(O=A[R+=1])?n+=" else if ("+C+" == 'number' || "+C+" == 'boolean') "+T+" = '' + "+m+"; else if ("+m+" === null) "+T+" = ''; ":"number"==O||"integer"==O?(n+=" else if ("+C+" == 'boolean' || "+m+" === null || ("+C+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==O&&(n+=" && !("+m+" % 1)"),n+=")) "+T+" = +"+m+"; "):"boolean"==O?n+=" else if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+T+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+T+" = true; ":"null"==O?n+=" else if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+T+" = null; ":"array"==e.opts.coerceTypes&&"array"==O&&(n+=" else if ("+C+" == 'string' || "+C+" == 'number' || "+C+" == 'boolean' || "+m+" == null) "+T+" = ["+m+"]; ");n+=" else {   ",(K=K||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",n+=_?""+E.join(","):""+E,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=_?""+E.join(","):""+E,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";y=n;n=K.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } if ("+T+" !== undefined) {  ";var L=u?"data"+(u-1||""):"parentData";n+=" "+m+" = "+T+"; ",u||(n+="if ("+L+" !== undefined)"),n+=" "+L+"["+(u?e.dataPathArr[u]:"parentDataProperty")+"] = "+T+"; } "}else{(K=K||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",n+=_?""+E.join(","):""+E,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=_?""+E.join(","):""+E,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";y=n;n=K.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}n+=" } "}}if(e.schema.$ref&&!s)n+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",f&&(n+=" } if (errors === ",n+=v?"0":"errs_"+l,n+=") { ",S+="}");else{var F=e.RULES;if(F)for(var j=-1,I=F.length-1;j<I;)if(X(x=F[j+=1])){if(x.type&&(n+=" if ("+e.util.checkDataType(x.type,m,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==x.type&&e.schema.properties){d=e.schema.properties;var M=Object.keys(d);if(M)for(var N,$=-1,H=M.length-1;$<H;){if(void 0!==(z=d[N=M[$+=1]]).default){var U=m+e.util.getProperty(N);if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+U;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else n+=" if ("+U+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+U+" === null || "+U+" === '' "),n+=" ) "+U+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(z.default)+" ":n+=" "+JSON.stringify(z.default)+" ",n+="; "}}}else if("array"==x.type&&Array.isArray(e.schema.items)){var B=e.schema.items;if(B){R=-1;for(var z,q=B.length-1;R<q;)if(void 0!==(z=B[R+=1]).default){U=m+"["+R+"]";if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+U;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else n+=" if ("+U+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+U+" === null || "+U+" === '' "),n+=" ) "+U+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(z.default)+" ":n+=" "+JSON.stringify(z.default)+" ",n+="; "}}}var V=x.rules;if(V)for(var Q,W=-1,G=V.length-1;W<G;)if(Y(Q=V[W+=1])){var J=Q.code(e,Q.keyword,x.type);J&&(n+=" "+J+" ",f&&(w+="}"))}if(f&&(n+=" "+w+" ",w=""),x.type&&(n+=" } ",E&&E===x.type&&!P)){n+=" else { ";var K;h=e.schemaPath+".type",p=e.errSchemaPath+"/type";(K=K||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",n+=_?""+E.join(","):""+E,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=_?""+E.join(","):""+E,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";y=n;n=K.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "}f&&(n+=" if (errors === ",n+=v?"0":"errs_"+l,n+=") { ",S+="}")}}function X(e){for(var t=e.rules,r=0;r<t.length;r++)if(Y(t[r]))return!0}function Y(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,n=0;n<r.length;n++)if(void 0!==e.schema[r[n]])return!0}(t)}return f&&(n+=" "+S+" "),v?(o?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }; return validate;"):n+=" var "+g+" = errors === errs_"+l+";",n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",s=e.level,i=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(i||""),h=e.opts.$data&&a&&a.$data;h?(o+=" var schema"+s+" = "+e.util.getData(a.$data,i,e.dataPathArr)+"; ",n="schema"+s):n=a;var p="maximum"==t,f=p?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[f],g=e.opts.$data&&m&&m.$data,y=p?"<":">",v=p?">":"<",b=void 0;if(!h&&"number"!=typeof a&&void 0!==a)throw new Error(t+" must be number");if(!g&&void 0!==m&&"number"!=typeof m&&"boolean"!=typeof m)throw new Error(f+" must be number or boolean");if(g){var w=e.util.getData(m.$data,i,e.dataPathArr),S="exclusive"+s,E="exclType"+s,_="exclIsNumber"+s,P="' + "+(C="op"+s)+" + '";o+=" var schemaExcl"+s+" = "+w+"; ",o+=" var "+S+"; var "+E+" = typeof "+(w="schemaExcl"+s)+"; if ("+E+" != 'boolean' && "+E+" != 'undefined' && "+E+" != 'number') { ";var x;b=f;(x=x||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(o+=" , message: '"+f+" should be boolean' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var k=o;o=x.pop(),!e.compositeRule&&u?e.async?o+=" throw new ValidationError(["+k+"]); ":o+=" validate.errors = ["+k+"]; return false; ":o+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" "+E+" == 'number' ? ( ("+S+" = "+n+" === undefined || "+w+" "+y+"= "+n+") ? "+d+" "+v+"= "+w+" : "+d+" "+v+" "+n+" ) : ( ("+S+" = "+w+" === true) ? "+d+" "+v+"= "+n+" : "+d+" "+v+" "+n+" ) || "+d+" !== "+d+") { var op"+s+" = "+S+" ? '"+y+"' : '"+y+"='; ",void 0===a&&(b=f,l=e.errSchemaPath+"/"+f,n=w,h=g)}else{P=y;if((_="number"==typeof m)&&h){var C="'"+P+"'";o+=" if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" ( "+n+" === undefined || "+m+" "+y+"= "+n+" ? "+d+" "+v+"= "+m+" : "+d+" "+v+" "+n+" ) || "+d+" !== "+d+") { "}else{_&&void 0===a?(S=!0,b=f,l=e.errSchemaPath+"/"+f,n=m,v+="="):(_&&(n=Math[p?"min":"max"](m,a)),m===(!_||n)?(S=!0,b=f,l=e.errSchemaPath+"/"+f,v+="="):(S=!1,P+="="));C="'"+P+"'";o+=" if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" "+d+" "+v+" "+n+" || "+d+" !== "+d+") { "}}b=b||t,(x=x||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { comparison: "+C+", limit: "+n+", exclusive: "+S+" } ",!1!==e.opts.messages&&(o+=" , message: 'should be "+P+" ",o+=h?"' + "+n:n+"'"),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";k=o;return o=x.pop(),!e.compositeRule&&u?e.async?o+=" throw new ValidationError(["+k+"]); ":o+=" validate.errors = ["+k+"]; return false; ":o+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",u&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",s=e.level,i=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(i||""),h=e.opts.$data&&a&&a.$data;if(h?(o+=" var schema"+s+" = "+e.util.getData(a.$data,i,e.dataPathArr)+"; ",n="schema"+s):n=a,!h&&"number"!=typeof a)throw new Error(t+" must be number");o+="if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" "+d+".length "+("maxItems"==t?">":"<")+" "+n+") { ";var p=t,f=f||[];f.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(p||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have ",o+="maxItems"==t?"more":"fewer",o+=" than ",o+=h?"' + "+n+" + '":""+a,o+=" items' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var m=o;return o=f.pop(),!e.compositeRule&&u?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",u&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",s=e.level,i=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(i||""),h=e.opts.$data&&a&&a.$data;if(h?(o+=" var schema"+s+" = "+e.util.getData(a.$data,i,e.dataPathArr)+"; ",n="schema"+s):n=a,!h&&"number"!=typeof a)throw new Error(t+" must be number");var p="maxLength"==t?">":"<";o+="if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),!1===e.opts.unicode?o+=" "+d+".length ":o+=" ucs2length("+d+") ",o+=" "+p+" "+n+") { ";var f=t,m=m||[];m.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(f||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT be ",o+="maxLength"==t?"longer":"shorter",o+=" than ",o+=h?"' + "+n+" + '":""+a,o+=" characters' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var g=o;return o=m.pop(),!e.compositeRule&&u?e.async?o+=" throw new ValidationError(["+g+"]); ":o+=" validate.errors = ["+g+"]; return false; ":o+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",u&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",s=e.level,i=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(i||""),h=e.opts.$data&&a&&a.$data;if(h?(o+=" var schema"+s+" = "+e.util.getData(a.$data,i,e.dataPathArr)+"; ",n="schema"+s):n=a,!h&&"number"!=typeof a)throw new Error(t+" must be number");o+="if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" Object.keys("+d+").length "+("maxProperties"==t?">":"<")+" "+n+") { ";var p=t,f=f||[];f.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(p||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have ",o+="maxProperties"==t?"more":"fewer",o+=" than ",o+=h?"' + "+n+" + '":""+a,o+=" properties' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var m=o;return o=f.pop(),!e.compositeRule&&u?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",u&&(o+=" else { "),o}},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultHandler=void 0;const s=r(42),i=r(12),a=r(72),c=r(240),l=r(29),u=r(241),d={RequestError:a.RequestError,CacheError:a.CacheError,ReadError:a.ReadError,HTTPError:a.HTTPError,MaxRedirectsError:a.MaxRedirectsError,TimeoutError:a.TimeoutError,ParseError:a.ParseError,CancelError:s.CancelError,UnsupportedProtocolError:a.UnsupportedProtocolError,UploadError:a.UploadError},h=async e=>new Promise(t=>setTimeout(t,e)),{normalizeArguments:p,mergeOptions:f}=a.PromisableRequest,m=e=>e.isStream?new l.default(e.url,e):a.default(e),g=e=>"defaults"in e&&"options"in e.defaults,y=["get","post","put","patch","head","delete"];t.defaultHandler=(e,t)=>t(e);const v=(e,t)=>{if(e)for(const r of e)r(t)},b=e=>{e._rawHandlers=e.handlers,e.handlers=e.handlers.map(e=>(t,r)=>{let n;const o=e(t,e=>(n=r(e),n));if(o!==n&&!t.isStream&&n){const e=o,{then:t,catch:r,finally:s}=e;Object.setPrototypeOf(e,Object.getPrototypeOf(n)),Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)),e.then=t,e.catch=r,e.finally=s}return o});const r=(t,r)=>{var n,o;let s=0;const u=t=>e.handlers[s++](t,s===e.handlers.length?m:u);if(i.default.plainObject(t)){const e={...t,...r};l.setNonEnumerableProperties([t,r],e),r=e,t=void 0}try{let o;try{v(e.options.hooks.init,r),v(null===(n=null==r?void 0:r.hooks)||void 0===n?void 0:n.init,r)}catch(e){o=e}const s=p(t,r,e.options);if(s[l.kIsNormalizedAlready]=!0,o)throw new a.RequestError(o.message,o,s);return u(s)}catch(t){if(null==r?void 0:r.isStream)throw t;return c.default(t,e.options.hooks.beforeError,null===(o=null==r?void 0:r.hooks)||void 0===o?void 0:o.beforeError)}};r.extend=(...r)=>{const n=[e.options];let o,s=[...e._rawHandlers];for(const e of r)g(e)?(n.push(e.defaults.options),s.push(...e.defaults._rawHandlers),o=e.defaults.mutableDefaults):(n.push(e),"handlers"in e&&s.push(...e.handlers),o=e.mutableDefaults);return s=s.filter(e=>e!==t.defaultHandler),0===s.length&&s.push(t.defaultHandler),b({options:f(...n),handlers:s,mutableDefaults:Boolean(o)})};const n=async function*(t,n){let o=p(t,n,e.options);o.resolveBodyOnly=!1;const s=o.pagination;if(!i.default.object(s))throw new TypeError("`options.pagination` must be implemented");const a=[];let{countLimit:c}=s,l=0;for(;l<s.requestLimit;){0!==l&&await h(s.backoff);const e=await r(o),t=await s.transform(e),n=[];for(const e of t)if(s.filter(e,a,n)){if(!s.shouldContinue(e,a,n))return;if(yield e,s.stackAllItems&&a.push(e),n.push(e),--c<=0)return}const i=s.paginate(e,a,n);if(!1===i)return;i===e.request.options?o=e.request.options:void 0!==i&&(o=p(void 0,i,o)),l++}};(r.paginate=(e,t)=>n(e,t)).all=async(e,t)=>{const n=[];for await(const o of r.paginate(e,t))n.push(o);return n},r.paginate.each=n,r.stream=(e,t)=>r(e,{...t,isStream:!0});for(const e of y)r[e]=(t,n)=>r(t,{...n,method:e}),r.stream[e]=(t,n)=>r(t,{...n,method:e,isStream:!0});return Object.assign(r,{...d,mergeOptions:f}),Object.defineProperty(r,"defaults",{value:e.mutableDefaults?e:u.default(e),writable:e.mutableDefaults,configurable:e.mutableDefaults,enumerable:!0}),r};t.default=b,o(r(242),t)},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.PromisableRequest=void 0;const s=r(28),i=r(42),a=r(202),c=r(17),l=r(239);t.PromisableRequest=l.default;const u=r(82),d=r(83),h=["request","response","redirect","uploadProgress","downloadProgress"];t.default=function e(t){let r,n,o=0;const p=new s.EventEmitter,f=new i((s,i,m)=>{const g=()=>{const{throwHttpErrors:y}=t;y||(t.throwHttpErrors=!0);const v=new l.default(t.url,t);v._noPipe=!0,m(()=>v.destroy());const b=e=>{(async()=>{try{for(const r of t.hooks.beforeError)e=await r(e)}catch(e){return void i(new c.RequestError(e.message,e,v))}i(e)})()};r=v;const w=async r=>{var i;if(r.retryCount=o,r.request.aborted)return;const a=()=>{const{statusCode:e}=r,n=t.followRedirect?299:399;return e>=200&&e<=n||304===e};let u;try{u=await d.default(v),r.rawBody=u}catch(e){return}const h=(null!==(i=r.headers["content-encoding"])&&void 0!==i?i:"").toLowerCase();if(["gzip","deflate","br"].includes(h)&&!t.decompress)r.body=u;else try{r.body=l.parseBody(r,t.responseType,t.parseJson,t.encoding)}catch(e){if(r.body=u.toString(),a())return void b(e)}try{for(const[n,o]of t.hooks.afterResponse.entries())r=await o(r,async r=>{const o=l.default.normalizeArguments(void 0,{...r,retry:{calculateDelay:()=>0},throwHttpErrors:!1,resolveBodyOnly:!1},t);o.hooks.afterResponse=o.hooks.afterResponse.slice(0,n);for(const e of o.hooks.beforeRetry)await e(o);const s=e(o);return m(()=>{s.catch(()=>{}),s.cancel()}),s})}catch(e){return void b(new c.RequestError(e.message,e,v))}!y||a()?(n=r,s(t.resolveBodyOnly?r.body:r)):b(new c.HTTPError(r))},S=async e=>{if(f.isCanceled)return;if(!v.options)return void b(e);let r;v.off("response",w),o++;try{r=await t.retry.calculateDelay({attemptCount:o,retryOptions:t.retry,error:e,computedValue:a.default({attemptCount:o,retryOptions:t.retry,error:e,computedValue:0})})}catch(t){return v.destroy(),void b(new c.RequestError(t.message,e,v))}if(r){v.destroy();setTimeout(async()=>{t.throwHttpErrors=y;try{for(const r of t.hooks.beforeRetry)await r(t,e,o)}catch(t){return v.destroy(),void b(new c.RequestError(t.message,e,v))}g()},r)}else{if(o--,e instanceof c.HTTPError)return w(v._response),void process.nextTick(()=>{v.once("error",S)});v.destroy(),b(e)}};v.once("response",w),v.once("error",S),u.default(v,p,h)};g()});f.on=(e,t)=>(p.on(e,t),f);const m=e=>{const r=(async()=>(await f,l.parseBody(n,e,t.parseJson,t.encoding)))();return Object.defineProperties(r,Object.getOwnPropertyDescriptors(f)),r};return f.json=()=>(r.writableFinished||void 0!==t.headers.accept||(t.headers.accept="application/json"),m("json")),f.buffer=()=>m("buffer"),f.text=()=>m("text"),f},o(r(17),t)},function(e,t){e.exports=require("https")},function(e,t,r){var n=r(211);function o(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function s(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=n(o),e.exports.strict=n(s),o.proto=o((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return o(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return s(this)},configurable:!0})}))},function(e,t,r){"use strict";const n=r(28),o=r(44),s=r(46),i=r(76),a=Symbol("currentStreamsCount"),c=Symbol("request"),l=Symbol("cachedOriginSet"),u=Symbol("gracefullyClosing"),d=["maxDeflateDynamicTableSize","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","localAddress","path","rejectUnauthorized","minDHSize","ca","cert","clientCertEngine","ciphers","key","pfx","servername","minVersion","maxVersion","secureProtocol","crl","honorCipherOrder","ecdhCurve","dhparam","secureOptions","sessionIdContext"],h=(e,t)=>e.remoteSettings.maxConcurrentStreams>t.remoteSettings.maxConcurrentStreams,p=(e,t)=>{for(const r of e)r[l].length<t[l].length&&r[l].every(e=>t[l].includes(e))&&r[a]+t[a]<=t.remoteSettings.maxConcurrentStreams&&m(r)},f=({agent:e,isFree:t})=>{const r={};for(const n in e.sessions){const o=e.sessions[n].filter(e=>{const r=e[g.kCurrentStreamsCount]<e.remoteSettings.maxConcurrentStreams;return t?r:!r});0!==o.length&&(r[n]=o)}return r},m=e=>{e[u]=!0,0===e[a]&&e.close()};class g extends n{constructor({timeout:e=6e4,maxSessions:t=1/0,maxFreeSessions:r=10,maxCachedTlsSessions:n=100}={}){super(),this.sessions={},this.queue={},this.timeout=e,this.maxSessions=t,this.maxFreeSessions=r,this._freeSessionsCount=0,this._sessionsCount=0,this.settings={enablePush:!1},this.tlsSessionCache=new i({maxSize:n})}static normalizeOrigin(e,t){return"string"==typeof e&&(e=new URL(e)),t&&e.hostname!==t&&(e.hostname=t),e.origin}normalizeOptions(e){let t="";if(e)for(const r of d)e[r]&&(t+=":"+e[r]);return t}_tryToCreateNewSession(e,t){if(!(e in this.queue)||!(t in this.queue[e]))return;const r=this.queue[e][t];this._sessionsCount<this.maxSessions&&!r.completed&&(r.completed=!0,r())}getSession(e,t,r){return new Promise((n,o)=>{Array.isArray(r)?(r=[...r],n()):r=[{resolve:n,reject:o}];const i=this.normalizeOptions(t),d=g.normalizeOrigin(e,t&&t.servername);if(void 0===d){for(const{reject:e}of r)e(new TypeError("The `origin` argument needs to be a string or an URL object"));return}if(i in this.sessions){const e=this.sessions[i];let t,n=-1,o=-1;for(const r of e){const e=r.remoteSettings.maxConcurrentStreams;if(e<n)break;if(r[l].includes(d)){const s=r[a];if(s>=e||r[u]||r.destroyed)continue;t||(n=e),s>o&&(t=r,o=s)}}if(t){if(1!==r.length){for(const{reject:e}of r){e(new Error(`Expected the length of listeners to be 1, got ${r.length}.\nPlease report this to https://github.com/szmarczak/http2-wrapper/`))}return}return void r[0].resolve(t)}}if(i in this.queue){if(d in this.queue[i])return this.queue[i][d].listeners.push(...r),void this._tryToCreateNewSession(i,d)}else this.queue[i]={};const f=()=>{i in this.queue&&this.queue[i][d]===y&&(delete this.queue[i][d],0===Object.keys(this.queue[i]).length&&delete this.queue[i])},y=()=>{const n=`${d}:${i}`;let o=!1;try{const g=s.connect(e,{createConnection:this.createConnection,settings:this.settings,session:this.tlsSessionCache.get(n),...t});g[a]=0,g[u]=!1;const v=()=>g[a]<g.remoteSettings.maxConcurrentStreams;let b=!0;g.socket.once("session",e=>{this.tlsSessionCache.set(n,e)}),g.once("error",e=>{for(const{reject:t}of r)t(e);this.tlsSessionCache.delete(n)}),g.setTimeout(this.timeout,()=>{g.destroy()}),g.once("close",()=>{if(o){b&&this._freeSessionsCount--,this._sessionsCount--;const e=this.sessions[i];e.splice(e.indexOf(g),1),0===e.length&&delete this.sessions[i]}else{const e=new Error("Session closed without receiving a SETTINGS frame");e.code="HTTP2WRAPPER_NOSETTINGS";for(const{reject:t}of r)t(e);f()}this._tryToCreateNewSession(i,d)});const w=()=>{if(i in this.queue&&v())for(const e of g[l])if(e in this.queue[i]){const{listeners:t}=this.queue[i][e];for(;0!==t.length&&v();)t.shift().resolve(g);const r=this.queue[i];if(0===r[e].listeners.length&&(delete r[e],0===Object.keys(r).length)){delete this.queue[i];break}if(!v())break}};g.on("origin",()=>{g[l]=g.originSet,v()&&(w(),p(this.sessions[i],g))}),g.once("remoteSettings",()=>{if(g.ref(),g.unref(),this._sessionsCount++,y.destroyed){const e=new Error("Agent has been destroyed");for(const t of r)t.reject(e);g.destroy()}else{g[l]=g.originSet;{const e=this.sessions;if(i in e){const t=e[i];t.splice(((e,t,r)=>{let n=0,o=e.length;for(;n<o;){const s=n+o>>>1;r(e[s],t)?n=s+1:o=s}return n})(t,g,h),0,g)}else e[i]=[g]}this._freeSessionsCount+=1,o=!0,this.emit("session",g),w(),f(),0===g[a]&&this._freeSessionsCount>this.maxFreeSessions&&g.close(),0!==r.length&&(this.getSession(d,t,r),r.length=0),g.on("remoteSettings",()=>{w(),p(this.sessions[i],g)})}}),g[c]=g.request,g.request=(e,t)=>{if(g[u])throw new Error("The session is gracefully closing. No new streams are allowed.");const r=g[c](e,t);return g.ref(),++g[a],g[a]===g.remoteSettings.maxConcurrentStreams&&this._freeSessionsCount--,r.once("close",()=>{if(b=v(),--g[a],!g.destroyed&&!g.closed&&(((e,t)=>{for(const r of e)t[l].length<r[l].length&&t[l].every(e=>r[l].includes(e))&&t[a]+r[a]<=r.remoteSettings.maxConcurrentStreams&&m(t)})(this.sessions[i],g),v()&&!g.closed)){b||(this._freeSessionsCount++,b=!0);const e=0===g[a];e&&g.unref(),e&&(this._freeSessionsCount>this.maxFreeSessions||g[u])?g.close():(p(this.sessions[i],g),w())}}),r}}catch(e){for(const t of r)t.reject(e);f()}};y.listeners=r,y.completed=!1,y.destroyed=!1,this.queue[i][d]=y,this._tryToCreateNewSession(i,d)})}request(e,t,r,n){return new Promise((o,s)=>{this.getSession(e,t,[{reject:s,resolve:e=>{try{o(e.request(r,n))}catch(e){s(e)}}}])})}createConnection(e,t){return g.connect(e,t)}static connect(e,t){t.ALPNProtocols=["h2"];const r=e.port||443,n=e.hostname||e.host;return void 0===t.servername&&(t.servername=n),o.connect(r,n,t)}closeFreeSessions(){for(const e of Object.values(this.sessions))for(const t of e)0===t[a]&&t.close()}destroy(e){for(const t of Object.values(this.sessions))for(const r of t)r.destroy(e);for(const e of Object.values(this.queue))for(const t of Object.values(e))t.destroyed=!0;this.queue={}}get freeSessions(){return f({agent:this,isFree:!0})}get busySessions(){return f({agent:this,isFree:!1})}}g.kCurrentStreamsCount=a,g.kGracefullyClosing=u,e.exports={Agent:g,globalAgent:new g}},function(e,t,r){"use strict";class n{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){if(this.cache.set(e,t),this._size++,this._size>=this.maxSize){if(this._size=0,"function"==typeof this.onEviction)for(const[e,t]of this.oldCache.entries())this.onEviction(e,t);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}}e.exports=n},function(e,t,r){"use strict";const n=r(46),{Writable:o}=r(10),{Agent:s,globalAgent:i}=r(75),a=r(78),c=r(79),l=r(225),u=r(226),{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_PROTOCOL:h,ERR_HTTP_HEADERS_SENT:p,ERR_INVALID_HTTP_TOKEN:f,ERR_HTTP_INVALID_HEADER_VALUE:m,ERR_INVALID_CHAR:g}=r(227),{HTTP2_HEADER_STATUS:y,HTTP2_HEADER_METHOD:v,HTTP2_HEADER_PATH:b,HTTP2_METHOD_CONNECT:w}=n.constants,S=Symbol("headers"),E=Symbol("origin"),_=Symbol("session"),P=Symbol("options"),x=Symbol("flushedHeaders"),k=Symbol("jobs"),C=/^[\^`\-\w!#$%&*+.|~]+$/,T=/[^\t\u0020-\u007E\u0080-\u00FF]/;e.exports=class extends o{constructor(e,t,r){super({autoDestroy:!1});const n="string"==typeof e||e instanceof URL;if(n&&(e=c(e instanceof URL?e:new URL(e))),"function"==typeof t||void 0===t?(r=t,t=n?e:{...e}):t={...e,...t},t.h2session)this[_]=t.h2session;else if(!1===t.agent)this.agent=new s({maxFreeSessions:0});else if(void 0===t.agent||null===t.agent)"function"==typeof t.createConnection?(this.agent=new s({maxFreeSessions:0}),this.agent.createConnection=t.createConnection):this.agent=i;else{if("function"!=typeof t.agent.request)throw new d("options.agent",["Agent-like Object","undefined","false"],t.agent);this.agent=t.agent}if(t.protocol&&"https:"!==t.protocol)throw new h(t.protocol,"https:");const o=t.port||t.defaultPort||this.agent&&this.agent.defaultPort||443,a=t.hostname||t.host||"localhost";delete t.hostname,delete t.host,delete t.port;const{timeout:l}=t;if(t.timeout=void 0,this[S]=Object.create(null),this[k]=[],this.socket=null,this.connection=null,this.method=t.method||"GET",this.path=t.path,this.res=null,this.aborted=!1,this.reusedSocket=!1,t.headers)for(const[e,r]of Object.entries(t.headers))this.setHeader(e,r);t.auth&&!("authorization"in this[S])&&(this[S].authorization="Basic "+Buffer.from(t.auth).toString("base64")),t.session=t.tlsSession,t.path=t.socketPath,this[P]=t,443===o?(this[E]="https://"+a,":authority"in this[S]||(this[S][":authority"]=a)):(this[E]=`https://${a}:${o}`,":authority"in this[S]||(this[S][":authority"]=`${a}:${o}`)),l&&this.setTimeout(l),r&&this.once("response",r),this[x]=!1}get method(){return this[S][v]}set method(e){e&&(this[S][v]=e.toUpperCase())}get path(){return this[S][b]}set path(e){e&&(this[S][b]=e)}get _mustNotHaveABody(){return"GET"===this.method||"HEAD"===this.method||"DELETE"===this.method}_write(e,t,r){if(this._mustNotHaveABody)return void r(new Error("The GET, HEAD and DELETE methods must NOT have a body"));this.flushHeaders();const n=()=>this._request.write(e,t,r);this._request?n():this[k].push(n)}_final(e){if(this.destroyed)return;this.flushHeaders();const t=()=>{this._mustNotHaveABody?e():this._request.end(e)};this._request?t():this[k].push(t)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}_destroy(e,t){this.res&&this.res._dump(),this._request&&this._request.destroy(),t(e)}async flushHeaders(){if(this[x]||this.destroyed)return;this[x]=!0;const e=this.method===w,t=t=>{if(this._request=t,this.destroyed)return void t.destroy();e||l(t,this,["timeout","continue","close","error"]);const r=e=>(...t)=>{this.writable||this.destroyed?this.once("finish",()=>{e(...t)}):e(...t)};t.once("response",r((r,n,o)=>{const s=new a(this.socket,t.readableHighWaterMark);this.res=s,s.req=this,s.statusCode=r[y],s.headers=r,s.rawHeaders=o,s.once("end",()=>{this.aborted?(s.aborted=!0,s.emit("aborted")):(s.complete=!0,s.socket=null,s.connection=null)}),e?(s.upgrade=!0,this.emit("connect",s,t,Buffer.alloc(0))?this.emit("close"):t.destroy()):(t.on("data",e=>{s._dumped||s.push(e)||t.pause()}),t.once("end",()=>{s.push(null)}),this.emit("response",s)||s._dump())})),t.once("headers",r(e=>this.emit("information",{statusCode:e[y]}))),t.once("trailers",r((e,t,r)=>{const{res:n}=this;n.trailers=e,n.rawTrailers=r}));const{socket:n}=t.session;this.socket=n,this.connection=n;for(const e of this[k])e();this.emit("socket",this.socket)};if(this[_])try{t(this[_].request(this[S]))}catch(e){this.emit("error",e)}else{this.reusedSocket=!0;try{t(await this.agent.request(this[E],this[P],this[S]))}catch(e){this.emit("error",e)}}}getHeader(e){if("string"!=typeof e)throw new d("name","string",e);return this[S][e.toLowerCase()]}get headersSent(){return this[x]}removeHeader(e){if("string"!=typeof e)throw new d("name","string",e);if(this.headersSent)throw new p("remove");delete this[S][e.toLowerCase()]}setHeader(e,t){if(this.headersSent)throw new p("set");if("string"!=typeof e||!C.test(e)&&!u(e))throw new f("Header name",e);if(void 0===t)throw new m(t,e);if(T.test(t))throw new g("header content",e);this[S][e.toLowerCase()]=t}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,t){const r=()=>this._request.setTimeout(e,t);return this._request?r():this[k].push(r),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}}},function(e,t,r){"use strict";const{Readable:n}=r(10);e.exports=class extends n{constructor(e,t){super({highWaterMark:t,autoDestroy:!1}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this.connection=e,this._dumped=!1}_destroy(e){this.req._request.destroy(e)}setTimeout(e,t){return this.req.setTimeout(e,t),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}}},function(e,t,r){"use strict";e.exports=e=>{const t={protocol:e.protocol,hostname:"string"==typeof e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return"string"==typeof e.port&&0!==e.port.length&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username||""}:${e.password||""}`),t}},function(e,t){e.exports=require("net")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(12);t.default=e=>n.default.nodeStream(e)&&n.default.function_(e.getBoundary)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){const n={};for(const o of r)n[o]=(...e)=>{t.emit(o,...e)},e.on(o,n[o]);return()=>{for(const t of r)e.off(t,n[t])}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=async e=>{const t=[];let r=0;for await(const n of e)t.push(n),r+=Buffer.byteLength(n);return Buffer.isBuffer(t[0])?Buffer.concat(t,r):Buffer.from(t.join(""))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=new class{}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const c=r(1),l=r(245),u=a(r(41)),d=s(r(86)),h=s(r(2));t.default=new class{getAuthorization(){const e=l.getCodeVerifier();this.codeChallenge=l.getCodeChallenge(e);let t={client_id:"adobe_xd_vscode_extension",redirect_uri:"vscode://adobe.xd/authorize",scope:"openid,AdobeID,creative_sdk,address,email,profile",response_type:"code",code_challenge_method:"S256",code_challenge:e};const r="https://ims-na1.adobelogin.com/ims/authorize/v1?"+d.stringify(t);h.env.openExternal(h.Uri.parse(r)),c.Logger.log("AuthService getAuthorization() url:"+r)}getToken(e){return i(this,void 0,void 0,(function*(){let t={grant_type:"authorization_code",client_id:"adobe_xd_vscode_extension",code:e,code_verifier:this.codeChallenge};const r="https://ims-na1.adobelogin.com/ims/token/v2?"+d.stringify(t);c.Logger.log("AuthService getToken() url:"+r);let n="";try{const e=u.default.post(r);yield e,n=yield e.text();const t=JSON.parse(n).access_token;return t||void(this.codeChallenge="")}catch(e){return void c.Logger.log(e)}}))}}},function(e,t,r){"use strict";const n=r(247),o=r(248),s=r(249);function i(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function a(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function c(e,t){return t.decode?o(e):e}function l(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function u(e){const t=(e=l(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function d(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function h(e,t){i((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return(e,r,n)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};case"comma":case"separator":return(t,r,n)=>{const o="string"==typeof r&&r.split("").indexOf(e.arrayFormatSeparator)>-1?r.split(e.arrayFormatSeparator).map(t=>c(t,e)):null===r?r:c(r,e);n[t]=o};default:return(e,t,r)=>{void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t),n=Object.create(null);if("string"!=typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const o of e.split("&")){let[e,i]=s(t.decode?o.replace(/\+/g," "):o,"=");i=void 0===i?null:["comma","separator"].includes(t.arrayFormat)?i:c(i,t),r(c(e,t),i,n)}for(const e of Object.keys(n)){const r=n[e];if("object"==typeof r&&null!==r)for(const e of Object.keys(r))r[e]=d(r[e],t);else n[e]=d(r,t)}return!1===t.sort?n:(!0===t.sort?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((e,t)=>{const r=n[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(r):e[t]=r,e},Object.create(null))}t.extract=u,t.parse=h,t.stringify=(e,t)=>{if(!e)return"";i((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const r=r=>t.skipNull&&null==e[r]||t.skipEmptyString&&""===e[r],n=function(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{const o=r.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[a(t,e),"[",o,"]"].join("")]:[...r,[a(t,e),"[",a(o,e),"]=",a(n,e)].join("")]};case"bracket":return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[a(t,e),"[]"].join("")]:[...r,[a(t,e),"[]=",a(n,e)].join("")];case"comma":case"separator":return t=>(r,n)=>null==n||0===n.length?r:0===r.length?[[a(t,e),"=",a(n,e)].join("")]:[[r,a(n,e)].join(e.arrayFormatSeparator)];default:return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,a(t,e)]:[...r,[a(t,e),"=",a(n,e)].join("")]}}(t),o={};for(const t of Object.keys(e))r(t)||(o[t]=e[t]);const s=Object.keys(o);return!1!==t.sort&&s.sort(t.sort),s.map(r=>{const o=e[r];return void 0===o?"":null===o?a(r,t):Array.isArray(o)?o.reduce(n(r),[]).join("&"):a(r,t)+"="+a(o,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[r,n]=s(e,"#");return Object.assign({url:r.split("?")[0]||"",query:h(u(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:c(n,t)}:{})},t.stringifyUrl=(e,r)=>{r=Object.assign({encode:!0,strict:!0},r);const n=l(e.url).split("?")[0]||"",o=t.extract(e.url),s=t.parse(o,{sort:!1}),i=Object.assign(s,e.query);let c=t.stringify(i,r);c&&(c="?"+c);let u=function(e){let t="";const r=e.indexOf("#");return-1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(u="#"+a(e.fragmentIdentifier,r)),`${n}${c}${u}`}},function(e,t,r){"use strict";r.r(t),r.d(t,"v1",(function(){return p})),r.d(t,"v3",(function(){return m})),r.d(t,"v4",(function(){return g})),r.d(t,"v5",(function(){return y}));var n=r(8),o=r.n(n);const s=new Uint8Array(16);function i(){return o.a.randomFillSync(s)}const a=[];for(let e=0;e<256;++e)a.push((e+256).toString(16).substr(1));var c=function(e,t){const r=t||0;return(a[e[r+0]]+a[e[r+1]]+a[e[r+2]]+a[e[r+3]]+"-"+a[e[r+4]]+a[e[r+5]]+"-"+a[e[r+6]]+a[e[r+7]]+"-"+a[e[r+8]]+a[e[r+9]]+"-"+a[e[r+10]]+a[e[r+11]]+a[e[r+12]]+a[e[r+13]]+a[e[r+14]]+a[e[r+15]]).toLowerCase()};let l,u,d=0,h=0;var p=function(e,t,r){let n=t&&r||0;const o=t||new Array(16);let s=(e=e||{}).node||l,a=void 0!==e.clockseq?e.clockseq:u;if(null==s||null==a){const t=e.random||(e.rng||i)();null==s&&(s=l=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==a&&(a=u=16383&(t[6]<<8|t[7]))}let p=void 0!==e.msecs?e.msecs:Date.now(),f=void 0!==e.nsecs?e.nsecs:h+1;const m=p-d+(f-h)/1e4;if(m<0&&void 0===e.clockseq&&(a=a+1&16383),(m<0||p>d)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=p,h=f,u=a,p+=122192928e5;const g=(1e4*(268435455&p)+f)%4294967296;o[n++]=g>>>24&255,o[n++]=g>>>16&255,o[n++]=g>>>8&255,o[n++]=255&g;const y=p/4294967296*1e4&268435455;o[n++]=y>>>8&255,o[n++]=255&y,o[n++]=y>>>24&15|16,o[n++]=y>>>16&255,o[n++]=a>>>8|128,o[n++]=255&a;for(let e=0;e<6;++e)o[n+e]=s[e];return t||c(o)};var f=function(e,t,r){function n(e,n,o,s){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=function(e){const t=[];return e.replace(/[a-fA-F0-9]{2}/g,(function(e){t.push(parseInt(e,16))})),t}(n)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(n)||16!==n.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");const i=r(n.concat(e));if(i[6]=15&i[6]|t,i[8]=63&i[8]|128,o){s=s||0;for(let e=0;e<16;++e)o[s+e]=i[e];return o}return c(i)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n};var m=f("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o.a.createHash("md5").update(e).digest()}));var g=function(e,t,r){const n=(e=e||{}).random||(e.rng||i)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return c(n)};var y=f("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o.a.createHash("sha1").update(e).digest()}))},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const c=r(1),l=s(r(2)),u=a(r(110)),d=r(164),h=r(250),p=a(r(27)),f=r(251),m=r(14),g=r(252),y=a(r(0)),v=r(26);t.activate=function(e){p.default.initialize(e),e.subscriptions.push(l.commands.registerCommand("xd.toggle",t=>{m.WebViewPanel.currentPanel?m.WebViewPanel.currentPanel.active?m.WebViewPanel.currentPanel.dispose():m.WebViewPanel.currentPanel.reveal():(m.WebViewPanel.createOrShow(e.extensionPath,t),d.WebViewPanelHandlers.addHandlers(m.WebViewPanel.currentPanel))}),l.commands.registerCommand("xd.exportLog",()=>i(this,void 0,void 0,(function*(){const e=l.workspace.workspaceFolders;if(e){const t=l.Uri.file(y.default.join(e[0].uri.path,"xd_vscode.log")),r=yield l.window.showSaveDialog({defaultUri:t});r&&v.writeAsync(r.path,c.Logger.exportLog())}})))),e.subscriptions.push(l.commands.registerCommand(u.default.name,u.default.execute));let t=l.window.createStatusBarItem(l.StatusBarAlignment.Right,100),r="darwin"==process.platform?"Command":"Control";t.text="$(browser) "+c.getString("Button.Toggle"),t.tooltip=c.getString("Button.Toggle.Tooltip",{key:r}),t.command="xd.toggle",e.subscriptions.push(t),t.show(),e.subscriptions.push(l.languages.registerCompletionItemProvider({scheme:"file"},new f.ComponentCompletionProvider)),e.subscriptions.push(l.window.registerUriHandler(new g.UriHandler)),e.subscriptions.push(new h.WindowHandlers),l.window.registerWebviewPanelSerializer&&l.window.registerWebviewPanelSerializer(m.WebViewPanel.viewType,{deserializeWebviewPanel(t,r){return i(this,void 0,void 0,(function*(){console.log("Got state"),console.log(r),m.WebViewPanel.revive(t,e.extensionPath),d.WebViewPanelHandlers.addHandlers(m.WebViewPanel.currentPanel)}))}})},t.deactivate=function(){c.Logger.log("Extension Deactivated")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CCRenditionType=t.CCElementType=void 0,function(e){e[e.Unknown=0]="Unknown",e[e.Color=1]="Color",e[e.CharacterStyle=2]="CharacterStyle",e[e.Image=3]="Image",e[e.Component=4]="Component"}(t.CCElementType||(t.CCElementType={})),function(e){e[e.Unknown=0]="Unknown",e[e.Png=1]="Png",e[e.Svg=2]="Svg",e[e.Agc=3]="Agc"}(t.CCRenditionType||(t.CCRenditionType={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetCCLUrlsFromDSP=t.MergeCCElementsWithEntities=t.CCElementToComponent=t.CCElementToFontToken=t.createFontKeyName=t.CCElementToColorToken=t.CCElementFromJson=void 0;const n=r(1),o=r(91),s=r(49),i=r(87),a={"image/png":n.CCRenditionType.Png,"image/svg+xml":n.CCRenditionType.Svg,"application/vnd.adobe.element.agc+json":n.CCRenditionType.Agc},c=e=>e in a?a[e]:n.CCRenditionType.Unknown,l={"application/vnd.adobe.element.image+dcx":n.CCElementType.Image,"application/vnd.adobe.element.component+dcx":n.CCElementType.Component,"application/vnd.adobe.element.color+dcx":n.CCElementType.Color,"application/vnd.adobe.element.characterstyle+dcx":n.CCElementType.CharacterStyle},u=e=>e in l?l[e]:n.CCElementType.Unknown;t.CCElementFromJson=e=>{const t={id:e.id,name:e.name,createdDate:new Date(e.created_date),modifiedDate:new Date(e.modified_date),type:u(e.type),renditions:[]},r=e.representations;let n=e.thumbnail.rendition+"";const o=n.split("/");o.pop(),o.pop(),n=o.join("/");for(let e of r){let r={id:e.id,hash256:e["library#sha256"],type:c(e.type)};const o=e["color#data"];if(o)t.value={mode:o.mode,type:o.type,alpha:o.alpha,rgb:[o.value.r,o.value.g,o.value.b]};else{const o=e["characterstyle#data"];if(o){t.family=o.fontFamily,t.style=o.fontStyle;const e=o.color;if(e){const r=e[0];t.color={mode:r.mode,type:r.type,alpha:r.alpha,rgb:[r.value.r,r.value.g,r.value.b]}}const r=o.fontSize;r&&(t.size={type:r.type,value:r.value})}r.url=`${n}/${e.id}`}t.renditions.push(r)}return t},t.CCElementToColorToken=(e,t)=>{var r,a,c;const l=o.rgb((null===(r=e.value)||void 0===r?void 0:r.rgb)||"");return{class:n.EntityClass.Token,type:n.EntityType.Color,name:e.name||e.id,tags:[],id:i.v4(),value:s.changeAlpha(l.hex(),(null===(a=e.value)||void 0===a?void 0:a.alpha)?100*(null===(c=e.value)||void 0===c?void 0:c.alpha):100),[n.adobeCClibID]:{source:t||"",id:e.id,last_sync:new Date,sync:!0}}},t.createFontKeyName=(e,t)=>`${e}-${t}`,t.CCElementToFontToken=(e,r)=>{var o,s;const a=i.v4();return{class:n.EntityClass.Collection,type:n.EntityType.Font,name:e.name||e.id,tags:[],related_entity_ids:[],id:a,tokens:[{key:n.FontKey.Family,id:a,name:t.createFontKeyName(e.name,n.FontKey.Family),class:n.EntityClass.Token,type:n.EntityType.Custom,tags:[],value:e.family},{key:n.FontKey.Weight,id:a,name:t.createFontKeyName(e.name,n.FontKey.Weight),class:n.EntityClass.Token,type:n.EntityType.Custom,tags:[],value:e.style},{key:n.FontKey.Size,id:a,name:t.createFontKeyName(e.name,n.FontKey.Size),class:n.EntityClass.Token,type:n.EntityType.Size,tags:[],value:null===(s=null===(o=e.size)||void 0===o?void 0:o.value)||void 0===s?void 0:s.toString()}],[n.adobeCClibID]:{source:r||"",id:e.id,last_sync:new Date,sync:!0}}},t.CCElementToComponent=(e,t)=>({class:n.EntityClass.Component,type:n.EntityType.Page,tags:[],id:i.v4(),related_entity_ids:[],snippets:{trigger:"",languages:{}},name:e.name||e.id,[n.adobeCClibID]:{source:t||"",id:e.id,last_sync:new Date,sync:!0}}),t.MergeCCElementsWithEntities=(e,t,r=!1)=>{const o=[...e];let s=[...t];return o.map(e=>{if(s.some(t=>{var r,o;return(null===(r=t[n.adobeCClibID])||void 0===r?void 0:r.id)===(null===(o=e[n.adobeCClibID])||void 0===o?void 0:o.id)})){const t=s.filter(t=>{var r,o;return(null===(r=t[n.adobeCClibID])||void 0===r?void 0:r.id)===(null===(o=e[n.adobeCClibID])||void 0===o?void 0:o.id)})||[];if(r){if(t.length>1){const r=t.sort((e,t)=>{var r,o,s,i;return((null===(o=null===(r=t[n.adobeCClibID])||void 0===r?void 0:r.last_sync)||void 0===o?void 0:o.getTime())||0)-((null===(i=null===(s=e[n.adobeCClibID])||void 0===s?void 0:s.last_sync)||void 0===i?void 0:i.getTime())||0)})[0],o=s.findIndex(e=>e.id===r.id);o>-1&&s.splice(o,1,e)}else if(t.length>0){const r=t[0];(r.name!==e.name||"value"in r&&"value"in e&&r.value!==e.value)&&s.push(e)}}else t.map(t=>{const r=s.find(e=>e[n.adobeCClibID]===t[n.adobeCClibID]);if(r)switch(r.name=e.name,r.type){case n.EntityType.Color:e.type===n.EntityType.Color&&(r.value=e.value);break;case n.EntityType.Font:e.type===n.EntityType.Font&&(r.tokens=e.tokens)}})}else s.push(e)}),s},t.GetCCLUrlsFromDSP=e=>{var t,r,o;const s=((null===(t=e.colors.filter(e=>void 0!==e[n.adobeCClibID]))||void 0===t?void 0:t.map(e=>{var t;return(null===(t=e[n.adobeCClibID])||void 0===t?void 0:t.source)||""}))||[]).concat((null===(r=e.fonts.filter(e=>void 0!==e[n.adobeCClibID]))||void 0===r?void 0:r.map(e=>{var t;return(null===(t=e[n.adobeCClibID])||void 0===t?void 0:t.source)||""}))||[],(null===(o=e.components.filter(e=>void 0!==e[n.adobeCClibID]))||void 0===o?void 0:o.map(e=>{var t;return(null===(t=e[n.adobeCClibID])||void 0===t?void 0:t.source)||""}))||[]);return[...new Set([...s])]}},function(e,t,r){"use strict";var n=r(92),o=r(95),s=[].slice,i=["keyword","gray","hex"],a={};Object.keys(o).forEach((function(e){a[s.call(o[e].labels).sort().join("")]=e}));var c={};function l(e,t){if(!(this instanceof l))return new l(e,t);if(t&&t in i&&(t=null),t&&!(t in o))throw new Error("Unknown model: "+t);var r,u;if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof l)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if("string"==typeof e){var d=n.get(e);if(null===d)throw new Error("Unable to parse color from string: "+e);this.model=d.model,u=o[this.model].channels,this.color=d.value.slice(0,u),this.valpha="number"==typeof d.value[u]?d.value[u]:1}else if(e.length){this.model=t||"rgb",u=o[this.model].channels;var h=s.call(e,0,u);this.color=p(h,u),this.valpha="number"==typeof e[u]?e[u]:1}else if("number"==typeof e)e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;var f=Object.keys(e);"alpha"in e&&(f.splice(f.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0);var m=f.sort().join("");if(!(m in a))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=a[m];var g=o[this.model].labels,y=[];for(r=0;r<g.length;r++)y.push(e[g[r]]);this.color=p(y)}if(c[this.model])for(u=o[this.model].channels,r=0;r<u;r++){var v=c[this.model][r];v&&(this.color[r]=v(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function u(e,t,r){return(e=Array.isArray(e)?e:[e]).forEach((function(e){(c[e]||(c[e]=[]))[t]=r})),e=e[0],function(n){var o;return arguments.length?(r&&(n=r(n)),(o=this[e]()).color[t]=n,o):(o=this[e]().color[t],r&&(o=r(o)),o)}}function d(e){return function(t){return Math.max(0,Math.min(e,t))}}function h(e){return Array.isArray(e)?e:[e]}function p(e,t){for(var r=0;r<t;r++)"number"!=typeof e[r]&&(e[r]=0);return e}l.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in n.to?this:this.rgb(),r=1===(t=t.round("number"==typeof e?e:1)).valpha?t.color:t.color.concat(this.valpha);return n.to[t.model](r)},percentString:function(e){var t=this.rgb().round("number"==typeof e?e:1),r=1===t.valpha?t.color:t.color.concat(this.valpha);return n.to.rgb.percent(r)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=o[this.model].channels,r=o[this.model].labels,n=0;n<t;n++)e[r[n]]=this.color[n];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new l(this.color.map(function(e){return function(t){return function(e,t){return Number(e.toFixed(t))}(t,e)}}(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new l(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:u("rgb",0,d(255)),green:u("rgb",1,d(255)),blue:u("rgb",2,d(255)),hue:u(["hsl","hsv","hsl","hwb","hcg"],0,(function(e){return(e%360+360)%360})),saturationl:u("hsl",1,d(100)),lightness:u("hsl",2,d(100)),saturationv:u("hsv",1,d(100)),value:u("hsv",2,d(100)),chroma:u("hcg",1,d(100)),gray:u("hcg",2,d(100)),white:u("hwb",1,d(100)),wblack:u("hwb",2,d(100)),cyan:u("cmyk",0,d(100)),magenta:u("cmyk",1,d(100)),yellow:u("cmyk",2,d(100)),black:u("cmyk",3,d(100)),x:u("xyz",0,d(100)),y:u("xyz",1,d(100)),z:u("xyz",2,d(100)),l:u("lab",0,d(100)),a:u("lab",1),b:u("lab",2),keyword:function(e){return arguments.length?new l(e):o[this.model].keyword(this.color)},hex:function(e){return arguments.length?new l(e):n.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity:function(){for(var e=this.rgb().color,t=[],r=0;r<e.length;r++){var n=e[r]/255;t[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return l.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),r=t.color[0];return r=(r=(r+e)%360)<0?360+r:r,t.color[0]=r,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var r=e.rgb(),n=this.rgb(),o=void 0===t?.5:t,s=2*o-1,i=r.alpha()-n.alpha(),a=((s*i==-1?s:(s+i)/(1+s*i))+1)/2,c=1-a;return l.rgb(a*r.red()+c*n.red(),a*r.green()+c*n.green(),a*r.blue()+c*n.blue(),r.alpha()*o+n.alpha()*(1-o))}},Object.keys(o).forEach((function(e){if(-1===i.indexOf(e)){var t=o[e].channels;l.prototype[e]=function(){if(this.model===e)return new l(this);if(arguments.length)return new l(arguments,e);var r="number"==typeof arguments[t]?t:this.valpha;return new l(h(o[this.model][e].raw(this.color)).concat(r),e)},l[e]=function(r){return"number"==typeof r&&(r=p(s.call(arguments),t)),new l(r,e)}}})),e.exports=l},function(e,t,r){var n=r(47),o=r(93),s={};for(var i in n)n.hasOwnProperty(i)&&(s[n[i]]=i);var a=e.exports={to:{},get:{}};function c(e,t,r){return Math.min(Math.max(t,e),r)}function l(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}a.get=function(e){var t,r;switch(e.substring(0,3).toLowerCase()){case"hsl":t=a.get.hsl(e),r="hsl";break;case"hwb":t=a.get.hwb(e),r="hwb";break;default:t=a.get.rgb(e),r="rgb"}return t?{model:r,value:t}:null},a.get.rgb=function(e){if(!e)return null;var t,r,o,s=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(o=t[2],t=t[1],r=0;r<3;r++){var i=2*r;s[r]=parseInt(t.slice(i,i+2),16)}o&&(s[3]=Math.round(parseInt(o,16)/255*100)/100)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(o=(t=t[1])[3],r=0;r<3;r++)s[r]=parseInt(t[r]+t[r],16);o&&(s[3]=Math.round(parseInt(o+o,16)/255*100)/100)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(r=0;r<3;r++)s[r]=parseInt(t[r+1],0);t[4]&&(s[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(t=e.match(/(\D+)/))?"transparent"===t[1]?[0,0,0,0]:(s=n[t[1]])?(s[3]=1,s):null:null;for(r=0;r<3;r++)s[r]=Math.round(2.55*parseFloat(t[r+1]));t[4]&&(s[3]=parseFloat(t[4]))}for(r=0;r<3;r++)s[r]=c(s[r],0,255);return s[3]=c(s[3],0,1),s},a.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var r=parseFloat(t[4]);return[(parseFloat(t[1])+360)%360,c(parseFloat(t[2]),0,100),c(parseFloat(t[3]),0,100),c(isNaN(r)?1:r,0,1)]}return null},a.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var r=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,c(parseFloat(t[2]),0,100),c(parseFloat(t[3]),0,100),c(isNaN(r)?1:r,0,1)]}return null},a.to.hex=function(){var e=o(arguments);return"#"+l(e[0])+l(e[1])+l(e[2])+(e[3]<1?l(Math.round(255*e[3])):"")},a.to.rgb=function(){var e=o(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},a.to.rgb.percent=function(){var e=o(arguments),t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"},a.to.hsl=function(){var e=o(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},a.to.hwb=function(){var e=o(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},a.to.keyword=function(e){return s[e.slice(0,3)]}},function(e,t,r){"use strict";var n=r(94),o=Array.prototype.concat,s=Array.prototype.slice,i=e.exports=function(e){for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r];n(a)?t=o.call(t,s.call(a)):t.push(a)}return t};i.wrap=function(e){return function(){return e(i(arguments))}}},function(e,t){e.exports=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},function(e,t,r){var n=r(48),o=r(96),s={};Object.keys(n).forEach((function(e){s[e]={},Object.defineProperty(s[e],"channels",{value:n[e].channels}),Object.defineProperty(s[e],"labels",{value:n[e].labels});var t=o(e);Object.keys(t).forEach((function(r){var n=t[r];s[e][r]=function(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var r=e(t);if("object"==typeof r)for(var n=r.length,o=0;o<n;o++)r[o]=Math.round(r[o]);return r};return"conversion"in e&&(t.conversion=e.conversion),t}(n),s[e][r].raw=function(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(n)}))})),e.exports=s},function(e,t,r){var n=r(48);function o(e){var t=function(){for(var e={},t=Object.keys(n),r=t.length,o=0;o<r;o++)e[t[o]]={distance:-1,parent:null};return e}(),r=[e];for(t[e].distance=0;r.length;)for(var o=r.pop(),s=Object.keys(n[o]),i=s.length,a=0;a<i;a++){var c=s[a],l=t[c];-1===l.distance&&(l.distance=t[o].distance+1,l.parent=o,r.unshift(c))}return t}function s(e,t){return function(r){return t(e(r))}}function i(e,t){for(var r=[t[e].parent,e],o=n[t[e].parent][e],i=t[e].parent;t[i].parent;)r.unshift(t[i].parent),o=s(n[t[i].parent][i],o),i=t[i].parent;return o.conversion=r,o}e.exports=function(e){for(var t=o(e),r={},n=Object.keys(t),s=n.length,a=0;a<s;a++){var c=n[a];null!==t[c].parent&&(r[c]=i(c,t))}return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenFilterType=void 0,function(e){e.Color="color",e.Size="size",e.Custom="custom",e.Alias="alias"}(t.TokenFilterType||(t.TokenFilterType={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastSectionOfPath=t.isDesignTokenEntity=t.supportedComponentPreviewTypes=t.CreateEmptyFile=t.DefaultIntroductionDocID=t.createNewFontKeyEntity=t.createNewComponentEnity=t.createNewFontTokenEntity=t.createNewDesignTokenEntity=t.createNewDocumentationEntity=t.createNewCategory=t.getDefaultCategory=t.JsonDateReviver=t.BaseEntityJSONReplacer=t.DSPComponentsToJson=t.DSPDocsToJson=t.DSPFontsToJSON=t.DSPTokensToJSON=t.DSPFileToJson=t.DSPJsonToFile=t.FontEntityToJson=t.isReferenceValue=t.sanitizeValueForSD=t.getCleanReferenceValue=t.buildAllTokensCache=t.containsDuplicates=t.CircularReferenceError=t.MaxDepthExceededError=t.getSourceForReferenceValue=t.getSourceForAlias=t.deleteCategory=t.updateCategories=t.updateSettings=t.refreshReferences=t.deleteToken=t.updateToken=t.MAX_NESTED_ALIASES=t.ReferenceValueRegex=t.DEFAULT_BUILD_PARAMS=t.DOCS_FILE_NAME=t.COMPONENTS_FILE_NAME=t.FONTS_FILE_NAME=t.TOKENS_FILE_NAME=t.MAIN_FILE_NAME=t.DATA_FOLDER_NAME=void 0;const n=r(18),o=r(87),s=r(30),i=r(1),a=r(50);t.DATA_FOLDER_NAME="data",t.MAIN_FILE_NAME="dsp.json",t.TOKENS_FILE_NAME="tokens.json",t.FONTS_FILE_NAME="fonts.json",t.COMPONENTS_FILE_NAME="components.json",t.DOCS_FILE_NAME="docs.json",t.DEFAULT_BUILD_PARAMS="./config.js",t.ReferenceValueRegex=/(?<={)[\s\w\-\.]+(?=})/,t.MAX_NESTED_ALIASES=5,t.updateToken=(e,r,s)=>{const a=i.deepClone(e);if(!s)return a;const l=r.tokens.get(s.id);let u;if(l){let e;const t=c(a,l);if(e=t.find(e=>e.id===s.id),e&&(null==e?void 0:e.type)!==s.type||s.type===n.EntityType.Page&&s.class!==e.class){t.splice(t.findIndex(t=>t.id===e.id),1);const r=c(a,s);Object.assign(e,s),r.push(e)}else e&&Object.assign(e,s);u=e}else{s.id||(s.id=o.v4());c(a,s).push(s),u=s}return u.last_updated=new Date,u.last_updated_by=null==e?void 0:e.author,t.refreshReferences(a),a};const c=(e,t)=>{switch(t.type){case n.EntityType.Color:return e.colors;case n.EntityType.Font:return e.fonts;case n.EntityType.Custom:return e.custom;case n.EntityType.Size:return e.sizes;case n.EntityType.Alias:return e.aliases;case n.EntityType.Page:if(t.class===n.EntityClass.Document)return e.docs;if(t.class===n.EntityClass.Component)return e.components;break;default:console.log("ERROR: existing token not found")}return[]};t.deleteToken=(e,r,o)=>{if(!e)return e;const s=i.deepClone(e);if(r.tokens.has(o.id)){switch(o.type){case n.EntityType.Color:s.colors=s.colors.filter(e=>e.id!==o.id);break;case n.EntityType.Font:s.fonts=s.fonts.filter(e=>e.id!==o.id);break;case n.EntityType.Custom:s.custom=s.custom.filter(e=>e.id!==o.id);break;case n.EntityType.Size:s.sizes=s.sizes.filter(e=>e.id!==o.id);break;case n.EntityType.Alias:s.aliases=s.aliases.filter(e=>e.id!==o.id);break;case n.EntityType.Page:o.class===n.EntityClass.Document?s.docs=s.docs.filter(e=>e.id!==o.id):o.class===n.EntityClass.Component&&(s.components=s.components.filter(e=>e.id!==o.id));break;default:console.log("ERROR: existing token not found")}t.refreshReferences(s)}return s},t.refreshReferences=e=>{const t=t=>{for(let r=0;r<t.length;r++){const n=t[r];n.usedBy=l(e,n);const o=u(e.aliases,n.name);n.aliases=Array.isArray(o)?o.map(e=>e.name):o}};t(e.aliases),t(e.colors),t(e.custom),t(e.fonts),t(e.sizes)},t.updateSettings=(e,t)=>{if(e){const r=i.deepClone(e);return r.settings=t,r}},t.updateCategories=(e,t)=>{if(e){const r=i.deepClone(e),n=r.categories.find(e=>e.id==t.id);return n?n.label=t.label:r.categories.push(t),r}},t.deleteCategory=(e,t)=>{if(e){const r=i.deepClone(e);r.categories=r.categories.filter(e=>e.id!==t.id);const n=e=>{e.map(e=>{e.category_id==t.id&&(e.category_id=void 0)})};return[r.colors,r.custom,r.sizes,r.aliases].map(e=>n(e)),r}};const l=(e,t)=>{let r=[];if(!e)return r;r=e.components.filter(e=>e.related_entity_ids.some(e=>e===t.id||e===t.name)).map(e=>e.name);const n=u(e.aliases,t.name);if(Array.isArray(n)){for(let t of n){const n=e.components.filter(e=>e.related_entity_ids.some(e=>e===t.id||e===t.name)).map(e=>e.name);r=[...new Set([...r,...n])]}return r}return n},u=(e,r)=>{let n=[];const o=r=>{const s=e.find(e=>e.name===r);if(s&&n.push(s),t.containsDuplicates(n.map(e=>e.name)))throw new h;const i=e.filter(e=>e.value===`{${r}}`);i.length&&i.map(e=>o(e.name))};try{o(t.getCleanReferenceValue(r))}catch(e){return e}return n};t.getSourceForAlias=(e,r)=>{const o=(s,i)=>{const a=t.getCleanReferenceValue(s),c=e.get(a);if(c)return c.type===n.EntityType.Alias?c.value===r.value?new h:i<t.MAX_NESTED_ALIASES?o(c.value,i+1):new d:c};return o(r.value,0)},t.getSourceForReferenceValue=(e,r)=>{const n=(o,s)=>{const i=t.getCleanReferenceValue(o),a=e.get(i);if(a)return t.isReferenceValue(a.value)?a.value===r?new h:s<t.MAX_NESTED_ALIASES?n(a.value,s+1):new d:a};return n(r,0)};class d extends Error{constructor(){super(...arguments),this.toString=()=>"[MaxDepthExceededError]"}}t.MaxDepthExceededError=d;class h extends Error{constructor(){super(...arguments),this.toString=()=>"[CircularReferenceError]"}}t.CircularReferenceError=h,t.containsDuplicates=e=>new Set(e).size!==e.length,t.buildAllTokensCache=e=>{const t=new Map,r=[],o=new Map,s=e=>{for(let t=0;t<e.length;t++){const n=e[t];r.push(n),o.set(n.id,n)}},i=e=>{for(let n=0;n<e.length;n++){const s=e[n];t.set(s.name,s),r.push(s),o.set(s.id,s)}};return i(e.colors),i(e.sizes),i(e.custom),i(e.aliases),e.fonts.map(e=>{e.tokens.map(t=>{switch(t.key){case n.FontKey.Family:t.name=e.name+"-family";break;case n.FontKey.Weight:t.name=e.name+"-weight";break;case n.FontKey.Size:t.name=e.name+"-size"}}),i(e.tokens)}),s(e.components),s(e.docs),s(e.fonts),{entityList:r,tokenEntityMap:t,tokens:o}},t.getCleanReferenceValue=(e,r=!1,n=!1)=>{const o=null==e?void 0:e.match(t.ReferenceValueRegex);let s=(null==o?void 0:o.length)?o[0]:e;return n&&(s=s.replace(/(-family|-weight|-size)$/gi,"")),r?t.sanitizeValueForSD(s):s},t.sanitizeValueForSD=e=>e.split(".").join("_"),t.isReferenceValue=e=>{var r;return((null===(r=null==e?void 0:e.match(t.ReferenceValueRegex))||void 0===r?void 0:r.length)||0)>0},t.FontEntityToJson=e=>({class:e.class,type:e.type,id:e.id,name:e.name,last_updated:e.last_updated,last_updated_by:e.last_updated_by,description:e.description,tags:e.tags,related_entity_ids:e.related_entity_ids,[n.adobeCClibID]:e[n.adobeCClibID],tokens:e.tokens.map(e=>{let t={id:e.id,type:e.type};switch(e.type){case n.EntityType.Size:t.value=e.value;case n.EntityType.Custom:default:t.value=e.value}return t.key=e.key,t})}),t.DSPJsonToFile=e=>({dspVersion:e.dsp_spec_version,author:e.last_updated_by,lastModified:e.last_updated,categories:[],colors:[],fonts:[],custom:[],sizes:[],aliases:[],components:[],docs:[],settings:e.settings}),t.DSPFileToJson=e=>({dsp_spec_version:e.dspVersion,last_updated_by:e.author,last_updated:e.lastModified||new Date,settings:e.settings,import:[{src:`${t.DATA_FOLDER_NAME}/${t.TOKENS_FILE_NAME}`},{src:`${t.DATA_FOLDER_NAME}/${t.FONTS_FILE_NAME}`},{src:`${t.DATA_FOLDER_NAME}/${t.COMPONENTS_FILE_NAME}`},{src:`${t.DATA_FOLDER_NAME}/${t.DOCS_FILE_NAME}`}]}),t.DSPTokensToJSON=e=>({dsp_spec_version:e.dspVersion,last_updated_by:e.author,last_updated:e.lastModified||new Date,entities:[].concat(e.colors,e.sizes,e.custom,e.aliases),categories:e.categories}),t.DSPFontsToJSON=e=>({dsp_spec_version:e.dspVersion,last_updated_by:e.author,last_updated:e.lastModified||new Date,entities:e.fonts.map(e=>t.FontEntityToJson(e))}),t.DSPDocsToJson=e=>({dsp_spec_version:e.dspVersion,last_updated_by:e.author,last_updated:e.lastModified||new Date,entities:e.docs}),t.DSPComponentsToJson=e=>({dsp_spec_version:e.dspVersion,last_updated_by:e.author,last_updated:e.lastModified||new Date,entities:e.components}),t.BaseEntityJSONReplacer=(e,t)=>{switch(e){case"filter":case"aliases":case"usedBy":case"__previewImage":case"__previewImagePath":return;default:return t}},t.JsonDateReviver=(e,t)=>{switch(e){case"last_updated":case"last_sync":return new Date(t);default:return t}},t.getDefaultCategory=()=>({id:"2bb1e759-5ba4-4dd7-a333-dcd47313081d",label:s.getString("Menu.Label.Uncategorized"),isDefault:!0}),t.createNewCategory=()=>({id:o.v4(),label:s.getString("Category.New.Label")}),t.createNewDocumentationEntity=()=>({id:o.v4(),class:n.EntityClass.Document,type:n.EntityType.Page,name:s.getString("Tokens.Docs.New.Title"),description:s.getString("Tokens.Docs.New.Markdown"),tags:[]}),t.createNewDesignTokenEntity=()=>({id:"",class:n.EntityClass.Token,type:n.EntityType.Custom,name:"",description:"",value:"",tags:[]}),t.createNewFontTokenEntity=()=>({id:"",class:n.EntityClass.Collection,type:n.EntityType.Font,name:"",description:"",tags:[],related_entity_ids:[],tokens:[t.createNewFontKeyEntity(n.FontKey.Family),t.createNewFontKeyEntity(n.FontKey.Weight),t.createNewFontKeyEntity(n.FontKey.Size)]}),t.createNewComponentEnity=()=>({id:o.v4(),class:n.EntityClass.Component,type:n.EntityType.Page,related_entity_ids:[],snippets:{trigger:"",languages:{}},renditions:[],name:s.getString("Components.New.Label"),tags:[]}),t.createNewFontKeyEntity=e=>({id:"",name:"",class:n.EntityClass.Token,key:e,tags:[],type:n.EntityType.Custom,value:""}),t.DefaultIntroductionDocID="D5BB331A-2483-4CC5-BCB7-82FFDC412B36",t.CreateEmptyFile=e=>({dspVersion:"0.0.1",author:"",lastModified:new Date,categories:[],docs:[{class:n.EntityClass.Document,type:n.EntityType.Page,id:t.DefaultIntroductionDocID,name:s.getString("Onboarding.Introduction.Title"),description:e?e.colorCount||e.characterCount||e.componentCount?s.getString("Onboarding.CCIntroduction.Markdown",e):s.getString("Onboarding.CCIntroduction.Markdown.Empty",e):s.getString("Onboarding.Introduction.Markdown"),tags:[]},{class:n.EntityClass.Document,type:n.EntityType.Page,id:o.v4(),name:s.getString("Onboarding.Principles.Title"),description:s.getString("Onboarding.Principles.Markdown"),tags:[]}],settings:{name:"",package_version:"0.0.1",build_tool:"StyleDictionary",snippet_trigger_prefix:"xd_",build_status_label:"dev",build_params:t.DEFAULT_BUILD_PARAMS,languages:a.SupportedLanguagesList},components:[],sizes:[],custom:[],colors:[],aliases:[],fonts:[]}),t.supportedComponentPreviewTypes=["svg","png"],t.isDesignTokenEntity=e=>{switch(e.type){case n.EntityType.Color:case n.EntityType.Font:case n.EntityType.Size:case n.EntityType.Custom:case n.EntityType.Alias:return!0;default:return!1}},t.getLastSectionOfPath=e=>{let t=e.substring(e.lastIndexOf("/"));return t===e&&(t=e.substring(e.lastIndexOf("\\"))),t}},function(e){e.exports=JSON.parse('{"GLOBAL.App_Name":"Adobe XD","GLOBAL.FontFamily":"Font family","GLOBAL.Ellipsis":"…","GLOBAL.Change.Button":"Change","Global.Error.Title":"Sorry, something went wrong","Global.Error.Message":"An unexpected error occurred. Please close any Adobe XD tabs that are open and relaunch the extension. You may have to reload your DSP.","Onboarding.Welcome.Header":"Welcome to Adobe XD","Onboarding.Welcome.Content.About":"Adobe XD for Visual Studio Code\\nallows teams to easily load or create \\nDesign System Packages (DSP).","Onboarding.Welcome.Content.Load":"Loading an existing package lets you \\nconsume design tokens, components with \\ncode snippets, and documentation.","Onboarding.Welcome.Content.New":"Editing or creating a new package lets you \\ndefine design tokens, components with \\ncode snippets, and documentation. \\nIf you have a Creative Cloud Libraries link, \\nyou can create new packages in seconds.","Onboarding.Introduction.Title":"Introduction","Onboarding.CCIntroduction.Markdown":"# Success! \\nAdobe XD for Visual Studio Code imported {{colorCount}} colors, {{characterCount}} character styles, and {{componentCount}} components from the [{{CC-library-name}}]({{link}}) CC Library to the to the {{DSP-NAME}} Design System Package.\\n\\n# Welcome to your new Design System Package (DSP)\\nThis page is the introduction to your Design System Package. Use this page to welcome people to your system, [Markdown](https://commonmark.org/help/)  is fully supported to help you create whatever you need.\\n\\n# Start editing\\nAs a DSP creator, you can enter **Edit mode** by clicking on the **Start editing** button at the bottom left. When you finish editing your docs, tokens, or components, please click on **Finish editing**. Adobe XD for Visual Studio Code will then compile your tokens to platform-specific code, and then you will be able to share the DSP package with your team.\\n\\nYou can edit the settings of your package on the \\"DSP settings\\" button, and to load a new DSP please click on the package icon at the top left.","Onboarding.CCIntroduction.Markdown.Empty":"# Success!\\nAdobe XD for Visual Studio created an empty Design System Package for you.\\n\\n# Welcome to your new Design System Package (DSP)\\nThis page is the introduction to your Design System Package. Use this page to welcome people to your system, [Markdown](https://commonmark.org/help/)  is fully supported to help you create whatever you need.\\n\\n# Start editing\\nAs a DSP creator, you can enter **Edit mode** by clicking on the **Start editing** button at the bottom left. When you finish editing your docs, tokens, or components, please click on **Finish editing**. Adobe XD for Visual Studio Code will then compile your tokens to platform-specific code, and then you will be able to share the DSP package with your team.\\n\\nYou can edit the settings of your package on the \\"DSP settings\\" button, and to load a new DSP please click on the package icon at the top left.","Onboarding.Introduction.Markdown":"# Success! Welcome to your new Design System Package (DSP)\\nThis page is the introduction to your Design System Package. Use this page to welcome people to your system, [Markdown](https://commonmark.org/help/)  is fully supported to help you create whatever you need.\\n\\n# Start editing\\nAs a DSP creator, you can enter **Edit mode** by clicking on the **Start editing** button at the bottom left. When you finish editing your docs, tokens, or components, please click on **Finish editing**. Adobe XD for Visual Studio Code will then compile your tokens to platform-specific code, and then you will be able to share the DSP package with your team.\\n\\nYou can edit the settings of your package on the \\"DSP settings\\" button, and to load a new DSP please click on the package icon at the top left.","Onboarding.Principles.Title":"Principles","Onboarding.Principles.Markdown":"Edit this with the pencil icon. \\n\\n[Markdown](https://commonmark.org/help/) is supported to help you create great documentation for your design system.","Onboarding.Name.Header":"DSP name and location","Onboarding.Name.Content.About":"The Design System Package (DSP) name can be your organization/company name or your design system’s name.","Onboarding.Name.Content.Description":"Choose a location to save the Design System Package (DSP) to.\\n\\nIf you don’t select a location, the current project root folder will be used as the default location.","Onboarding.Name.PackageDefaultName":"PackageName","Onboarding.Languages.Header":"Languages","Onboarding.Languages.Content.SelectPt1":"Selecting a target language lets the \\nextension use ","Onboarding.Languages.Content.SelectPt2":" to generate \\nplatform-specific code for your projects.","Onboarding.Languages.Content.Changes":"Changes can be made at any time in your DSP settings.","Onboarding.Snippets.Header":"Consumption details","Onboarding.Snippets.Content.Select":"The DSP package you selected contains multiple code snippets. Please select the ones you need available for your project.","Label.Onboarding.Available":"CODE SNIPPETS AVAILABLE IN THE DSP","Onboarding.Snippets.Content.NoAvailable":"There are currently no snippets available in the DSP.","Onboarding.Snippets.Content.Update":"You can update your selection by loading the Design System Package (DSP) again.","Onboarding.CCL.Header":"Creative Cloud Libraries","Onboarding.CCL.Content.About":"To speed up the Design System Package creation process, you can import colors, characters styles, and XD components from CC Libraries links.","Onboarding.CLL.Content.PrivateLibrary":"Private CC Library ","Onboarding.CCL.Content.AdobeId":"links require an Adobe ID to import from. You can use a paid or a free Adobe ID. ","Onboarding.CCL.Content.Changes":"This step can also be done at any time \\nvia DSP settings.","Onboarding.CCL.Content.Success":"You’ve successfully authenticated with your Adobe ID.","Onboarding.CCL.Content.Add":"You can now add a CC Library link that is public or associated with that Adobe ID.","Onboarding.CCL.Content.Speed":"The Adobe XD extension will bring in existing colors, character styles, and XD components to speed up the package creation process.","Onboarding.CCL.Content.NoSignIn":"You haven\'t signed in with an Adobe ID yet.","Onboarding.CCL.Content.OnlyPublic":"If you have a private CC Library link, please go back a step and authenticate.","Onboarding.CLL.Content.PublicLibraries":"Public CC Libraries ","Onboarding.CLL.Content.ExampleLinksPublic":"links can start with: ","Onboarding.CLL.Content.ExampleLink1":"https://assets.adobe.com/public","Onboarding.CLL.Content.ExampleLink2":"https://shared-assets.adobe.com","Onboarding.CLL.Content.Or":" or ","Onboarding.CCL.Error.LoggedIn":"You must be logged into with Adobe account before accessing private shared libraries","Onboarding.CCL.Error.EnterValidLink":"Enter a valid link","Onboarding.CCL.Toast.Authorized":"Adobe ID authorized","Onboarding.CCL.Importing.Label":"IMPORTING FROM CC LIBRARY","Onboarding.CCL.Importing.Default":"Gathering assets from CC Libraries","Onboarding.CCL.Importing.Pages":"Importing page {{page}}/{{total}}","Onboarding.CCL.Importing.RenditionsLabel":"Downloading component previews","Onboarding.CCL.Importing.RenditionsCount":"{{count}} of {{total}}","Onboarding.CCL.Importing.RenditionsComplete":"Downloading complete!","Onboarding.CCL.Importing.Error":"Sorry!\\n\\nThere was an issue trying to import your CC Library, go back and try again.","Onboarding.Load.Header":"Load package","Onboarding.Load.Content.Choose":"Choose a location to load a Design System Package (DSP) from.","Onboarding.Edit.Header":"Edit package","Onboarding.Edit.Content.Choose":"Choose a location to load a Design System Package (DSP) from, to then edit it.","Onboarding.Success.Header":"Success","Onboarding.Success.Content.Setup":"Your Design System Package (DSP) has been successfully set up.","Onboarding.Success.Content.Customize":"You can now start customizing your package.","Onboarding.Success.Content.Loaded":"Your system has been successfully loaded.","Onboarding.Importing.Title":"Importing from CC Libraries","Onboarding.Copy.Header":"Copy tokens","Onboarding.Copy.Content.Contains":"The DSP package loaded contains folders with design tokens compiled to platform-specific code. You can copy these to folder(s) in your working project.","Onboarding.Copy.Content.Copy":"You can copy these tokens by loading the Design System Package (DSP) again.","Tokens.Color.Header":"Colors","Tokens.Color.Hex":"Hex: {{hex}}","Tokens.Color.Rgb":"RGB: {{rgb}}","Tokens.Color.InvalidHex.Error":"A HEX value is recommended","Tokens.Color.InvalidPercent.Error":"A whole value percent is recommended (ie. 98%)","Tokens.Font.Header":"Fonts","Tokens.Font.Description":"Manage collections of design tokens that define character styles.","Tokens.Font.Label":"Font","Tokens.Font.Name":"FONT NAME","Tokens.Font.NameHint":"Used in all token IDs","Tokens.Font.Family":"Family or {token-name}","Tokens.Font.Style":"Weight or {token-name}","Tokens.Font.Size":"Size or {token-name}","Tokens.Empty":"No tokens have been created yet. Use the Start editing button to add new tokens.","Tokens.Empty.Link":"This can be enabled in VS Code extension settings","Tokens.Filter.Empty":"No tokens found. Please change filter to see results.","Label.Onboarding.Name":"DESIGN SYSTEM PACKAGE NAME","Label.Onboarding.SaveLocation":"SAVE LOCATION","Label.Onboarding.PackageLocation":"DSP LOCATION","Label.Onboarding.TargetLanguages":"TARGET LANGUAGE(S)","Label.Onboarding.CCL":"CC LIBRARY LINK","Label.GettingStarted":"Getting started","Label.Tokens":"TOKENS","Label.TokensAvailable":"TOKENS AVAILABLE IN THE DSP","Label.Copied":"Copied!","Link.Onboarding.About":"About","Link.Onboarding.HowToUse":"How to use","Link.Onboarding.Documentation":"DSP documentation","Link.Onboarding.Public":"Publicly available packages","Link.Onboarding.HelpID":"Get help creating an Adobe ID","Link.Onboarding.HelpCCL":"Get help finding the CC Library Link","Link.Onboarding.StyleDictionary":"Style Dictionary","Button.Onboarding.Load":"Load package","Button.Onboarding.Edit":"Edit package","Button.Onboarding.Create":"Create package","Button.Onboarding.SelectFile":"Select file","Button.Onboarding.SelectFolder":"Select folder","Button.Next":"Next","Button.Back":"Back","Button.Import":"Import","Button.Reimport":"Re-import","Button.Skip":"Skip","Button.Authenticate":"Authenticate","Button.GetStarted":"Get started","Button.ViewPackage":"View package","Button.MarkdownReference":"Markdown reference","Button.SaveSettings":"Save","Button.Cancel":"Cancel","Button.Confirm":"OK","Button.Toggle":"XD","Button.Toggle.Tooltip":"\\"{{key}} + Alt + X\\" to open/close panel","Button.CopyTo":"Copy to","Button.Finish":"Finish","Menu.Label.Documentation":"Documentation","Menu.Label.Documentation.Empty":"No pages","Menu.Label.Principles":"Principles","Menu.Label.Introduction":"Introduction","Menu.Label.DesignTokens":"Design tokens","Menu.Label.Tokens":"Tokens","Menu.Label.Uncategorized":"Uncategorized","Menu.Label.Typography":"Typography","Menu.Label.Components":"Components","Menu.Label.Components.Empty":"No components","Menu.Search.Prompt":"Search","Menu.Search.LocalSearch":"Search current view","Menu.Search.Results":"Results","Menu.Search.NoResults":"No pages, tokens, or components matched that search.\\n\\nTip: Use # to use tags to help narrow your search","Menu.Search.NoResults.Tokens":"No tokens matched that search.\\n\\nTip: Change the filter to see more results.","Menu.Search.NoResults.Components":"No components matched that search.\\n\\nTip: Change the filter to see more results.","Menu.Button.AddPage":" + Add page","Menu.Button.AddComponent":" + Add component","Menu.Button.AddCategory":" + Add category","Menu.Button.ExportTokens":"Export tokens","Menu.Button.StartEditing":"Start editing","Menu.TeachingBubble.Header":"Start editing","Menu.TeachingBubble.Content":"Click here to start editing your brand new Design System Package (DSP)","Menu.TeachingBubble.Close":"Close","Menu.Button.FinishEditing":"Finish editing","Menu.Button.DSPSettings":"DSP settings","Menu.ToolTip.Export":"View compiled tokens","Header.Label.ExportSettings":"DSP settings","Header.Label.Settings":"Settings","Settings.Edit.Icon.Tooltip":"Enable editor mode in settings","Settings.Icon.Tooltip":"Load or create new package","Settings.Prefix.Title":"Set code snippet prefix","Settings.Prefix.Creation.Description":"Setting a prefix will help developers access code snippets with IntelliSense.\\n\\nYour prefix should be short but can be related to your DSP name or organization. If you don’t customize the prefix the default will be used.","Settings.Prefix.Description.Consumption":"The prefix is what developers will use in IntelliSense (code Completion) to access design tokens and code snippets for components.\\n\\nYour prefix should be short, but can be related to your DSP name or organization.\\n\\nIf you don’t customize the prefix the default will be used.","Settings.Prefix.Label":"PREFIX","Settings.Prefix.Default":"xd_","Settings.Params.Label":"Build parameters","Settings.Params.Description.Part1":"You can use a new configuration file (e.g. config2.json) or add new parameters that can be passed into the ","Settings.Params.Description.Part2":" build tool. If you need a custom configuration file, please name it differently than ","Settings.Params.Description.Part3":" (reserved), located in the ","Settings.Params.Description.Part4":" folder. \\n\\nDefault build parameters will be used if no build parameters are set.","Settings.Params.Default.Folder":"/dist","Settings.Params.Default.FileName":"config.json","Settings.ChangeDSP.Label":"Change DSP","Settings.ChangeDSP.Description":"You can go back to the welcome screen to load another Design System Package (DSP) or create a new one from scratch.","Settings.DSP.Title":"Design System Package Settings","Settings.DSP.Name.Label":"DESIGN SYSTEM PACKAGE name","Settings.DSP.Version.Description":"Set a version number of the DSP to help coordinate with your team.","Settings.DSP.Version.Label":"Version Number","Settings.DSP.Version.Default":"0.0.1","Settings.DSP.Status.Description":"Status helps your team better understand the current state of your DSP. (ex. Dev, Production, Staged).","Settings.DSP.Status.Label":"Status","Settings.DSP.Author.Description":"An author name helps your team determine who last made changes to the package.","Settings.DSP.Author.Label":"Author Name","Settings.DSP.Author.Link":"Set your author name in the VS Code extension settings","Settings.DSP.Author.NoAuthor":"No Author Set","Settings.Languages.Description":"Selecting a target language lets the extension use Style Dictionary to generate platform-specific code for your projects.\\n\\nThis also allows you to add code snippets to each language in the components section.","Settings.Language.css":"CSS","Settings.Language.sass":"Sass (SCSS)","Settings.Language.xmlAndroid":"XML (Android)","Settings.Language.ios":"Objective-C (iOS)","Settings.Language.swift":"Swift (iOS)","Settings.Language.javascript":"JavaScript","Settings.Language.flutter":"Dart (Flutter)","Settings.Authenticate":"Authenticate CC Account","Settings.Authenticate.Success.Creation":"You’ve successfully authenticated your Adobe CC Account.","Settings.Authenticate.Success.Creation.Description":"You can now add a CC Library link that is public or associated with this account.","Settings.Authenticate.Success.Creation.Description.2":"An Adobe Creative Cloud account (Adobe ID) lets you access private Creative Cloud Libraries. You can use library links to add colors, character styles, and XD components to your package.\\n\\nYou can use a paid or free Adobe ID.","Settings.CLL.Import.NoSignIn":"You can add a CC Library link that is ONLY public if you do not authenticate.","Settings.CLL.Import.Speed":"The extension will bring in colors, character styles, and XD components to give you a start on your package.","Settings.Config.Label":"Config","Settings.Description.Label":"Description","Settings.SetConfig.Label":"Set config location","Settings.ExtVersion":"{{appName}} Extension Version: {{version}}","Tokens.Value.Title":"Value","Tokens.Value.Label":"Value: {{value}}","Tokens.Color.Description":"Hex & Opacity","Tokens.Tags.Label":"Tags","Tokens.Tags.Description":"Hit enter to confirm a tag","Tokens.Custom.Label":"Custom","Tokens.Color.Label":"Color","Tokens.Size.Label":"Size","Tokens.Aliases.Label":"Aliases","Tokens.Alias.Label":"Alias","Tokens.Alias.Description":"Curly braces { } are added automatically for aliases.","Tokens.Alias.Show.Tooltip":"Show aliases","Tokens.Alias.Hide.Tooltip":"Hide aliases","Tokens.UsedBy.Label":"Used by","Tokens.LastUpdate.Label":"Last update: ","Tokens.LastUpdate.Info":"{{authorName}} | {{date}}","Tokens.New.Button":"New token","Tokens.Id.Label":"TOKEN ID","Tokens.Type.Label":"TYPE","Tokens.Category.Label":"CATEGORY","Tokens.Fonts.New.Button":"New font","Tokens.Docs.Delete.Button":"Delete page","Tokens.Docs.New.Title":"New page","Tokens.Docs.New.Markdown":"Edit this with the pencil icon.\\n\\nMarkdown is supported to help you create great documentation for your design system.","Tokens.Docs.Markdown.Empty":"No documentation available","Tokens.Delete.Confirm.Message":"Are you sure you want to delete this item?","Category.Delete.Confirm.Message":"Are you sure you want to delete this category?","Url.MarkdownHelp":"http://www.adobe.com/go/xd_vscode_markdown","Url.About":"http://www.adobe.com/go/xd_vscode_about","Url.HowToUse":"http://www.adobe.com/go/xd_vscode_learn","Url.Documentation":"http://www.adobe.com/go/xd_vscode_dsp","Url.Packages":"http://www.adobe.com/go/xd_vscode_packages","Url.StyleDictionary":"http://www.adobe.com/go/xd_vscode_styledictionary","Url.StyleDictionaryInstall":"https://www.npmjs.com/package/style-dictionary","Url.GetHelpId":"http://www.adobe.com/go/xd_vscode_adobeid","Url.GetHelpCCL":"http://www.adobe.com/go/xd_vscode_libraries","Url.Marketplace":"http://www.adobe.com/go/xd_vscode_marketplace","Url.NodeJS":"https://nodejs.org/","Error.MissingStyleDictionary":"In order to compile your tokens, please install Style Dictionary locally.","Toast.InstallStyleDictionary":"Style Dictionary required. Please install locally by following the link here","Toast.Button.InstallSD":"Install","Toast.TokensDone":"Tokens compiled to ","Toast.TokensDoneCustom":"Tokens compiled using custom parameters","Toast.OpenFolder":"Open folder","Toast.TokensError":"Error generating tokens","Toast.OutputFolder":"There are no tokens available to compile. Create some tokens and finish editing to compile them.","Toast.SuccessCopyToClipboard":"Copied to clipboard","Toast.ErrorCopyToClipboard":"Copy to clipboard failed ","Toast.Error.NoTokens":"There are no tokens available to compile. Create some tokens and finish editing to compile them.","Toast.Error.TokensNotSaved":"There are no tokens to generate. Finish editing to generate tokens.","Toast.Success.SettingsSaved":"DSP settings saved","Toast.NoWorkspace":"Your new package was created outside of an active workspace. As a result, we cannot assign editor permissions at the workspace level. Either re-create the package within an active workspace, or enable the Global Editor panel setting.","Toast.Button.Settings":"Panel Settings","Toast.Quickpick.Load":"Please load a DSP in the panel","Toast.Button.OpenPanel":"Open Panel","Toast.ExistingDSP":"A DSP already exists in this folder, overwrite?","Toast.Button.Overwrite":"Overwrite","Toast.Button.SelectDifferent":"Select different folder","Toast.OpenExistingDSP":"Existing package found at {{packagePath}}","Toast.Button.Open":"Open","Toast.Button.OpenOther":"Open Other","Toast.Button.Reload":"Reload","Toast.IssuesWithLocalContent":"The DSP loaded is using local assets for documentation, please click on Reload to display them correctly.","Toast.InstallNodeJS":"You might need to install Node.js®","Toast.Button.DownloadNodeJS":"Download Node.js®","Category.New.Label":"New category","Components.New.Label":"New component","Components.IntelliSense.Label":"IntelliSense visual preview","Components.CodeSnippet.Label":"Code snippet","Components.CodeSnippet.Snippet.Label":"Snippet","Components.CodeSnippet.Label.Description":"Used for component preview and accessing code snippets","Components.CodeSnippet.Empty":"No code snippets for any languages have been created.","Components.Delete.Label":"Delete component","Components.Trigger.Label":"Snippet trigger","Components.Trigger.Description":"Used for component preview and accessing code snippets","Components.Trigger.Empty":"No trigger created","Components.SelectLanguage":"Select a language","Components.NoLanguage":"No language (For trigger access)","Components.Used":"Used","Components.NotUsed":"Not used","Components.ImagePreview.Label":"Image Preview","Components.Add.Button":"Add","Components.Add.Prompt":"token-id","Components.Token.Label":"Token","Components.Token.Add.Label":"Add Token","Components.Assets.Label":"/assets/","Components.ImagePreview.Description":"Please make sure the file you want to use as a preview is stored in the /assets folder","Language.Type.coffeescript":"Coffeescript","Language.Type.c":"C","Language.Type.cpp":"C++","Language.Type.csharp":"C#","Language.Type.css":"CSS","Language.Type.dart":"Flutter (Dart)","Language.Type.fsharp":"F#","Language.Type.go":"Go","Language.Type.groovy":"Groovy","Language.Type.handlebars":"Handlebars","Language.Type.html":"HTML","Language.Type.java":"Android (Java)","Language.Type.javascript":"JavaScript","Language.Type.javascriptreact":"JavaScript React","Language.Type.less":"Less","Language.Type.lua":"Lua","Language.Type.obj-c":"iOS (Objective-C)","Language.Type.obj-cpp":"Objective-C++","Language.Type.jade":"Pug","Language.Type.python":"Python","Language.Type.razor":"Razor (cshtml)","Language.Type.ruby":"Ruby","Language.Type.rust":"Rust","Language.Type.scss":"SCSS","Language.Type.sass":"SASS","Language.Type.shaderLab":"ShaderLab","Language.Type.swift":"iOS (Swift)","Language.Type.typescript":"TypeScript","Language.Type.typescriptreact":"TypeScript React","Language.Type.markdown":"Markdown","Alert.Alias.MissingToken":"This token or one of the tokens it references doesn\'t exist.","Alert.Alias.InvalidFormat":"Aliases should only use reference values {token-name}","Alert.MissingId":"Name needed","Alert.DuplicateId":"This name is being used by another token","Alert.InvalidSize":"A numerical value is reccommended","Alert.NoValue":"There is no VALUE","Alert.DuplicateFont":"This name is being used by another font","Error.DSP.FileSave":"Saving failed.","DSP.OpenPackageLabel":"Save package","DSP.OpenPackageTitle":"Save package location","Error.DSP.NoPackageFound":"No package found","Error.Alias.Depth":"Alias nested too many levels deep. (max of 5)","Error.Alias.CircularReference":"Alias has circular reference","Error.Alias.Unknown":"Unknown error occurred","Intellisense.TokensHeader":"Tokens","Intellisense.CodeSnippetHeader":"Code snippet","Intellisense.DocumentationHeader":"Documentation","EditDialog.Title":"Still making changes?","EditDialog.Body":"Please confirm or discard.","EditDialog.ConfirmButton":"Yes, continue","EditDialog.CancelButton":"No, discard","Quickpick.Search.Placeholder":"Adobe XD: Find design tokens or components in {{dspName}}"}')},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r(18)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortByName=t.findComponentEntity=t.findFontToken=t.getAllTags=t.getTokensById=t.getTokensForType=t.search=t.createSearchIndex=void 0;const n=r(105),o=r(1),s=r(18);t.createSearchIndex=e=>{const t={},r=new n.Builder;r.ref("ref"),r.field("id"),r.field("name"),r.field("value");const o=(e,n)=>{r.add(e),t[e.ref]=n};return a(e.colors,o),a(e.sizes,o),a(e.custom,o),a(e.aliases,o),c(e.fonts,o),l(e.components,o),{index:r.build(),refs:t}},t.search=(e,r,n)=>{const o={},s=[],i=e.length?e+"~2":e;for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&void 0===o[t]){const r=n[t];r.name&&r.name.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1&&(void 0===o[t]&&s.push(n[t]),o[t]=n[t])}try{null==r||r.search(i).map(e=>{void 0===o[e.ref]&&s.push(n[e.ref]),o[e.ref]=n[e.ref]})}catch(e){console.error(e)}return s.sort(t.sortByName)},t.getTokensForType=(e,t,r)=>{const n=e=>(null==r?void 0:r.isDefault)||!1?!e.category_id||e.category_id===(null==r?void 0:r.id):!(null==r?void 0:r.id)||e.category_id==r.id;let s=[];return Object.keys(t).filter(e=>!0===t[e]).forEach(t=>{switch(t){case o.TokenFilterType.Custom:s=[...s,...e.custom.filter(n)];break;case o.TokenFilterType.Color:s=[...s,...e.colors.filter(n)];break;case o.TokenFilterType.Size:s=[...s,...e.sizes.filter(n)];break;case o.TokenFilterType.Alias:s=[...s,...e.aliases.filter(n)]}}),s},t.getTokensById=(e,t,r=!0)=>{const n=e.filter(e=>e.id===t||e.name===t);return!1===r?n.filter(e=>e.type!==s.EntityType.Alias):n},t.getAllTags=(e,t)=>{const r=i(e),n={};return null==t||t.forEach(e=>n[e]=!0),r.filter(e=>{if(!n[e])return n[e]=!0,e})};const i=e=>{const t=[];return e.forEach(e=>{var r;null===(r=e.tags)||void 0===r||r.forEach(e=>t.push(e))}),t};t.findFontToken=(e,t)=>{var r;return null===(r=null==e?void 0:e.tokens)||void 0===r?void 0:r.find(e=>e.key===t)};const a=(e,t)=>{null==e||e.forEach(e=>{t({ref:u(e),id:e.id,value:e.value,name:e.name},e)})},c=(e,t)=>{null==e||e.forEach(e=>{t({ref:u(e),id:e.id,value:e.tokens.map(e=>`${e.value} ${e.id}`).join(" "),name:e.name},e)})};t.findComponentEntity=(e,t)=>{var r;return null===(r=e.components)||void 0===r?void 0:r.find(e=>e.id===t)},t.sortByName=(e,t)=>e.name.toLocaleLowerCase()<t.name.toLocaleLowerCase()?-1:e.name.toLocaleLowerCase()>t.name.toLocaleLowerCase()?1:0;const l=(e,t)=>{null==e||e.forEach(e=>{t({ref:u(e),id:e.id,value:e.tags.join(" "),name:e.name},e)})},u=e=>d(e.id,e.type,e.class),d=(e,t,r)=>`${e}-${t}-${r}`},function(e,t,r){var n,o;!function(){var s,i,a,c,l,u,d,h,p,f,m,g,y,v,b,w,S,E,_,P,x,k,C,T,A,O=function(e){var t=new O.Builder;return t.pipeline.add(O.trimmer,O.stopWordFilter,O.stemmer),t.searchPipeline.add(O.stemmer),e.call(t,t),t.build()};O.version="2.3.8",O.utils={},O.utils.warn=function(e){return function(t){e.console&&console.warn&&console.warn(t)}}(this),O.utils.asString=function(e){return null==e?"":e.toString()},O.utils.clone=function(e){if(null==e)return e;for(var t=Object.create(null),r=Object.keys(e),n=0;n<r.length;n++){var o=r[n],s=e[o];if(Array.isArray(s))t[o]=s.slice();else{if("string"!=typeof s&&"number"!=typeof s&&"boolean"!=typeof s)throw new TypeError("clone is not deep and does not support nested objects");t[o]=s}}return t},O.FieldRef=function(e,t,r){this.docRef=e,this.fieldName=t,this._stringValue=r},O.FieldRef.joiner="/",O.FieldRef.fromString=function(e){var t=e.indexOf(O.FieldRef.joiner);if(-1===t)throw"malformed field ref string";var r=e.slice(0,t),n=e.slice(t+1);return new O.FieldRef(n,r,e)},O.FieldRef.prototype.toString=function(){return null==this._stringValue&&(this._stringValue=this.fieldName+O.FieldRef.joiner+this.docRef),this._stringValue},O.Set=function(e){if(this.elements=Object.create(null),e){this.length=e.length;for(var t=0;t<this.length;t++)this.elements[e[t]]=!0}else this.length=0},O.Set.complete={intersect:function(e){return e},union:function(e){return e},contains:function(){return!0}},O.Set.empty={intersect:function(){return this},union:function(e){return e},contains:function(){return!1}},O.Set.prototype.contains=function(e){return!!this.elements[e]},O.Set.prototype.intersect=function(e){var t,r,n,o=[];if(e===O.Set.complete)return this;if(e===O.Set.empty)return e;this.length<e.length?(t=this,r=e):(t=e,r=this),n=Object.keys(t.elements);for(var s=0;s<n.length;s++){var i=n[s];i in r.elements&&o.push(i)}return new O.Set(o)},O.Set.prototype.union=function(e){return e===O.Set.complete?O.Set.complete:e===O.Set.empty?this:new O.Set(Object.keys(this.elements).concat(Object.keys(e.elements)))},O.idf=function(e,t){var r=0;for(var n in e)"_index"!=n&&(r+=Object.keys(e[n]).length);var o=(t-r+.5)/(r+.5);return Math.log(1+Math.abs(o))},O.Token=function(e,t){this.str=e||"",this.metadata=t||{}},O.Token.prototype.toString=function(){return this.str},O.Token.prototype.update=function(e){return this.str=e(this.str,this.metadata),this},O.Token.prototype.clone=function(e){return e=e||function(e){return e},new O.Token(e(this.str,this.metadata),this.metadata)},O.tokenizer=function(e,t){if(null==e||null==e)return[];if(Array.isArray(e))return e.map((function(e){return new O.Token(O.utils.asString(e).toLowerCase(),O.utils.clone(t))}));for(var r=e.toString().toLowerCase(),n=r.length,o=[],s=0,i=0;s<=n;s++){var a=s-i;if(r.charAt(s).match(O.tokenizer.separator)||s==n){if(a>0){var c=O.utils.clone(t)||{};c.position=[i,a],c.index=o.length,o.push(new O.Token(r.slice(i,s),c))}i=s+1}}return o},O.tokenizer.separator=/[\s\-]+/,O.Pipeline=function(){this._stack=[]},O.Pipeline.registeredFunctions=Object.create(null),O.Pipeline.registerFunction=function(e,t){t in this.registeredFunctions&&O.utils.warn("Overwriting existing registered function: "+t),e.label=t,O.Pipeline.registeredFunctions[e.label]=e},O.Pipeline.warnIfFunctionNotRegistered=function(e){e.label&&e.label in this.registeredFunctions||O.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",e)},O.Pipeline.load=function(e){var t=new O.Pipeline;return e.forEach((function(e){var r=O.Pipeline.registeredFunctions[e];if(!r)throw new Error("Cannot load unregistered function: "+e);t.add(r)})),t},O.Pipeline.prototype.add=function(){var e=Array.prototype.slice.call(arguments);e.forEach((function(e){O.Pipeline.warnIfFunctionNotRegistered(e),this._stack.push(e)}),this)},O.Pipeline.prototype.after=function(e,t){O.Pipeline.warnIfFunctionNotRegistered(t);var r=this._stack.indexOf(e);if(-1==r)throw new Error("Cannot find existingFn");r+=1,this._stack.splice(r,0,t)},O.Pipeline.prototype.before=function(e,t){O.Pipeline.warnIfFunctionNotRegistered(t);var r=this._stack.indexOf(e);if(-1==r)throw new Error("Cannot find existingFn");this._stack.splice(r,0,t)},O.Pipeline.prototype.remove=function(e){var t=this._stack.indexOf(e);-1!=t&&this._stack.splice(t,1)},O.Pipeline.prototype.run=function(e){for(var t=this._stack.length,r=0;r<t;r++){for(var n=this._stack[r],o=[],s=0;s<e.length;s++){var i=n(e[s],s,e);if(null!=i&&""!==i)if(Array.isArray(i))for(var a=0;a<i.length;a++)o.push(i[a]);else o.push(i)}e=o}return e},O.Pipeline.prototype.runString=function(e,t){var r=new O.Token(e,t);return this.run([r]).map((function(e){return e.toString()}))},O.Pipeline.prototype.reset=function(){this._stack=[]},O.Pipeline.prototype.toJSON=function(){return this._stack.map((function(e){return O.Pipeline.warnIfFunctionNotRegistered(e),e.label}))},O.Vector=function(e){this._magnitude=0,this.elements=e||[]},O.Vector.prototype.positionForIndex=function(e){if(0==this.elements.length)return 0;for(var t=0,r=this.elements.length/2,n=r-t,o=Math.floor(n/2),s=this.elements[2*o];n>1&&(s<e&&(t=o),s>e&&(r=o),s!=e);)n=r-t,o=t+Math.floor(n/2),s=this.elements[2*o];return s==e||s>e?2*o:s<e?2*(o+1):void 0},O.Vector.prototype.insert=function(e,t){this.upsert(e,t,(function(){throw"duplicate index"}))},O.Vector.prototype.upsert=function(e,t,r){this._magnitude=0;var n=this.positionForIndex(e);this.elements[n]==e?this.elements[n+1]=r(this.elements[n+1],t):this.elements.splice(n,0,e,t)},O.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var e=0,t=this.elements.length,r=1;r<t;r+=2){var n=this.elements[r];e+=n*n}return this._magnitude=Math.sqrt(e)},O.Vector.prototype.dot=function(e){for(var t=0,r=this.elements,n=e.elements,o=r.length,s=n.length,i=0,a=0,c=0,l=0;c<o&&l<s;)(i=r[c])<(a=n[l])?c+=2:i>a?l+=2:i==a&&(t+=r[c+1]*n[l+1],c+=2,l+=2);return t},O.Vector.prototype.similarity=function(e){return this.dot(e)/this.magnitude()||0},O.Vector.prototype.toArray=function(){for(var e=new Array(this.elements.length/2),t=1,r=0;t<this.elements.length;t+=2,r++)e[r]=this.elements[t];return e},O.Vector.prototype.toJSON=function(){return this.elements},O.stemmer=(s={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},i={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},a="[aeiouy]",c="[^aeiou][^aeiouy]*",l=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),u=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),d=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$"),h=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy]"),p=/^(.+?)(ss|i)es$/,f=/^(.+?)([^s])s$/,m=/^(.+?)eed$/,g=/^(.+?)(ed|ing)$/,y=/.$/,v=/(at|bl|iz)$/,b=new RegExp("([^aeiouylsz])\\1$"),w=new RegExp("^"+c+a+"[^aeiouwxy]$"),S=/^(.+?[^aeiou])y$/,E=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,_=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,P=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,x=/^(.+?)(s|t)(ion)$/,k=/^(.+?)e$/,C=/ll$/,T=new RegExp("^"+c+a+"[^aeiouwxy]$"),A=function(e){var t,r,n,o,a,c,A;if(e.length<3)return e;if("y"==(n=e.substr(0,1))&&(e=n.toUpperCase()+e.substr(1)),a=f,(o=p).test(e)?e=e.replace(o,"$1$2"):a.test(e)&&(e=e.replace(a,"$1$2")),a=g,(o=m).test(e)){var O=o.exec(e);(o=l).test(O[1])&&(o=y,e=e.replace(o,""))}else a.test(e)&&(t=(O=a.exec(e))[1],(a=h).test(t)&&(c=b,A=w,(a=v).test(e=t)?e+="e":c.test(e)?(o=y,e=e.replace(o,"")):A.test(e)&&(e+="e")));return(o=S).test(e)&&(e=(t=(O=o.exec(e))[1])+"i"),(o=E).test(e)&&(t=(O=o.exec(e))[1],r=O[2],(o=l).test(t)&&(e=t+s[r])),(o=_).test(e)&&(t=(O=o.exec(e))[1],r=O[2],(o=l).test(t)&&(e=t+i[r])),a=x,(o=P).test(e)?(t=(O=o.exec(e))[1],(o=u).test(t)&&(e=t)):a.test(e)&&(t=(O=a.exec(e))[1]+O[2],(a=u).test(t)&&(e=t)),(o=k).test(e)&&(t=(O=o.exec(e))[1],a=d,c=T,((o=u).test(t)||a.test(t)&&!c.test(t))&&(e=t)),a=u,(o=C).test(e)&&a.test(e)&&(o=y,e=e.replace(o,"")),"y"==n&&(e=n.toLowerCase()+e.substr(1)),e},function(e){return e.update(A)}),O.Pipeline.registerFunction(O.stemmer,"stemmer"),O.generateStopWordFilter=function(e){var t=e.reduce((function(e,t){return e[t]=t,e}),{});return function(e){if(e&&t[e.toString()]!==e.toString())return e}},O.stopWordFilter=O.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),O.Pipeline.registerFunction(O.stopWordFilter,"stopWordFilter"),O.trimmer=function(e){return e.update((function(e){return e.replace(/^\W+/,"").replace(/\W+$/,"")}))},O.Pipeline.registerFunction(O.trimmer,"trimmer"),O.TokenSet=function(){this.final=!1,this.edges={},this.id=O.TokenSet._nextId,O.TokenSet._nextId+=1},O.TokenSet._nextId=1,O.TokenSet.fromArray=function(e){for(var t=new O.TokenSet.Builder,r=0,n=e.length;r<n;r++)t.insert(e[r]);return t.finish(),t.root},O.TokenSet.fromClause=function(e){return"editDistance"in e?O.TokenSet.fromFuzzyString(e.term,e.editDistance):O.TokenSet.fromString(e.term)},O.TokenSet.fromFuzzyString=function(e,t){for(var r=new O.TokenSet,n=[{node:r,editsRemaining:t,str:e}];n.length;){var o=n.pop();if(o.str.length>0){var s,i=o.str.charAt(0);i in o.node.edges?s=o.node.edges[i]:(s=new O.TokenSet,o.node.edges[i]=s),1==o.str.length&&(s.final=!0),n.push({node:s,editsRemaining:o.editsRemaining,str:o.str.slice(1)})}if(0!=o.editsRemaining){if("*"in o.node.edges)var a=o.node.edges["*"];else{a=new O.TokenSet;o.node.edges["*"]=a}if(0==o.str.length&&(a.final=!0),n.push({node:a,editsRemaining:o.editsRemaining-1,str:o.str}),o.str.length>1&&n.push({node:o.node,editsRemaining:o.editsRemaining-1,str:o.str.slice(1)}),1==o.str.length&&(o.node.final=!0),o.str.length>=1){if("*"in o.node.edges)var c=o.node.edges["*"];else{c=new O.TokenSet;o.node.edges["*"]=c}1==o.str.length&&(c.final=!0),n.push({node:c,editsRemaining:o.editsRemaining-1,str:o.str.slice(1)})}if(o.str.length>1){var l,u=o.str.charAt(0),d=o.str.charAt(1);d in o.node.edges?l=o.node.edges[d]:(l=new O.TokenSet,o.node.edges[d]=l),1==o.str.length&&(l.final=!0),n.push({node:l,editsRemaining:o.editsRemaining-1,str:u+o.str.slice(2)})}}}return r},O.TokenSet.fromString=function(e){for(var t=new O.TokenSet,r=t,n=0,o=e.length;n<o;n++){var s=e[n],i=n==o-1;if("*"==s)t.edges[s]=t,t.final=i;else{var a=new O.TokenSet;a.final=i,t.edges[s]=a,t=a}}return r},O.TokenSet.prototype.toArray=function(){for(var e=[],t=[{prefix:"",node:this}];t.length;){var r=t.pop(),n=Object.keys(r.node.edges),o=n.length;r.node.final&&(r.prefix.charAt(0),e.push(r.prefix));for(var s=0;s<o;s++){var i=n[s];t.push({prefix:r.prefix.concat(i),node:r.node.edges[i]})}}return e},O.TokenSet.prototype.toString=function(){if(this._str)return this._str;for(var e=this.final?"1":"0",t=Object.keys(this.edges).sort(),r=t.length,n=0;n<r;n++){var o=t[n];e=e+o+this.edges[o].id}return e},O.TokenSet.prototype.intersect=function(e){for(var t=new O.TokenSet,r=void 0,n=[{qNode:e,output:t,node:this}];n.length;){r=n.pop();for(var o=Object.keys(r.qNode.edges),s=o.length,i=Object.keys(r.node.edges),a=i.length,c=0;c<s;c++)for(var l=o[c],u=0;u<a;u++){var d=i[u];if(d==l||"*"==l){var h=r.node.edges[d],p=r.qNode.edges[l],f=h.final&&p.final,m=void 0;d in r.output.edges?(m=r.output.edges[d]).final=m.final||f:((m=new O.TokenSet).final=f,r.output.edges[d]=m),n.push({qNode:p,output:m,node:h})}}}return t},O.TokenSet.Builder=function(){this.previousWord="",this.root=new O.TokenSet,this.uncheckedNodes=[],this.minimizedNodes={}},O.TokenSet.Builder.prototype.insert=function(e){var t,r=0;if(e<this.previousWord)throw new Error("Out of order word insertion");for(var n=0;n<e.length&&n<this.previousWord.length&&e[n]==this.previousWord[n];n++)r++;this.minimize(r),t=0==this.uncheckedNodes.length?this.root:this.uncheckedNodes[this.uncheckedNodes.length-1].child;for(n=r;n<e.length;n++){var o=new O.TokenSet,s=e[n];t.edges[s]=o,this.uncheckedNodes.push({parent:t,char:s,child:o}),t=o}t.final=!0,this.previousWord=e},O.TokenSet.Builder.prototype.finish=function(){this.minimize(0)},O.TokenSet.Builder.prototype.minimize=function(e){for(var t=this.uncheckedNodes.length-1;t>=e;t--){var r=this.uncheckedNodes[t],n=r.child.toString();n in this.minimizedNodes?r.parent.edges[r.char]=this.minimizedNodes[n]:(r.child._str=n,this.minimizedNodes[n]=r.child),this.uncheckedNodes.pop()}},O.Index=function(e){this.invertedIndex=e.invertedIndex,this.fieldVectors=e.fieldVectors,this.tokenSet=e.tokenSet,this.fields=e.fields,this.pipeline=e.pipeline},O.Index.prototype.search=function(e){return this.query((function(t){new O.QueryParser(e,t).parse()}))},O.Index.prototype.query=function(e){for(var t=new O.Query(this.fields),r=Object.create(null),n=Object.create(null),o=Object.create(null),s=Object.create(null),i=Object.create(null),a=0;a<this.fields.length;a++)n[this.fields[a]]=new O.Vector;e.call(t,t);for(a=0;a<t.clauses.length;a++){var c=t.clauses[a],l=null,u=O.Set.complete;l=c.usePipeline?this.pipeline.runString(c.term,{fields:c.fields}):[c.term];for(var d=0;d<l.length;d++){var h=l[d];c.term=h;var p=O.TokenSet.fromClause(c),f=this.tokenSet.intersect(p).toArray();if(0===f.length&&c.presence===O.Query.presence.REQUIRED){for(var m=0;m<c.fields.length;m++){s[D=c.fields[m]]=O.Set.empty}break}for(var g=0;g<f.length;g++){var y=f[g],v=this.invertedIndex[y],b=v._index;for(m=0;m<c.fields.length;m++){var w=v[D=c.fields[m]],S=Object.keys(w),E=y+"/"+D,_=new O.Set(S);if(c.presence==O.Query.presence.REQUIRED&&(u=u.union(_),void 0===s[D]&&(s[D]=O.Set.complete)),c.presence!=O.Query.presence.PROHIBITED){if(n[D].upsert(b,c.boost,(function(e,t){return e+t})),!o[E]){for(var P=0;P<S.length;P++){var x,k=S[P],C=new O.FieldRef(k,D),T=w[k];void 0===(x=r[C])?r[C]=new O.MatchData(y,D,T):x.add(y,D,T)}o[E]=!0}}else void 0===i[D]&&(i[D]=O.Set.empty),i[D]=i[D].union(_)}}}if(c.presence===O.Query.presence.REQUIRED)for(m=0;m<c.fields.length;m++){s[D=c.fields[m]]=s[D].intersect(u)}}var A=O.Set.complete,R=O.Set.empty;for(a=0;a<this.fields.length;a++){var D;s[D=this.fields[a]]&&(A=A.intersect(s[D])),i[D]&&(R=R.union(i[D]))}var L=Object.keys(r),F=[],j=Object.create(null);if(t.isNegated()){L=Object.keys(this.fieldVectors);for(a=0;a<L.length;a++){C=L[a];var I=O.FieldRef.fromString(C);r[C]=new O.MatchData}}for(a=0;a<L.length;a++){var M=(I=O.FieldRef.fromString(L[a])).docRef;if(A.contains(M)&&!R.contains(M)){var N,$=this.fieldVectors[I],H=n[I.fieldName].similarity($);if(void 0!==(N=j[M]))N.score+=H,N.matchData.combine(r[I]);else{var U={ref:M,score:H,matchData:r[I]};j[M]=U,F.push(U)}}}return F.sort((function(e,t){return t.score-e.score}))},O.Index.prototype.toJSON=function(){var e=Object.keys(this.invertedIndex).sort().map((function(e){return[e,this.invertedIndex[e]]}),this),t=Object.keys(this.fieldVectors).map((function(e){return[e,this.fieldVectors[e].toJSON()]}),this);return{version:O.version,fields:this.fields,fieldVectors:t,invertedIndex:e,pipeline:this.pipeline.toJSON()}},O.Index.load=function(e){var t={},r={},n=e.fieldVectors,o=Object.create(null),s=e.invertedIndex,i=new O.TokenSet.Builder,a=O.Pipeline.load(e.pipeline);e.version!=O.version&&O.utils.warn("Version mismatch when loading serialised index. Current version of lunr '"+O.version+"' does not match serialized index '"+e.version+"'");for(var c=0;c<n.length;c++){var l=(d=n[c])[0],u=d[1];r[l]=new O.Vector(u)}for(c=0;c<s.length;c++){var d,h=(d=s[c])[0],p=d[1];i.insert(h),o[h]=p}return i.finish(),t.fields=e.fields,t.fieldVectors=r,t.invertedIndex=o,t.tokenSet=i.root,t.pipeline=a,new O.Index(t)},O.Builder=function(){this._ref="id",this._fields=Object.create(null),this._documents=Object.create(null),this.invertedIndex=Object.create(null),this.fieldTermFrequencies={},this.fieldLengths={},this.tokenizer=O.tokenizer,this.pipeline=new O.Pipeline,this.searchPipeline=new O.Pipeline,this.documentCount=0,this._b=.75,this._k1=1.2,this.termIndex=0,this.metadataWhitelist=[]},O.Builder.prototype.ref=function(e){this._ref=e},O.Builder.prototype.field=function(e,t){if(/\//.test(e))throw new RangeError("Field '"+e+"' contains illegal character '/'");this._fields[e]=t||{}},O.Builder.prototype.b=function(e){this._b=e<0?0:e>1?1:e},O.Builder.prototype.k1=function(e){this._k1=e},O.Builder.prototype.add=function(e,t){var r=e[this._ref],n=Object.keys(this._fields);this._documents[r]=t||{},this.documentCount+=1;for(var o=0;o<n.length;o++){var s=n[o],i=this._fields[s].extractor,a=i?i(e):e[s],c=this.tokenizer(a,{fields:[s]}),l=this.pipeline.run(c),u=new O.FieldRef(r,s),d=Object.create(null);this.fieldTermFrequencies[u]=d,this.fieldLengths[u]=0,this.fieldLengths[u]+=l.length;for(var h=0;h<l.length;h++){var p=l[h];if(null==d[p]&&(d[p]=0),d[p]+=1,null==this.invertedIndex[p]){var f=Object.create(null);f._index=this.termIndex,this.termIndex+=1;for(var m=0;m<n.length;m++)f[n[m]]=Object.create(null);this.invertedIndex[p]=f}null==this.invertedIndex[p][s][r]&&(this.invertedIndex[p][s][r]=Object.create(null));for(var g=0;g<this.metadataWhitelist.length;g++){var y=this.metadataWhitelist[g],v=p.metadata[y];null==this.invertedIndex[p][s][r][y]&&(this.invertedIndex[p][s][r][y]=[]),this.invertedIndex[p][s][r][y].push(v)}}}},O.Builder.prototype.calculateAverageFieldLengths=function(){for(var e=Object.keys(this.fieldLengths),t=e.length,r={},n={},o=0;o<t;o++){var s=O.FieldRef.fromString(e[o]),i=s.fieldName;n[i]||(n[i]=0),n[i]+=1,r[i]||(r[i]=0),r[i]+=this.fieldLengths[s]}var a=Object.keys(this._fields);for(o=0;o<a.length;o++){var c=a[o];r[c]=r[c]/n[c]}this.averageFieldLength=r},O.Builder.prototype.createFieldVectors=function(){for(var e={},t=Object.keys(this.fieldTermFrequencies),r=t.length,n=Object.create(null),o=0;o<r;o++){for(var s=O.FieldRef.fromString(t[o]),i=s.fieldName,a=this.fieldLengths[s],c=new O.Vector,l=this.fieldTermFrequencies[s],u=Object.keys(l),d=u.length,h=this._fields[i].boost||1,p=this._documents[s.docRef].boost||1,f=0;f<d;f++){var m,g,y,v=u[f],b=l[v],w=this.invertedIndex[v]._index;void 0===n[v]?(m=O.idf(this.invertedIndex[v],this.documentCount),n[v]=m):m=n[v],g=m*((this._k1+1)*b)/(this._k1*(1-this._b+this._b*(a/this.averageFieldLength[i]))+b),g*=h,g*=p,y=Math.round(1e3*g)/1e3,c.insert(w,y)}e[s]=c}this.fieldVectors=e},O.Builder.prototype.createTokenSet=function(){this.tokenSet=O.TokenSet.fromArray(Object.keys(this.invertedIndex).sort())},O.Builder.prototype.build=function(){return this.calculateAverageFieldLengths(),this.createFieldVectors(),this.createTokenSet(),new O.Index({invertedIndex:this.invertedIndex,fieldVectors:this.fieldVectors,tokenSet:this.tokenSet,fields:Object.keys(this._fields),pipeline:this.searchPipeline})},O.Builder.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},O.MatchData=function(e,t,r){for(var n=Object.create(null),o=Object.keys(r||{}),s=0;s<o.length;s++){var i=o[s];n[i]=r[i].slice()}this.metadata=Object.create(null),void 0!==e&&(this.metadata[e]=Object.create(null),this.metadata[e][t]=n)},O.MatchData.prototype.combine=function(e){for(var t=Object.keys(e.metadata),r=0;r<t.length;r++){var n=t[r],o=Object.keys(e.metadata[n]);null==this.metadata[n]&&(this.metadata[n]=Object.create(null));for(var s=0;s<o.length;s++){var i=o[s],a=Object.keys(e.metadata[n][i]);null==this.metadata[n][i]&&(this.metadata[n][i]=Object.create(null));for(var c=0;c<a.length;c++){var l=a[c];null==this.metadata[n][i][l]?this.metadata[n][i][l]=e.metadata[n][i][l]:this.metadata[n][i][l]=this.metadata[n][i][l].concat(e.metadata[n][i][l])}}}},O.MatchData.prototype.add=function(e,t,r){if(!(e in this.metadata))return this.metadata[e]=Object.create(null),void(this.metadata[e][t]=r);if(t in this.metadata[e])for(var n=Object.keys(r),o=0;o<n.length;o++){var s=n[o];s in this.metadata[e][t]?this.metadata[e][t][s]=this.metadata[e][t][s].concat(r[s]):this.metadata[e][t][s]=r[s]}else this.metadata[e][t]=r},O.Query=function(e){this.clauses=[],this.allFields=e},O.Query.wildcard=new String("*"),O.Query.wildcard.NONE=0,O.Query.wildcard.LEADING=1,O.Query.wildcard.TRAILING=2,O.Query.presence={OPTIONAL:1,REQUIRED:2,PROHIBITED:3},O.Query.prototype.clause=function(e){return"fields"in e||(e.fields=this.allFields),"boost"in e||(e.boost=1),"usePipeline"in e||(e.usePipeline=!0),"wildcard"in e||(e.wildcard=O.Query.wildcard.NONE),e.wildcard&O.Query.wildcard.LEADING&&e.term.charAt(0)!=O.Query.wildcard&&(e.term="*"+e.term),e.wildcard&O.Query.wildcard.TRAILING&&e.term.slice(-1)!=O.Query.wildcard&&(e.term=e.term+"*"),"presence"in e||(e.presence=O.Query.presence.OPTIONAL),this.clauses.push(e),this},O.Query.prototype.isNegated=function(){for(var e=0;e<this.clauses.length;e++)if(this.clauses[e].presence!=O.Query.presence.PROHIBITED)return!1;return!0},O.Query.prototype.term=function(e,t){if(Array.isArray(e))return e.forEach((function(e){this.term(e,O.utils.clone(t))}),this),this;var r=t||{};return r.term=e.toString(),this.clause(r),this},O.QueryParseError=function(e,t,r){this.name="QueryParseError",this.message=e,this.start=t,this.end=r},O.QueryParseError.prototype=new Error,O.QueryLexer=function(e){this.lexemes=[],this.str=e,this.length=e.length,this.pos=0,this.start=0,this.escapeCharPositions=[]},O.QueryLexer.prototype.run=function(){for(var e=O.QueryLexer.lexText;e;)e=e(this)},O.QueryLexer.prototype.sliceString=function(){for(var e=[],t=this.start,r=this.pos,n=0;n<this.escapeCharPositions.length;n++)r=this.escapeCharPositions[n],e.push(this.str.slice(t,r)),t=r+1;return e.push(this.str.slice(t,this.pos)),this.escapeCharPositions.length=0,e.join("")},O.QueryLexer.prototype.emit=function(e){this.lexemes.push({type:e,str:this.sliceString(),start:this.start,end:this.pos}),this.start=this.pos},O.QueryLexer.prototype.escapeCharacter=function(){this.escapeCharPositions.push(this.pos-1),this.pos+=1},O.QueryLexer.prototype.next=function(){if(this.pos>=this.length)return O.QueryLexer.EOS;var e=this.str.charAt(this.pos);return this.pos+=1,e},O.QueryLexer.prototype.width=function(){return this.pos-this.start},O.QueryLexer.prototype.ignore=function(){this.start==this.pos&&(this.pos+=1),this.start=this.pos},O.QueryLexer.prototype.backup=function(){this.pos-=1},O.QueryLexer.prototype.acceptDigitRun=function(){var e,t;do{t=(e=this.next()).charCodeAt(0)}while(t>47&&t<58);e!=O.QueryLexer.EOS&&this.backup()},O.QueryLexer.prototype.more=function(){return this.pos<this.length},O.QueryLexer.EOS="EOS",O.QueryLexer.FIELD="FIELD",O.QueryLexer.TERM="TERM",O.QueryLexer.EDIT_DISTANCE="EDIT_DISTANCE",O.QueryLexer.BOOST="BOOST",O.QueryLexer.PRESENCE="PRESENCE",O.QueryLexer.lexField=function(e){return e.backup(),e.emit(O.QueryLexer.FIELD),e.ignore(),O.QueryLexer.lexText},O.QueryLexer.lexTerm=function(e){if(e.width()>1&&(e.backup(),e.emit(O.QueryLexer.TERM)),e.ignore(),e.more())return O.QueryLexer.lexText},O.QueryLexer.lexEditDistance=function(e){return e.ignore(),e.acceptDigitRun(),e.emit(O.QueryLexer.EDIT_DISTANCE),O.QueryLexer.lexText},O.QueryLexer.lexBoost=function(e){return e.ignore(),e.acceptDigitRun(),e.emit(O.QueryLexer.BOOST),O.QueryLexer.lexText},O.QueryLexer.lexEOS=function(e){e.width()>0&&e.emit(O.QueryLexer.TERM)},O.QueryLexer.termSeparator=O.tokenizer.separator,O.QueryLexer.lexText=function(e){for(;;){var t=e.next();if(t==O.QueryLexer.EOS)return O.QueryLexer.lexEOS;if(92!=t.charCodeAt(0)){if(":"==t)return O.QueryLexer.lexField;if("~"==t)return e.backup(),e.width()>0&&e.emit(O.QueryLexer.TERM),O.QueryLexer.lexEditDistance;if("^"==t)return e.backup(),e.width()>0&&e.emit(O.QueryLexer.TERM),O.QueryLexer.lexBoost;if("+"==t&&1===e.width())return e.emit(O.QueryLexer.PRESENCE),O.QueryLexer.lexText;if("-"==t&&1===e.width())return e.emit(O.QueryLexer.PRESENCE),O.QueryLexer.lexText;if(t.match(O.QueryLexer.termSeparator))return O.QueryLexer.lexTerm}else e.escapeCharacter()}},O.QueryParser=function(e,t){this.lexer=new O.QueryLexer(e),this.query=t,this.currentClause={},this.lexemeIdx=0},O.QueryParser.prototype.parse=function(){this.lexer.run(),this.lexemes=this.lexer.lexemes;for(var e=O.QueryParser.parseClause;e;)e=e(this);return this.query},O.QueryParser.prototype.peekLexeme=function(){return this.lexemes[this.lexemeIdx]},O.QueryParser.prototype.consumeLexeme=function(){var e=this.peekLexeme();return this.lexemeIdx+=1,e},O.QueryParser.prototype.nextClause=function(){var e=this.currentClause;this.query.clause(e),this.currentClause={}},O.QueryParser.parseClause=function(e){var t=e.peekLexeme();if(null!=t)switch(t.type){case O.QueryLexer.PRESENCE:return O.QueryParser.parsePresence;case O.QueryLexer.FIELD:return O.QueryParser.parseField;case O.QueryLexer.TERM:return O.QueryParser.parseTerm;default:var r="expected either a field or a term, found "+t.type;throw t.str.length>=1&&(r+=" with value '"+t.str+"'"),new O.QueryParseError(r,t.start,t.end)}},O.QueryParser.parsePresence=function(e){var t=e.consumeLexeme();if(null!=t){switch(t.str){case"-":e.currentClause.presence=O.Query.presence.PROHIBITED;break;case"+":e.currentClause.presence=O.Query.presence.REQUIRED;break;default:var r="unrecognised presence operator'"+t.str+"'";throw new O.QueryParseError(r,t.start,t.end)}var n=e.peekLexeme();if(null==n){r="expecting term or field, found nothing";throw new O.QueryParseError(r,t.start,t.end)}switch(n.type){case O.QueryLexer.FIELD:return O.QueryParser.parseField;case O.QueryLexer.TERM:return O.QueryParser.parseTerm;default:r="expecting term or field, found '"+n.type+"'";throw new O.QueryParseError(r,n.start,n.end)}}},O.QueryParser.parseField=function(e){var t=e.consumeLexeme();if(null!=t){if(-1==e.query.allFields.indexOf(t.str)){var r=e.query.allFields.map((function(e){return"'"+e+"'"})).join(", "),n="unrecognised field '"+t.str+"', possible fields: "+r;throw new O.QueryParseError(n,t.start,t.end)}e.currentClause.fields=[t.str];var o=e.peekLexeme();if(null==o){n="expecting term, found nothing";throw new O.QueryParseError(n,t.start,t.end)}switch(o.type){case O.QueryLexer.TERM:return O.QueryParser.parseTerm;default:n="expecting term, found '"+o.type+"'";throw new O.QueryParseError(n,o.start,o.end)}}},O.QueryParser.parseTerm=function(e){var t=e.consumeLexeme();if(null!=t){e.currentClause.term=t.str.toLowerCase(),-1!=t.str.indexOf("*")&&(e.currentClause.usePipeline=!1);var r=e.peekLexeme();if(null!=r)switch(r.type){case O.QueryLexer.TERM:return e.nextClause(),O.QueryParser.parseTerm;case O.QueryLexer.FIELD:return e.nextClause(),O.QueryParser.parseField;case O.QueryLexer.EDIT_DISTANCE:return O.QueryParser.parseEditDistance;case O.QueryLexer.BOOST:return O.QueryParser.parseBoost;case O.QueryLexer.PRESENCE:return e.nextClause(),O.QueryParser.parsePresence;default:var n="Unexpected lexeme type '"+r.type+"'";throw new O.QueryParseError(n,r.start,r.end)}else e.nextClause()}},O.QueryParser.parseEditDistance=function(e){var t=e.consumeLexeme();if(null!=t){var r=parseInt(t.str,10);if(isNaN(r)){var n="edit distance must be numeric";throw new O.QueryParseError(n,t.start,t.end)}e.currentClause.editDistance=r;var o=e.peekLexeme();if(null!=o)switch(o.type){case O.QueryLexer.TERM:return e.nextClause(),O.QueryParser.parseTerm;case O.QueryLexer.FIELD:return e.nextClause(),O.QueryParser.parseField;case O.QueryLexer.EDIT_DISTANCE:return O.QueryParser.parseEditDistance;case O.QueryLexer.BOOST:return O.QueryParser.parseBoost;case O.QueryLexer.PRESENCE:return e.nextClause(),O.QueryParser.parsePresence;default:n="Unexpected lexeme type '"+o.type+"'";throw new O.QueryParseError(n,o.start,o.end)}else e.nextClause()}},O.QueryParser.parseBoost=function(e){var t=e.consumeLexeme();if(null!=t){var r=parseInt(t.str,10);if(isNaN(r)){var n="boost must be numeric";throw new O.QueryParseError(n,t.start,t.end)}e.currentClause.boost=r;var o=e.peekLexeme();if(null!=o)switch(o.type){case O.QueryLexer.TERM:return e.nextClause(),O.QueryParser.parseTerm;case O.QueryLexer.FIELD:return e.nextClause(),O.QueryParser.parseField;case O.QueryLexer.EDIT_DISTANCE:return O.QueryParser.parseEditDistance;case O.QueryLexer.BOOST:return O.QueryParser.parseBoost;case O.QueryLexer.PRESENCE:return e.nextClause(),O.QueryParser.parsePresence;default:n="Unexpected lexeme type '"+o.type+"'";throw new O.QueryParseError(n,o.start,o.end)}else e.nextClause()}},void 0===(o="function"==typeof(n=function(){return O})?n.call(t,r,t,e):n)||(e.exports=o)}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtSetting=t.SettingsSectionName=void 0,t.SettingsSectionName="xd",function(e){e.Editor="globalEditor",e.LastPackage="lastPackage",e.AuthorName="authorName"}(t.ExtSetting||(t.ExtSetting={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBase64Data=void 0,t.parseBase64Data=e=>{let t=null,r=null;if(e){const n=e.match(/^data:(.*);/);n&&(t=n[1],r=e.substring(e.indexOf(",")+1))}return{mime:t,base64:r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeName=t.isValidFileName=void 0;const n="^(CON|PRN|AUX|NUL|COM1|COM2|COM3|COM4|COM5|COM6|COM7|COM8|COM9|LPT1|LPT2|LPT3|LPT4|LPT5|LPT6|LPT7|LPT8|LPT9)",o=[{regex:/\.$/g},{regex:/\0/g},{regex:/[<>:"/\\|?*\s()&]/g},{regex:new RegExp(n+"(?:..*)$","g"),replacer:(e,t="-")=>e.replace(new RegExp(n,"g"),t)}];t.isValidFileName=e=>!(e.length>255)&&void 0===o.find(t=>t.regex.test(e)),t.sanitizeName=(e,t="-")=>{let r=e;return o.forEach(e=>{!0===e.regex.test(r)&&(r=e.replacer?e.replacer(r):r.replace(e.regex,t))}),r}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const c=r(1),l=r(19),u=r(14),d=s(r(2)),h=a(r(9));t.default=new class{constructor(){this.name="xd.search"}execute(){var e;return i(this,void 0,void 0,(function*(){let t;if(h.default.currentFile)t=h.default.currentFile;else if(u.WebViewPanel.currentPanel)d.window.showInformationMessage(c.getString("Toast.Quickpick.Load"));else{(yield d.window.showInformationMessage(c.getString("Toast.Quickpick.Load"),c.getString("Toast.Button.OpenPanel")))===c.getString("Toast.Button.OpenPanel")&&d.commands.executeCommand("xd.toggle")}if(t){const r=t.settings.name,n=t.colors.map(e=>l.entityToQuickpick(e)).concat(t.custom.map(e=>l.entityToQuickpick(e)).concat(t.sizes.map(e=>l.entityToQuickpick(e)).concat(t.aliases.map(e=>l.entityToQuickpick(e)).concat(t.fonts.map(e=>l.entityToQuickpick(e)).concat(t.components.map(e=>l.entityToQuickpick(e))))))),o={canPickMany:!1,matchOnDescription:!0,placeHolder:c.getString("Quickpick.Search.Placeholder",{dspName:r})},s=yield d.window.showQuickPick(n,o),i=null==s?void 0:s.label;i&&(u.WebViewPanel.currentPanel?null===(e=u.WebViewPanel.currentPanel)||void 0===e||e.deeplinkToToken(i):d.commands.executeCommand("xd.toggle",i))}}))}}},function(e,t,r){"use strict";var n=r(3),o=r(0),s=r(112),i=r(114),a=r(124),c=r(125);function l(e,t,r){for(var n,i=t.length,a=-1;++a<i;)if(n=s(t[a])?u(e,t[a],r):d(e,t[a],r))return n;var c=o.dirname(e);return c===e?null:l(c,t,r)}function u(e,t,r){for(var s=c.matcher(t,r),i=function(e){try{return n.readdirSync(e)}catch(e){}return[]}(e),a=i.length,l=-1;++l<a;){var u=i[l],d=o.join(e,u);if(s(u)||s(d))return d}return null}function d(e,t,r){var n=e?o.resolve(e,t):t;return a(n,r)}e.exports=function(e,t){t=t||{};var r=o.resolve(i(t.cwd||""));if("string"==typeof e)return l(r,[e],t);if(!Array.isArray(e))throw new TypeError("findup-sync expects a string or array as the first argument.");return l(r,e,t)}},function(e,t,r){var n=r(113),o={"{":"}","(":")","[":"]"},s=/\\(.)|(^!|\*|[\].+)]\?|\[[^\\\]]+\]|\{[^\\}]+\}|\(\?[:!=][^\\)]+\)|\([^|]+\|[^\\)]+\))/,i=/\\(.)|(^!|[*?{}()[\]]|\(\?)/;e.exports=function(e,t){if("string"!=typeof e||""===e)return!1;if(n(e))return!0;var r,a=s;for(t&&!1===t.strict&&(a=i);r=a.exec(e);){if(r[2])return!0;var c=r.index+r[0].length,l=r[1],u=l?o[l]:null;if(l&&u){var d=e.indexOf(u,c);-1!==d&&(c=d+1)}e=e.slice(c)}return!1}},function(e,t){e.exports=function(e){if("string"!=typeof e||""===e)return!1;for(var t;t=/(\\).|([@?!+*]\(.*\))/g.exec(e);){if(t[2])return!0;e=e.slice(t.index+t[0].length)}return!1}},function(e,t,r){"use strict";var n=r(0),o=r(52),s=r(117);e.exports=function(e){return"~"===e.charAt(0)&&(e=o(e)),"@"===e.charAt(0)&&(e=n.join(s,e.slice(1))),e}},function(e,t,r){"use strict";var n=r(3),o=r(116);e.exports=function(){if("win32"===process.platform)return process.env.USERPROFILE?process.env.USERPROFILE:process.env.HOMEDRIVE&&process.env.HOMEPATH?process.env.HOMEDRIVE+process.env.HOMEPATH:process.env.HOME?process.env.HOME:null;if(process.env.HOME)return process.env.HOME;var e=function(e){try{return n.readFileSync(e,"utf8")}catch(e){return""}}("/etc/passwd"),t=function(e,t){for(var r=e.length,n=0;n<r;n++)if(+e[n].uid===t)return e[n].homedir}(o(e),function(){if("function"==typeof process.geteuid)return process.geteuid();return process.getuid()}());if(t)return t;var r=process.env.LOGNAME||process.env.USER||process.env.LNAME||process.env.USERNAME;return r?"darwin"===process.platform?"/Users/"+r:"/home/"+r:null}},function(e,t,r){"use strict";function n(e,t){if(!e||!e.length||"#"===e.charAt(0))return null;var r=e.split(":");return{username:r[0],password:r[1],uid:r[2],gid:r[3],gecos:r[4],homedir:r[5],shell:r[6]}}e.exports=function(e){if("string"!=typeof e)throw new Error("expected a string");return e.split("\n").map(n).filter(Boolean)}},function(e,t,r){"use strict";(function(e){var t,n=r(0),o=r(118),s=r(55);Object.defineProperty(e,"exports",{enumerable:!0,get:function(){return t||(t=s()?n.resolve(o,"node_modules"):n.resolve(o,"lib/node_modules"))}})}).call(this,r(54)(e))},function(e,t,r){"use strict";(function(e){var t,n=r(3),o=r(0),s=r(52),i=r(53),a=r(119);function c(){if(process.env.PREFIX)t=process.env.PREFIX;else{var e=i();if(e){var a=o.resolve(e,".npmrc");t=l(a)}if(!t){var c=function(){try{return n.realpathSync(r(120).sync("npm"))}catch(e){}return null}();if(c){var u=o.resolve(c,"..","..","npmrc");if(t=l(u)){var d=o.resolve(t,"etc","npmrc");t=l(d)||t}}t||(r(55)()?t=process.env.APPDATA?o.join(process.env.APPDATA,"npm"):o.dirname(process.execPath):(t=o.dirname(o.dirname(process.execPath)),process.env.DESTDIR&&(t=o.join(process.env.DESTDIR,t))))}}if(t)return s(t)}function l(e){try{var t=n.readFileSync(e,"utf-8"),r=a.parse(t);if(r.prefix)return r.prefix}catch(e){}return null}Object.defineProperty(e,"exports",{enumerable:!0,get:function(){return t||(t=c())}})}).call(this,r(54)(e))},function(e,t){t.parse=t.decode=function(e){var t={},r=t,o=null,s=/^\[([^\]]*)\]$|^([^=]+)(=(.*))?$/i;return e.split(/[\r\n]+/g).forEach((function(e,n,a){if(e&&!e.match(/^\s*[;#]/)){var c=e.match(s);if(c){if(void 0!==c[1])return o=i(c[1]),void(r=t[o]=t[o]||{});var l=i(c[2]),u=!c[3]||i(c[4]);switch(u){case"true":case"false":case"null":u=JSON.parse(u)}l.length>2&&"[]"===l.slice(-2)&&(l=l.substring(0,l.length-2),r[l]?Array.isArray(r[l])||(r[l]=[r[l]]):r[l]=[]),Array.isArray(r[l])?r[l].push(u):r[l]=u}}})),Object.keys(t).filter((function(e,r,o){if(!t[e]||"object"!=typeof t[e]||Array.isArray(t[e]))return!1;var s=n(e),i=t,a=s.pop(),c=a.replace(/\\\./g,".");return s.forEach((function(e,t,r){i[e]&&"object"==typeof i[e]||(i[e]={}),i=i[e]})),(i!==t||c!==a)&&(i[c]=t[e],!0)})).forEach((function(e,r,n){delete t[e]})),t},t.stringify=t.encode=function e(t,o){var i=[],a="";"string"==typeof o?o={section:o,whitespace:!1}:(o=o||{}).whitespace=!0===o.whitespace;var c=o.whitespace?" = ":"=";Object.keys(t).forEach((function(e,n,o){var l=t[e];l&&Array.isArray(l)?l.forEach((function(t){a+=s(e+"[]")+c+s(t)+"\n"})):l&&"object"==typeof l?i.push(e):a+=s(e)+c+s(l)+r})),o.section&&a.length&&(a="["+s(o.section)+"]"+r+a);return i.forEach((function(s,i,c){var l=n(s).join("\\."),u=(o.section?o.section+".":"")+l,d=e(t[s],{section:u,whitespace:o.whitespace});a.length&&d.length&&(a+=r),a+=d})),a},t.safe=s,t.unsafe=i;var r="undefined"!=typeof process&&"win32"===process.platform?"\r\n":"\n";function n(e){return e.replace(/\1/g,"LITERAL\\1LITERAL").replace(/\\\./g,"").split(/\./).map((function(e){return e.replace(/\1/g,"\\.").replace(/\2LITERAL\\1LITERAL\2/g,"")}))}function o(e){return'"'===e.charAt(0)&&'"'===e.slice(-1)||"'"===e.charAt(0)&&"'"===e.slice(-1)}function s(e){return"string"!=typeof e||e.match(/[=\r\n]/)||e.match(/^\[/)||e.length>1&&o(e)||e!==e.trim()?JSON.stringify(e):e.replace(/;/g,"\\;").replace(/#/g,"\\#")}function i(e,t){if(!o(e=(e||"").trim())){for(var r=!1,n="",s=0,i=e.length;s<i;s++){var a=e.charAt(s);if(r)-1!=="\\;#".indexOf(a)?n+=a:n+="\\"+a,r=!1;else{if(-1!==";#".indexOf(a))break;"\\"===a?r=!0:n+=a}}return r&&(n+="\\"),n.trim()}"'"===e.charAt(0)&&(e=e.substr(1,e.length-2));try{e=JSON.parse(e)}catch(e){}return e}},function(e,t,r){e.exports=l,l.sync=function(e,t){for(var r=c(e,t=t||{}),n=r.env,s=r.ext,l=r.extExe,u=[],d=0,h=n.length;d<h;d++){var p=n[d];'"'===p.charAt(0)&&'"'===p.slice(-1)&&(p=p.slice(1,-1));var f=o.join(p,e);!p&&/^\.[\\\/]/.test(e)&&(f=e.slice(0,2)+f);for(var m=0,g=s.length;m<g;m++){var y=f+s[m];try{if(i.sync(y,{pathExt:l})){if(!t.all)return y;u.push(y)}}catch(e){}}}if(t.all&&u.length)return u;if(t.nothrow)return null;throw a(e)};var n="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,o=r(0),s=n?";":":",i=r(121);function a(e){var t=new Error("not found: "+e);return t.code="ENOENT",t}function c(e,t){var r=t.colon||s,o=t.path||process.env.PATH||"",i=[""];o=o.split(r);var a="";return n&&(o.unshift(process.cwd()),i=(a=t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM").split(r),-1!==e.indexOf(".")&&""!==i[0]&&i.unshift("")),(e.match(/\//)||n&&e.match(/\\/))&&(o=[""]),{env:o,ext:i,extExe:a}}function l(e,t,r){"function"==typeof t&&(r=t,t={});var n=c(e,t),s=n.env,l=n.ext,u=n.extExe,d=[];!function n(c,h){if(c===h)return t.all&&d.length?r(null,d):r(a(e));var p=s[c];'"'===p.charAt(0)&&'"'===p.slice(-1)&&(p=p.slice(1,-1));var f=o.join(p,e);!p&&/^\.[\\\/]/.test(e)&&(f=e.slice(0,2)+f),function e(o,s){if(o===s)return n(c+1,h);var a=l[o];i(f+a,{pathExt:u},(function(n,i){if(!n&&i){if(!t.all)return r(null,f+a);d.push(f+a)}return e(o+1,s)}))}(0,l.length)}(0,s.length)}},function(e,t,r){var n;r(3);function o(e,t,r){if("function"==typeof t&&(r=t,t={}),!r){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise((function(r,n){o(e,t||{},(function(e,t){e?n(e):r(t)}))}))}n(e,t||{},(function(e,n){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,n=!1),r(e,n)}))}n="win32"===process.platform||global.TESTING_WINDOWS?r(122):r(123),e.exports=o,o.sync=function(e,t){try{return n.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}},function(e,t,r){e.exports=s,s.sync=function(e,t){return o(n.statSync(e),e,t)};var n=r(3);function o(e,t,r){return!(!e.isSymbolicLink()&&!e.isFile())&&function(e,t){var r=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!r)return!0;if(-1!==(r=r.split(";")).indexOf(""))return!0;for(var n=0;n<r.length;n++){var o=r[n].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}(t,r)}function s(e,t,r){n.stat(e,(function(n,s){r(n,!n&&o(s,e,t))}))}},function(e,t,r){e.exports=o,o.sync=function(e,t){return s(n.statSync(e),t)};var n=r(3);function o(e,t,r){n.stat(e,(function(e,n){r(e,!e&&s(n,t))}))}function s(e,t){return e.isFile()&&function(e,t){var r=e.mode,n=e.uid,o=e.gid,s=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),i=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8),l=parseInt("001",8),u=a|c;return r&l||r&c&&o===i||r&a&&n===s||r&u&&0===s}(e,t)}},function(e,t,r){"use strict";var n=r(3),o=r(0);e.exports=function(e,t){return e&&"string"==typeof e?n.existsSync(e)?o.resolve(e):!0===(t=t||{}).nocase?function(e){var t=function(e){var t={path:e,files:[]};try{return t.files=n.readdirSync(e),t}catch(e){}try{return t.path=o.dirname(e),t.files=n.readdirSync(t.path),t}catch(e){}return null}(e=o.resolve(e));if(null===t)return null;if(t.path===e)return t.path;var r=e.toUpperCase(),s=t.files.length,i=-1;for(;++i<s;){var a=o.resolve(t.path,t.files[i]);if(e===a||r===a)return a;var c=a.toUpperCase();if(e===c||r===c)return a}return null}(e):null:null}},function(e,t,r){"use strict";const n=r(6),o=r(126),s=r(133),i=r(20),a=e=>"string"==typeof e&&(""===e||"./"===e),c=(e,t,r)=>{t=[].concat(t),e=[].concat(e);let n=new Set,o=new Set,i=new Set,a=0,c=e=>{i.add(e.output),r&&r.onResult&&r.onResult(e)};for(let i=0;i<t.length;i++){let l=s(String(t[i]),{...r,onResult:c},!0),u=l.state.negated||l.state.negatedExtglob;u&&a++;for(let t of e){let e=l(t,!0);(u?!e.isMatch:e.isMatch)&&(u?n.add(e.output):(n.delete(e.output),o.add(e.output)))}}let l=(a===t.length?[...i]:[...o]).filter(e=>!n.has(e));if(r&&0===l.length){if(!0===r.failglob)throw new Error(`No matches found for "${t.join(", ")}"`);if(!0===r.nonull||!0===r.nullglob)return r.unescape?t.map(e=>e.replace(/\\/g,"")):t}return l};c.match=c,c.matcher=(e,t)=>s(e,t),c.any=c.isMatch=(e,t,r)=>s(t,r)(e),c.not=(e,t,r={})=>{t=[].concat(t).map(String);let n=new Set,o=[],s=c(e,t,{...r,onResult:e=>{r.onResult&&r.onResult(e),o.push(e.output)}});for(let e of o)s.includes(e)||n.add(e);return[...n]},c.contains=(e,t,r)=>{if("string"!=typeof e)throw new TypeError(`Expected a string: "${n.inspect(e)}"`);if(Array.isArray(t))return t.some(t=>c.contains(e,t,r));if("string"==typeof t){if(a(e)||a(t))return!1;if(e.includes(t)||e.startsWith("./")&&e.slice(2).includes(t))return!0}return c.isMatch(e,t,{...r,contains:!0})},c.matchKeys=(e,t,r)=>{if(!i.isObject(e))throw new TypeError("Expected the first argument to be an object");let n=c(Object.keys(e),t,r),o={};for(let t of n)o[t]=e[t];return o},c.some=(e,t,r)=>{let n=[].concat(e);for(let e of[].concat(t)){let t=s(String(e),r);if(n.some(e=>t(e)))return!0}return!1},c.every=(e,t,r)=>{let n=[].concat(e);for(let e of[].concat(t)){let t=s(String(e),r);if(!n.every(e=>t(e)))return!1}return!0},c.all=(e,t,r)=>{if("string"!=typeof e)throw new TypeError(`Expected a string: "${n.inspect(e)}"`);return[].concat(t).every(t=>s(t,r)(e))},c.capture=(e,t,r)=>{let n=i.isWindows(r),o=s.makeRe(String(e),{...r,capture:!0}).exec(n?i.toPosixSlashes(t):t);if(o)return o.slice(1).map(e=>void 0===e?"":e)},c.makeRe=(...e)=>s.makeRe(...e),c.scan=(...e)=>s.scan(...e),c.parse=(e,t)=>{let r=[];for(let n of[].concat(e||[]))for(let e of o(String(n),t))r.push(s.parse(e,t));return r},c.braces=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");return t&&!0===t.nobrace||!/\{.*\}/.test(e)?[e]:o(e,t)},c.braceExpand=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");return c.braces(e,{...t,expand:!0})},e.exports=c},function(e,t,r){"use strict";const n=r(32),o=r(127),s=r(130),i=r(131),a=(e,t={})=>{let r=[];if(Array.isArray(e))for(let n of e){let e=a.create(n,t);Array.isArray(e)?r.push(...e):r.push(e)}else r=[].concat(a.create(e,t));return t&&!0===t.expand&&!0===t.nodupes&&(r=[...new Set(r)]),r};a.parse=(e,t={})=>i(e,t),a.stringify=(e,t={})=>n("string"==typeof e?a.parse(e,t):e,t),a.compile=(e,t={})=>("string"==typeof e&&(e=a.parse(e,t)),o(e,t)),a.expand=(e,t={})=>{"string"==typeof e&&(e=a.parse(e,t));let r=s(e,t);return!0===t.noempty&&(r=r.filter(Boolean)),!0===t.nodupes&&(r=[...new Set(r)]),r},a.create=(e,t={})=>""===e||e.length<3?[e]:!0!==t.expand?a.compile(e,t):a.expand(e,t),e.exports=a},function(e,t,r){"use strict";const n=r(56),o=r(33);e.exports=(e,t={})=>{let r=(e,s={})=>{let i=o.isInvalidBrace(s),a=!0===e.invalid&&!0===t.escapeInvalid,c=!0===i||!0===a,l=!0===t.escapeInvalid?"\\":"",u="";if(!0===e.isOpen)return l+e.value;if(!0===e.isClose)return l+e.value;if("open"===e.type)return c?l+e.value:"(";if("close"===e.type)return c?l+e.value:")";if("comma"===e.type)return"comma"===e.prev.type?"":c?e.value:"|";if(e.value)return e.value;if(e.nodes&&e.ranges>0){let r=o.reduce(e.nodes),s=n(...r,{...t,wrap:!1,toRegex:!0});if(0!==s.length)return r.length>1&&s.length>1?`(${s})`:s}if(e.nodes)for(let t of e.nodes)u+=r(t,e);return u};return r(e)}},function(e,t,r){"use strict";const n=r(129),o=(e,t,r)=>{if(!1===n(e))throw new TypeError("toRegexRange: expected the first argument to be a number");if(void 0===t||e===t)return String(e);if(!1===n(t))throw new TypeError("toRegexRange: expected the second argument to be a number.");let s={relaxZeros:!0,...r};"boolean"==typeof s.strictZeros&&(s.relaxZeros=!1===s.strictZeros);let c=e+":"+t+"="+String(s.relaxZeros)+String(s.shorthand)+String(s.capture)+String(s.wrap);if(o.cache.hasOwnProperty(c))return o.cache[c].result;let l=Math.min(e,t),u=Math.max(e,t);if(1===Math.abs(l-u)){let r=e+"|"+t;return s.capture?`(${r})`:!1===s.wrap?r:`(?:${r})`}let d=f(e)||f(t),h={min:e,max:t,a:l,b:u},p=[],m=[];if(d&&(h.isPadded=d,h.maxLen=String(h.max).length),l<0){m=i(u<0?Math.abs(u):1,Math.abs(l),h,s),l=h.a=0}return u>=0&&(p=i(l,u,h,s)),h.negatives=m,h.positives=p,h.result=function(e,t,r){let n=a(e,t,"-",!1,r)||[],o=a(t,e,"",!1,r)||[],s=a(e,t,"-?",!0,r)||[];return n.concat(s).concat(o).join("|")}(m,p,s),!0===s.capture?h.result=`(${h.result})`:!1!==s.wrap&&p.length+m.length>1&&(h.result=`(?:${h.result})`),o.cache[c]=h,h.result};function s(e,t,r){if(e===t)return{pattern:e,count:[],digits:0};let n=function(e,t){let r=[];for(let n=0;n<e.length;n++)r.push([e[n],t[n]]);return r}(e,t),o=n.length,s="",i=0;for(let e=0;e<o;e++){let[t,o]=n[e];t===o?s+=t:"0"!==t||"9"!==o?s+=p(t,o,r):i++}return i&&(s+=!0===r.shorthand?"\\d":"[0-9]"),{pattern:s,count:[i],digits:o}}function i(e,t,r,n){let o,i=function(e,t){let r=1,n=1,o=u(e,r),s=new Set([t]);for(;e<=o&&o<=t;)s.add(o),r+=1,o=u(e,r);for(o=d(t+1,n)-1;e<o&&o<=t;)s.add(o),n+=1,o=d(t+1,n)-1;return s=[...s],s.sort(c),s}(e,t),a=[],l=e;for(let e=0;e<i.length;e++){let t=i[e],c=s(String(l),String(t),n),u="";r.isPadded||!o||o.pattern!==c.pattern?(r.isPadded&&(u=m(t,r,n)),c.string=u+c.pattern+h(c.count),a.push(c),l=t+1,o=c):(o.count.length>1&&o.count.pop(),o.count.push(c.count[0]),o.string=o.pattern+h(o.count),l=t+1)}return a}function a(e,t,r,n,o){let s=[];for(let o of e){let{string:e}=o;n||l(t,"string",e)||s.push(r+e),n&&l(t,"string",e)&&s.push(r+e)}return s}function c(e,t){return e>t?1:t>e?-1:0}function l(e,t,r){return e.some(e=>e[t]===r)}function u(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function d(e,t){return e-e%Math.pow(10,t)}function h(e){let[t=0,r=""]=e;return r||t>1?`{${t+(r?","+r:"")}}`:""}function p(e,t,r){return`[${e}${t-e==1?"":"-"}${t}]`}function f(e){return/^-?(0+)\d/.test(e)}function m(e,t,r){if(!t.isPadded)return e;let n=Math.abs(t.maxLen-String(e).length),o=!1!==r.relaxZeros;switch(n){case 0:return"";case 1:return o?"0?":"0";case 2:return o?"0{0,2}":"00";default:return o?`0{0,${n}}`:`0{${n}}`}}o.cache={},o.clearCache=()=>o.cache={},e.exports=o},function(e,t,r){"use strict";e.exports=function(e){return"number"==typeof e?e-e==0:"string"==typeof e&&""!==e.trim()&&(Number.isFinite?Number.isFinite(+e):isFinite(+e))}},function(e,t,r){"use strict";const n=r(56),o=r(32),s=r(33),i=(e="",t="",r=!1)=>{let n=[];if(e=[].concat(e),!(t=[].concat(t)).length)return e;if(!e.length)return r?s.flatten(t).map(e=>`{${e}}`):t;for(let o of e)if(Array.isArray(o))for(let e of o)n.push(i(e,t,r));else for(let e of t)!0===r&&"string"==typeof e&&(e=`{${e}}`),n.push(Array.isArray(e)?i(o,e,r):o+e);return s.flatten(n)};e.exports=(e,t={})=>{let r=void 0===t.rangeLimit?1e3:t.rangeLimit,a=(e,c={})=>{e.queue=[];let l=c,u=c.queue;for(;"brace"!==l.type&&"root"!==l.type&&l.parent;)l=l.parent,u=l.queue;if(e.invalid||e.dollar)return void u.push(i(u.pop(),o(e,t)));if("brace"===e.type&&!0!==e.invalid&&2===e.nodes.length)return void u.push(i(u.pop(),["{}"]));if(e.nodes&&e.ranges>0){let a=s.reduce(e.nodes);if(s.exceedsLimit(...a,t.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let c=n(...a,t);return 0===c.length&&(c=o(e,t)),u.push(i(u.pop(),c)),void(e.nodes=[])}let d=s.encloseBrace(e),h=e.queue,p=e;for(;"brace"!==p.type&&"root"!==p.type&&p.parent;)p=p.parent,h=p.queue;for(let t=0;t<e.nodes.length;t++){let r=e.nodes[t];"comma"!==r.type||"brace"!==e.type?"close"!==r.type?r.value&&"open"!==r.type?h.push(i(h.pop(),r.value)):r.nodes&&a(r,e):u.push(i(u.pop(),h,d)):(1===t&&h.push(""),h.push(""))}return h};return s.flatten(a(e))}},function(e,t,r){"use strict";const n=r(32),{MAX_LENGTH:o,CHAR_BACKSLASH:s,CHAR_BACKTICK:i,CHAR_COMMA:a,CHAR_DOT:c,CHAR_LEFT_PARENTHESES:l,CHAR_RIGHT_PARENTHESES:u,CHAR_LEFT_CURLY_BRACE:d,CHAR_RIGHT_CURLY_BRACE:h,CHAR_LEFT_SQUARE_BRACKET:p,CHAR_RIGHT_SQUARE_BRACKET:f,CHAR_DOUBLE_QUOTE:m,CHAR_SINGLE_QUOTE:g,CHAR_NO_BREAK_SPACE:y,CHAR_ZERO_WIDTH_NOBREAK_SPACE:v}=r(132);e.exports=(e,t={})=>{if("string"!=typeof e)throw new TypeError("Expected a string");let r=t||{},b="number"==typeof r.maxLength?Math.min(o,r.maxLength):o;if(e.length>b)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${b})`);let w,S={type:"root",input:e,nodes:[]},E=[S],_=S,P=S,x=0,k=e.length,C=0,T=0;const A=()=>e[C++],O=e=>{if("text"===e.type&&"dot"===P.type&&(P.type="text"),!P||"text"!==P.type||"text"!==e.type)return _.nodes.push(e),e.parent=_,e.prev=P,P=e,e;P.value+=e.value};for(O({type:"bos"});C<k;)if(_=E[E.length-1],w=A(),w!==v&&w!==y)if(w!==s)if(w!==f)if(w!==p)if(w!==l)if(w!==u)if(w!==m&&w!==g&&w!==i)if(w!==d)if(w!==h)if(w===a&&T>0){if(_.ranges>0){_.ranges=0;let e=_.nodes.shift();_.nodes=[e,{type:"text",value:n(_)}]}O({type:"comma",value:w}),_.commas++}else if(w===c&&T>0&&0===_.commas){let e=_.nodes;if(0===T||0===e.length){O({type:"text",value:w});continue}if("dot"===P.type){if(_.range=[],P.value+=w,P.type="range",3!==_.nodes.length&&5!==_.nodes.length){_.invalid=!0,_.ranges=0,P.type="text";continue}_.ranges++,_.args=[];continue}if("range"===P.type){e.pop();let t=e[e.length-1];t.value+=P.value+w,P=t,_.ranges--;continue}O({type:"dot",value:w})}else O({type:"text",value:w});else{if("brace"!==_.type){O({type:"text",value:w});continue}let e="close";_=E.pop(),_.close=!0,O({type:e,value:w}),T--,_=E[E.length-1]}else{T++;let e=P.value&&"$"===P.value.slice(-1)||!0===_.dollar;_=O({type:"brace",open:!0,close:!1,dollar:e,depth:T,commas:0,ranges:0,nodes:[]}),E.push(_),O({type:"open",value:w})}else{let e,r=w;for(!0!==t.keepQuotes&&(w="");C<k&&(e=A());)if(e!==s){if(e===r){!0===t.keepQuotes&&(w+=e);break}w+=e}else w+=e+A();O({type:"text",value:w})}else{if("paren"!==_.type){O({type:"text",value:w});continue}_=E.pop(),O({type:"text",value:w}),_=E[E.length-1]}else _=O({type:"paren",nodes:[]}),E.push(_),O({type:"text",value:w});else{x++;let e;for(;C<k&&(e=A());)if(w+=e,e!==p)if(e!==s){if(e===f&&(x--,0===x))break}else w+=A();else x++;O({type:"text",value:w})}else O({type:"text",value:"\\"+w});else O({type:"text",value:(t.keepEscaping?w:"")+A()});do{if(_=E.pop(),"root"!==_.type){_.nodes.forEach(e=>{e.nodes||("open"===e.type&&(e.isOpen=!0),"close"===e.type&&(e.isClose=!0),e.nodes||(e.type="text"),e.invalid=!0)});let e=E[E.length-1],t=e.nodes.indexOf(_);e.nodes.splice(t,1,..._.nodes)}}while(E.length>0);return O({type:"eos"}),S}},function(e,t,r){"use strict";e.exports={MAX_LENGTH:65536,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:"\n",CHAR_NO_BREAK_SPACE:" ",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"\t",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\ufeff"}},function(e,t,r){"use strict";e.exports=r(134)},function(e,t,r){"use strict";const n=r(0),o=r(135),s=r(136),i=r(20),a=r(21),c=(e,t,r=!1)=>{if(Array.isArray(e)){const n=e.map(e=>c(e,t,r));return e=>{for(const t of n){const r=t(e);if(r)return r}return!1}}const n=(o=e)&&"object"==typeof o&&!Array.isArray(o)&&e.tokens&&e.input;var o;if(""===e||"string"!=typeof e&&!n)throw new TypeError("Expected pattern to be a non-empty string");const s=t||{},a=i.isWindows(t),l=n?c.compileRe(e,t):c.makeRe(e,t,!1,!0),u=l.state;delete l.state;let d=()=>!1;if(s.ignore){const e={...t,ignore:null,onMatch:null,onResult:null};d=c(s.ignore,e,r)}const h=(r,n=!1)=>{const{isMatch:o,match:i,output:h}=c.test(r,l,t,{glob:e,posix:a}),p={glob:e,state:u,regex:l,posix:a,input:r,output:h,match:i,isMatch:o};return"function"==typeof s.onResult&&s.onResult(p),!1===o?(p.isMatch=!1,!!n&&p):d(r)?("function"==typeof s.onIgnore&&s.onIgnore(p),p.isMatch=!1,!!n&&p):("function"==typeof s.onMatch&&s.onMatch(p),!n||p)};return r&&(h.state=u),h};c.test=(e,t,r,{glob:n,posix:o}={})=>{if("string"!=typeof e)throw new TypeError("Expected input to be a string");if(""===e)return{isMatch:!1,output:""};const s=r||{},a=s.format||(o?i.toPosixSlashes:null);let l=e===n,u=l&&a?a(e):e;return!1===l&&(u=a?a(e):e,l=u===n),!1!==l&&!0!==s.capture||(l=!0===s.matchBase||!0===s.basename?c.matchBase(e,t,r,o):t.exec(u)),{isMatch:Boolean(l),match:l,output:u}},c.matchBase=(e,t,r,o=i.isWindows(r))=>(t instanceof RegExp?t:c.makeRe(t,r)).test(n.basename(e)),c.isMatch=(e,t,r)=>c(t,r)(e),c.parse=(e,t)=>Array.isArray(e)?e.map(e=>c.parse(e,t)):s(e,{...t,fastpaths:!1}),c.scan=(e,t)=>o(e,t),c.compileRe=(e,t,r=!1,n=!1)=>{if(!0===r)return e.output;const o=t||{},s=o.contains?"":"^",i=o.contains?"":"$";let a=`${s}(?:${e.output})${i}`;e&&!0===e.negated&&(a=`^(?!${a}).*$`);const l=c.toRegex(a,t);return!0===n&&(l.state=e),l},c.makeRe=(e,t,r=!1,n=!1)=>{if(!e||"string"!=typeof e)throw new TypeError("Expected a non-empty string");const o=t||{};let i,a={negated:!1,fastpaths:!0},l="";return e.startsWith("./")&&(e=e.slice(2),l=a.prefix="./"),!1===o.fastpaths||"."!==e[0]&&"*"!==e[0]||(i=s.fastpaths(e,t)),void 0===i?(a=s(e,t),a.prefix=l+(a.prefix||"")):a.output=i,c.compileRe(a,t,r,n)},c.toRegex=(e,t)=>{try{const r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(e){if(t&&!0===t.debug)throw e;return/$^/}},c.constants=a,e.exports=c},function(e,t,r){"use strict";const n=r(20),{CHAR_ASTERISK:o,CHAR_AT:s,CHAR_BACKWARD_SLASH:i,CHAR_COMMA:a,CHAR_DOT:c,CHAR_EXCLAMATION_MARK:l,CHAR_FORWARD_SLASH:u,CHAR_LEFT_CURLY_BRACE:d,CHAR_LEFT_PARENTHESES:h,CHAR_LEFT_SQUARE_BRACKET:p,CHAR_PLUS:f,CHAR_QUESTION_MARK:m,CHAR_RIGHT_CURLY_BRACE:g,CHAR_RIGHT_PARENTHESES:y,CHAR_RIGHT_SQUARE_BRACKET:v}=r(21),b=e=>e===u||e===i,w=e=>{!0!==e.isPrefix&&(e.depth=e.isGlobstar?1/0:1)};e.exports=(e,t)=>{const r=t||{},S=e.length-1,E=!0===r.parts||!0===r.scanToEnd,_=[],P=[],x=[];let k,C,T=e,A=-1,O=0,R=0,D=!1,L=!1,F=!1,j=!1,I=!1,M=!1,N=!1,$=!1,H=!1,U=0,B={value:"",depth:0,isGlob:!1};const z=()=>A>=S,q=()=>(k=C,T.charCodeAt(++A));for(;A<S;){let e;if(C=q(),C!==i){if(!0===M||C===d){for(U++;!0!==z()&&(C=q());)if(C!==i)if(C!==d){if(!0!==M&&C===c&&(C=q())===c){if(D=B.isBrace=!0,F=B.isGlob=!0,H=!0,!0===E)continue;break}if(!0!==M&&C===a){if(D=B.isBrace=!0,F=B.isGlob=!0,H=!0,!0===E)continue;break}if(C===g&&(U--,0===U)){M=!1,D=B.isBrace=!0,H=!0;break}}else U++;else N=B.backslashes=!0,q();if(!0===E)continue;break}if(C!==u){if(!0!==r.noext){if(!0===(C===f||C===s||C===o||C===m||C===l)&&T.charCodeAt(A+1)===h){if(F=B.isGlob=!0,j=B.isExtglob=!0,H=!0,!0===E){for(;!0!==z()&&(C=q());)if(C!==i){if(C===y){F=B.isGlob=!0,H=!0;break}}else N=B.backslashes=!0,C=q();continue}break}}if(C===o){if(k===o&&(I=B.isGlobstar=!0),F=B.isGlob=!0,H=!0,!0===E)continue;break}if(C===m){if(F=B.isGlob=!0,H=!0,!0===E)continue;break}if(C===p)for(;!0!==z()&&(e=q());)if(e!==i){if(e===v){if(L=B.isBracket=!0,F=B.isGlob=!0,H=!0,!0===E)continue;break}}else N=B.backslashes=!0,q();if(!0===r.nonegate||C!==l||A!==O){if(!0!==r.noparen&&C===h){if(F=B.isGlob=!0,!0===E){for(;!0!==z()&&(C=q());)if(C!==h){if(C===y){H=!0;break}}else N=B.backslashes=!0,C=q();continue}break}if(!0===F){if(H=!0,!0===E)continue;break}}else $=B.negated=!0,O++}else{if(_.push(A),P.push(B),B={value:"",depth:0,isGlob:!1},!0===H)continue;if(k===c&&A===O+1){O+=2;continue}R=A+1}}else N=B.backslashes=!0,C=q(),C===d&&(M=!0)}!0===r.noext&&(j=!1,F=!1);let V=T,Q="",W="";O>0&&(Q=T.slice(0,O),T=T.slice(O),R-=O),V&&!0===F&&R>0?(V=T.slice(0,R),W=T.slice(R)):!0===F?(V="",W=T):V=T,V&&""!==V&&"/"!==V&&V!==T&&b(V.charCodeAt(V.length-1))&&(V=V.slice(0,-1)),!0===r.unescape&&(W&&(W=n.removeBackslashes(W)),V&&!0===N&&(V=n.removeBackslashes(V)));const G={prefix:Q,input:e,start:O,base:V,glob:W,isBrace:D,isBracket:L,isGlob:F,isExtglob:j,isGlobstar:I,negated:$};if(!0===r.tokens&&(G.maxDepth=0,b(C)||P.push(B),G.tokens=P),!0===r.parts||!0===r.tokens){let t;for(let n=0;n<_.length;n++){const o=t?t+1:O,s=_[n],i=e.slice(o,s);r.tokens&&(0===n&&0!==O?(P[n].isPrefix=!0,P[n].value=Q):P[n].value=i,w(P[n]),G.maxDepth+=P[n].depth),0===n&&""===i||x.push(i),t=s}if(t&&t+1<e.length){const n=e.slice(t+1);x.push(n),r.tokens&&(P[P.length-1].value=n,w(P[P.length-1]),G.maxDepth+=P[P.length-1].depth)}G.slashes=_,G.parts=x}return G}},function(e,t,r){"use strict";const n=r(21),o=r(20),{MAX_LENGTH:s,POSIX_REGEX_SOURCE:i,REGEX_NON_SPECIAL_CHARS:a,REGEX_SPECIAL_CHARS_BACKREF:c,REPLACEMENTS:l}=n,u=(e,t)=>{if("function"==typeof t.expandRange)return t.expandRange(...e,t);e.sort();const r=`[${e.join("-")}]`;try{new RegExp(r)}catch(t){return e.map(e=>o.escapeRegex(e)).join("..")}return r},d=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,h=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");e=l[e]||e;const r={...t},h="number"==typeof r.maxLength?Math.min(s,r.maxLength):s;let p=e.length;if(p>h)throw new SyntaxError(`Input length: ${p}, exceeds maximum allowed length: ${h}`);const f={type:"bos",value:"",output:r.prepend||""},m=[f],g=r.capture?"":"?:",y=o.isWindows(t),v=n.globChars(y),b=n.extglobChars(v),{DOT_LITERAL:w,PLUS_LITERAL:S,SLASH_LITERAL:E,ONE_CHAR:_,DOTS_SLASH:P,NO_DOT:x,NO_DOT_SLASH:k,NO_DOTS_SLASH:C,QMARK:T,QMARK_NO_DOT:A,STAR:O,START_ANCHOR:R}=v,D=e=>`(${g}(?:(?!${R}${e.dot?P:w}).)*?)`,L=r.dot?"":x,F=r.dot?T:A;let j=!0===r.bash?D(r):O;r.capture&&(j=`(${j})`),"boolean"==typeof r.noext&&(r.noextglob=r.noext);const I={input:e,index:-1,start:0,dot:!0===r.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:m};e=o.removePrefix(e,I),p=e.length;const M=[],N=[],$=[];let H,U=f;const B=()=>I.index===p-1,z=I.peek=(t=1)=>e[I.index+t],q=I.advance=()=>e[++I.index],V=()=>e.slice(I.index+1),Q=(e="",t=0)=>{I.consumed+=e,I.index+=t},W=e=>{I.output+=null!=e.output?e.output:e.value,Q(e.value)},G=()=>{let e=1;for(;"!"===z()&&("("!==z(2)||"?"===z(3));)q(),I.start++,e++;return e%2!=0&&(I.negated=!0,I.start++,!0)},J=e=>{I[e]++,$.push(e)},K=e=>{I[e]--,$.pop()},X=e=>{if("globstar"===U.type){const t=I.braces>0&&("comma"===e.type||"brace"===e.type),r=!0===e.extglob||M.length&&("pipe"===e.type||"paren"===e.type);"slash"===e.type||"paren"===e.type||t||r||(I.output=I.output.slice(0,-U.output.length),U.type="star",U.value="*",U.output=j,I.output+=U.output)}if(M.length&&"paren"!==e.type&&!b[e.value]&&(M[M.length-1].inner+=e.value),(e.value||e.output)&&W(e),U&&"text"===U.type&&"text"===e.type)return U.value+=e.value,void(U.output=(U.output||"")+e.value);e.prev=U,m.push(e),U=e},Y=(e,t)=>{const n={...b[t],conditions:1,inner:""};n.prev=U,n.parens=I.parens,n.output=I.output;const o=(r.capture?"(":"")+n.open;J("parens"),X({type:e,value:t,output:I.output?"":_}),X({type:"paren",extglob:!0,value:q(),output:o}),M.push(n)},Z=e=>{let t=e.close+(r.capture?")":"");if("negate"===e.type){let n=j;e.inner&&e.inner.length>1&&e.inner.includes("/")&&(n=D(r)),(n!==j||B()||/^\)+$/.test(V()))&&(t=e.close=")$))"+n),"bos"===e.prev.type&&B()&&(I.negatedExtglob=!0)}X({type:"paren",extglob:!0,value:H,output:t}),K("parens")};if(!1!==r.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(e)){let n=!1,s=e.replace(c,(e,t,r,o,s,i)=>"\\"===o?(n=!0,e):"?"===o?t?t+o+(s?T.repeat(s.length):""):0===i?F+(s?T.repeat(s.length):""):T.repeat(r.length):"."===o?w.repeat(r.length):"*"===o?t?t+o+(s?j:""):j:t?e:"\\"+e);return!0===n&&(s=!0===r.unescape?s.replace(/\\/g,""):s.replace(/\\+/g,e=>e.length%2==0?"\\\\":e?"\\":"")),s===e&&!0===r.contains?(I.output=e,I):(I.output=o.wrapOutput(s,I,t),I)}for(;!B();){if(H=q(),"\0"===H)continue;if("\\"===H){const e=z();if("/"===e&&!0!==r.bash)continue;if("."===e||";"===e)continue;if(!e){H+="\\",X({type:"text",value:H});continue}const t=/^\\+/.exec(V());let n=0;if(t&&t[0].length>2&&(n=t[0].length,I.index+=n,n%2!=0&&(H+="\\")),!0===r.unescape?H=q()||"":H+=q()||"",0===I.brackets){X({type:"text",value:H});continue}}if(I.brackets>0&&("]"!==H||"["===U.value||"[^"===U.value)){if(!1!==r.posix&&":"===H){const e=U.value.slice(1);if(e.includes("[")&&(U.posix=!0,e.includes(":"))){const e=U.value.lastIndexOf("["),t=U.value.slice(0,e),r=U.value.slice(e+2),n=i[r];if(n){U.value=t+n,I.backtrack=!0,q(),f.output||1!==m.indexOf(U)||(f.output=_);continue}}}("["===H&&":"!==z()||"-"===H&&"]"===z())&&(H="\\"+H),"]"!==H||"["!==U.value&&"[^"!==U.value||(H="\\"+H),!0===r.posix&&"!"===H&&"["===U.value&&(H="^"),U.value+=H,W({value:H});continue}if(1===I.quotes&&'"'!==H){H=o.escapeRegex(H),U.value+=H,W({value:H});continue}if('"'===H){I.quotes=1===I.quotes?0:1,!0===r.keepQuotes&&X({type:"text",value:H});continue}if("("===H){J("parens"),X({type:"paren",value:H});continue}if(")"===H){if(0===I.parens&&!0===r.strictBrackets)throw new SyntaxError(d("opening","("));const e=M[M.length-1];if(e&&I.parens===e.parens+1){Z(M.pop());continue}X({type:"paren",value:H,output:I.parens?")":"\\)"}),K("parens");continue}if("["===H){if(!0!==r.nobracket&&V().includes("]"))J("brackets");else{if(!0!==r.nobracket&&!0===r.strictBrackets)throw new SyntaxError(d("closing","]"));H="\\"+H}X({type:"bracket",value:H});continue}if("]"===H){if(!0===r.nobracket||U&&"bracket"===U.type&&1===U.value.length){X({type:"text",value:H,output:"\\"+H});continue}if(0===I.brackets){if(!0===r.strictBrackets)throw new SyntaxError(d("opening","["));X({type:"text",value:H,output:"\\"+H});continue}K("brackets");const e=U.value.slice(1);if(!0===U.posix||"^"!==e[0]||e.includes("/")||(H="/"+H),U.value+=H,W({value:H}),!1===r.literalBrackets||o.hasRegexChars(e))continue;const t=o.escapeRegex(U.value);if(I.output=I.output.slice(0,-U.value.length),!0===r.literalBrackets){I.output+=t,U.value=t;continue}U.value=`(${g}${t}|${U.value})`,I.output+=U.value;continue}if("{"===H&&!0!==r.nobrace){J("braces");const e={type:"brace",value:H,output:"(",outputIndex:I.output.length,tokensIndex:I.tokens.length};N.push(e),X(e);continue}if("}"===H){const e=N[N.length-1];if(!0===r.nobrace||!e){X({type:"text",value:H,output:H});continue}let t=")";if(!0===e.dots){const e=m.slice(),n=[];for(let t=e.length-1;t>=0&&(m.pop(),"brace"!==e[t].type);t--)"dots"!==e[t].type&&n.unshift(e[t].value);t=u(n,r),I.backtrack=!0}if(!0!==e.comma&&!0!==e.dots){const r=I.output.slice(0,e.outputIndex),n=I.tokens.slice(e.tokensIndex);e.value=e.output="\\{",H=t="\\}",I.output=r;for(const e of n)I.output+=e.output||e.value}X({type:"brace",value:H,output:t}),K("braces"),N.pop();continue}if("|"===H){M.length>0&&M[M.length-1].conditions++,X({type:"text",value:H});continue}if(","===H){let e=H;const t=N[N.length-1];t&&"braces"===$[$.length-1]&&(t.comma=!0,e="|"),X({type:"comma",value:H,output:e});continue}if("/"===H){if("dot"===U.type&&I.index===I.start+1){I.start=I.index+1,I.consumed="",I.output="",m.pop(),U=f;continue}X({type:"slash",value:H,output:E});continue}if("."===H){if(I.braces>0&&"dot"===U.type){"."===U.value&&(U.output=w);const e=N[N.length-1];U.type="dots",U.output+=H,U.value+=H,e.dots=!0;continue}if(I.braces+I.parens===0&&"bos"!==U.type&&"slash"!==U.type){X({type:"text",value:H,output:w});continue}X({type:"dot",value:H,output:w});continue}if("?"===H){if(!(U&&"("===U.value)&&!0!==r.noextglob&&"("===z()&&"?"!==z(2)){Y("qmark",H);continue}if(U&&"paren"===U.type){const e=z();let t=H;if("<"===e&&!o.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===U.value&&!/[!=<:]/.test(e)||"<"===e&&!/<([!=]|\w+>)/.test(V()))&&(t="\\"+H),X({type:"text",value:H,output:t});continue}if(!0!==r.dot&&("slash"===U.type||"bos"===U.type)){X({type:"qmark",value:H,output:A});continue}X({type:"qmark",value:H,output:T});continue}if("!"===H){if(!0!==r.noextglob&&"("===z()&&("?"!==z(2)||!/[!=<:]/.test(z(3)))){Y("negate",H);continue}if(!0!==r.nonegate&&0===I.index){G();continue}}if("+"===H){if(!0!==r.noextglob&&"("===z()&&"?"!==z(2)){Y("plus",H);continue}if(U&&"("===U.value||!1===r.regex){X({type:"plus",value:H,output:S});continue}if(U&&("bracket"===U.type||"paren"===U.type||"brace"===U.type)||I.parens>0){X({type:"plus",value:H});continue}X({type:"plus",value:S});continue}if("@"===H){if(!0!==r.noextglob&&"("===z()&&"?"!==z(2)){X({type:"at",extglob:!0,value:H,output:""});continue}X({type:"text",value:H});continue}if("*"!==H){"$"!==H&&"^"!==H||(H="\\"+H);const e=a.exec(V());e&&(H+=e[0],I.index+=e[0].length),X({type:"text",value:H});continue}if(U&&("globstar"===U.type||!0===U.star)){U.type="star",U.star=!0,U.value+=H,U.output=j,I.backtrack=!0,I.globstar=!0,Q(H);continue}let t=V();if(!0!==r.noextglob&&/^\([^?]/.test(t)){Y("star",H);continue}if("star"===U.type){if(!0===r.noglobstar){Q(H);continue}const n=U.prev,o=n.prev,s="slash"===n.type||"bos"===n.type,i=o&&("star"===o.type||"globstar"===o.type);if(!0===r.bash&&(!s||t[0]&&"/"!==t[0])){X({type:"star",value:H,output:""});continue}const a=I.braces>0&&("comma"===n.type||"brace"===n.type),c=M.length&&("pipe"===n.type||"paren"===n.type);if(!s&&"paren"!==n.type&&!a&&!c){X({type:"star",value:H,output:""});continue}for(;"/**"===t.slice(0,3);){const r=e[I.index+4];if(r&&"/"!==r)break;t=t.slice(3),Q("/**",3)}if("bos"===n.type&&B()){U.type="globstar",U.value+=H,U.output=D(r),I.output=U.output,I.globstar=!0,Q(H);continue}if("slash"===n.type&&"bos"!==n.prev.type&&!i&&B()){I.output=I.output.slice(0,-(n.output+U.output).length),n.output="(?:"+n.output,U.type="globstar",U.output=D(r)+(r.strictSlashes?")":"|$)"),U.value+=H,I.globstar=!0,I.output+=n.output+U.output,Q(H);continue}if("slash"===n.type&&"bos"!==n.prev.type&&"/"===t[0]){const e=void 0!==t[1]?"|$":"";I.output=I.output.slice(0,-(n.output+U.output).length),n.output="(?:"+n.output,U.type="globstar",U.output=`${D(r)}${E}|${E}${e})`,U.value+=H,I.output+=n.output+U.output,I.globstar=!0,Q(H+q()),X({type:"slash",value:"/",output:""});continue}if("bos"===n.type&&"/"===t[0]){U.type="globstar",U.value+=H,U.output=`(?:^|${E}|${D(r)}${E})`,I.output=U.output,I.globstar=!0,Q(H+q()),X({type:"slash",value:"/",output:""});continue}I.output=I.output.slice(0,-U.output.length),U.type="globstar",U.output=D(r),U.value+=H,I.output+=U.output,I.globstar=!0,Q(H);continue}const n={type:"star",value:H,output:j};!0!==r.bash?!U||"bracket"!==U.type&&"paren"!==U.type||!0!==r.regex?(I.index!==I.start&&"slash"!==U.type&&"dot"!==U.type||("dot"===U.type?(I.output+=k,U.output+=k):!0===r.dot?(I.output+=C,U.output+=C):(I.output+=L,U.output+=L),"*"!==z()&&(I.output+=_,U.output+=_)),X(n)):(n.output=H,X(n)):(n.output=".*?","bos"!==U.type&&"slash"!==U.type||(n.output=L+n.output),X(n))}for(;I.brackets>0;){if(!0===r.strictBrackets)throw new SyntaxError(d("closing","]"));I.output=o.escapeLast(I.output,"["),K("brackets")}for(;I.parens>0;){if(!0===r.strictBrackets)throw new SyntaxError(d("closing",")"));I.output=o.escapeLast(I.output,"("),K("parens")}for(;I.braces>0;){if(!0===r.strictBrackets)throw new SyntaxError(d("closing","}"));I.output=o.escapeLast(I.output,"{"),K("braces")}if(!0===r.strictSlashes||"star"!==U.type&&"bracket"!==U.type||X({type:"maybe_slash",value:"",output:E+"?"}),!0===I.backtrack){I.output="";for(const e of I.tokens)I.output+=null!=e.output?e.output:e.value,e.suffix&&(I.output+=e.suffix)}return I};h.fastpaths=(e,t)=>{const r={...t},i="number"==typeof r.maxLength?Math.min(s,r.maxLength):s,a=e.length;if(a>i)throw new SyntaxError(`Input length: ${a}, exceeds maximum allowed length: ${i}`);e=l[e]||e;const c=o.isWindows(t),{DOT_LITERAL:u,SLASH_LITERAL:d,ONE_CHAR:h,DOTS_SLASH:p,NO_DOT:f,NO_DOTS:m,NO_DOTS_SLASH:g,STAR:y,START_ANCHOR:v}=n.globChars(c),b=r.dot?m:f,w=r.dot?g:f,S=r.capture?"":"?:";let E=!0===r.bash?".*?":y;r.capture&&(E=`(${E})`);const _=e=>!0===e.noglobstar?E:`(${S}(?:(?!${v}${e.dot?p:u}).)*?)`,P=e=>{switch(e){case"*":return`${b}${h}${E}`;case".*":return`${u}${h}${E}`;case"*.*":return`${b}${E}${u}${h}${E}`;case"*/*":return`${b}${E}${d}${h}${w}${E}`;case"**":return b+_(r);case"**/*":return`(?:${b}${_(r)}${d})?${w}${h}${E}`;case"**/*.*":return`(?:${b}${_(r)}${d})?${w}${E}${u}${h}${E}`;case"**/.*":return`(?:${b}${_(r)}${d})?${u}${h}${E}`;default:{const t=/^(.*?)\.(\w+)$/.exec(e);if(!t)return;const r=P(t[1]);if(!r)return;return r+u+t[2]}}},x=o.removePrefix(e,{negated:!1,prefix:""});let k=P(x);return k&&!0!==r.strictSlashes&&(k+=d+"?"),k},e.exports=h},function(e,t){e.exports=require("child_process")},function(e,t,r){var n=r(139),o=process.cwd,s=null,i=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return s||(s=o.call(process)),s};try{process.cwd()}catch(e){}var a=process.chdir;process.chdir=function(e){s=null,a.call(process,e)},e.exports=function(e){n.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,r,o){e.open(t,n.O_WRONLY|n.O_SYMLINK,r,(function(t,n){t?o&&o(t):e.fchmod(n,r,(function(t){e.close(n,(function(e){o&&o(t||e)}))}))}))},e.lchmodSync=function(t,r){var o,s=e.openSync(t,n.O_WRONLY|n.O_SYMLINK,r),i=!0;try{o=e.fchmodSync(s,r),i=!1}finally{if(i)try{e.closeSync(s)}catch(e){}else e.closeSync(s)}return o}}(e);e.lutimes||function(e){n.hasOwnProperty("O_SYMLINK")?(e.lutimes=function(t,r,o,s){e.open(t,n.O_SYMLINK,(function(t,n){t?s&&s(t):e.futimes(n,r,o,(function(t){e.close(n,(function(e){s&&s(t||e)}))}))}))},e.lutimesSync=function(t,r,o){var s,i=e.openSync(t,n.O_SYMLINK),a=!0;try{s=e.futimesSync(i,r,o),a=!1}finally{if(a)try{e.closeSync(i)}catch(e){}else e.closeSync(i)}return s}):(e.lutimes=function(e,t,r,n){n&&process.nextTick(n)},e.lutimesSync=function(){})}(e);e.chown=s(e.chown),e.fchown=s(e.fchown),e.lchown=s(e.lchown),e.chmod=r(e.chmod),e.fchmod=r(e.fchmod),e.lchmod=r(e.lchmod),e.chownSync=a(e.chownSync),e.fchownSync=a(e.fchownSync),e.lchownSync=a(e.lchownSync),e.chmodSync=o(e.chmodSync),e.fchmodSync=o(e.fchmodSync),e.lchmodSync=o(e.lchmodSync),e.stat=c(e.stat),e.fstat=c(e.fstat),e.lstat=c(e.lstat),e.statSync=l(e.statSync),e.fstatSync=l(e.fstatSync),e.lstatSync=l(e.lstatSync),e.lchmod||(e.lchmod=function(e,t,r){r&&process.nextTick(r)},e.lchmodSync=function(){});e.lchown||(e.lchown=function(e,t,r,n){n&&process.nextTick(n)},e.lchownSync=function(){});"win32"===i&&(e.rename=(t=e.rename,function(r,n,o){var s=Date.now(),i=0;t(r,n,(function a(c){if(c&&("EACCES"===c.code||"EPERM"===c.code)&&Date.now()-s<6e4)return setTimeout((function(){e.stat(n,(function(e,s){e&&"ENOENT"===e.code?t(r,n,a):o(c)}))}),i),void(i<100&&(i+=10));o&&o(c)}))}));var t;function r(t){return t?function(r,n,o){return t.call(e,r,n,(function(e){u(e)&&(e=null),o&&o.apply(this,arguments)}))}:t}function o(t){return t?function(r,n){try{return t.call(e,r,n)}catch(e){if(!u(e))throw e}}:t}function s(t){return t?function(r,n,o,s){return t.call(e,r,n,o,(function(e){u(e)&&(e=null),s&&s.apply(this,arguments)}))}:t}function a(t){return t?function(r,n,o){try{return t.call(e,r,n,o)}catch(e){if(!u(e))throw e}}:t}function c(t){return t?function(r,n,o){function s(e,t){t&&(t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296)),o&&o.apply(this,arguments)}return"function"==typeof n&&(o=n,n=null),n?t.call(e,r,n,s):t.call(e,r,s)}:t}function l(t){return t?function(r,n){var o=n?t.call(e,r,n):t.call(e,r);return o.uid<0&&(o.uid+=4294967296),o.gid<0&&(o.gid+=4294967296),o}:t}function u(e){return!e||("ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code))}e.read=function(t){function r(r,n,o,s,i,a){var c;if(a&&"function"==typeof a){var l=0;c=function(u,d,h){if(u&&"EAGAIN"===u.code&&l<10)return l++,t.call(e,r,n,o,s,i,c);a.apply(this,arguments)}}return t.call(e,r,n,o,s,i,c)}return r.__proto__=t,r}(e.read),e.readSync=(d=e.readSync,function(t,r,n,o,s){for(var i=0;;)try{return d.call(e,t,r,n,o,s)}catch(e){if("EAGAIN"===e.code&&i<10){i++;continue}throw e}});var d}},function(e,t){e.exports=require("constants")},function(e,t,r){var n=r(10).Stream;e.exports=function(e){return{ReadStream:function t(r,o){if(!(this instanceof t))return new t(r,o);n.call(this);var s=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,o=o||{};for(var i=Object.keys(o),a=0,c=i.length;a<c;a++){var l=i[a];this[l]=o[l]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick((function(){s._read()}));e.open(this.path,this.flags,this.mode,(function(e,t){if(e)return s.emit("error",e),void(s.readable=!1);s.fd=t,s.emit("open",t),s._read()}))},WriteStream:function t(r,o){if(!(this instanceof t))return new t(r,o);n.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,o=o||{};for(var s=Object.keys(o),i=0,a=s.length;i<a;i++){var c=s[i];this[c]=o[c]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},function(e,t,r){"use strict";e.exports=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var t={__proto__:e.__proto__};else t=Object.create(null);return Object.getOwnPropertyNames(e).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})),t}},function(e,t,r){"use strict";const n=r(4),o=r(0),s=r(7).mkdirsSync,i=r(60).utimesMillisSync,a=r(24);function c(e,t,r,s){if(!s.filter||s.filter(t,r))return function(e,t,r,s){const i=(s.dereference?n.statSync:n.lstatSync)(t);if(i.isDirectory())return function(e,t,r,o,s){if(!t)return function(e,t,r,o){return n.mkdirSync(r),d(t,r,o),u(r,e)}(e.mode,r,o,s);if(t&&!t.isDirectory())throw new Error(`Cannot overwrite non-directory '${o}' with directory '${r}'.`);return d(r,o,s)}(i,e,t,r,s);if(i.isFile()||i.isCharacterDevice()||i.isBlockDevice())return function(e,t,r,o,s){return t?function(e,t,r,o){if(o.overwrite)return n.unlinkSync(r),l(e,t,r,o);if(o.errorOnExist)throw new Error(`'${r}' already exists`)}(e,r,o,s):l(e,r,o,s)}(i,e,t,r,s);if(i.isSymbolicLink())return function(e,t,r,s){let i=n.readlinkSync(t);s.dereference&&(i=o.resolve(process.cwd(),i));if(e){let e;try{e=n.readlinkSync(r)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return n.symlinkSync(i,r);throw e}if(s.dereference&&(e=o.resolve(process.cwd(),e)),a.isSrcSubdir(i,e))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${e}'.`);if(n.statSync(r).isDirectory()&&a.isSrcSubdir(e,i))throw new Error(`Cannot overwrite '${e}' with '${i}'.`);return function(e,t){return n.unlinkSync(t),n.symlinkSync(e,t)}(i,r)}return n.symlinkSync(i,r)}(e,t,r,s)}(e,t,r,s)}function l(e,t,r,o){return n.copyFileSync(t,r),o.preserveTimestamps&&function(e,t,r){(function(e){return 0==(128&e)})(e)&&function(e,t){u(e,128|t)}(r,e);(function(e,t){const r=n.statSync(e);i(t,r.atime,r.mtime)})(t,r)}(e.mode,t,r),u(r,e.mode)}function u(e,t){return n.chmodSync(e,t)}function d(e,t,r){n.readdirSync(e).forEach(n=>function(e,t,r,n){const s=o.join(t,e),i=o.join(r,e),{destStat:l}=a.checkPathsSync(s,i,"copy");return c(l,s,i,n)}(n,e,t,r))}e.exports=function(e,t,r){"function"==typeof r&&(r={filter:r}),(r=r||{}).clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const{srcStat:i,destStat:l}=a.checkPathsSync(e,t,"copy");return a.checkParentPathsSync(e,i,t,"copy"),function(e,t,r,i){if(i.filter&&!i.filter(t,r))return;const a=o.dirname(r);n.existsSync(a)||s(a);return c(e,t,r,i)}(l,e,t,r)}},function(e,t,r){"use strict";const n=r(23),o=r(0),s=r(59)("10.12.0"),i=e=>{if("win32"===process.platform){if(/[<>:"|?*]/.test(e.replace(o.parse(e).root,""))){const t=new Error("Path contains invalid characters: "+e);throw t.code="EINVAL",t}}},a=e=>("number"==typeof e&&(e={mode:e}),{mode:511,...e}),c=e=>{const t=new Error(`operation not permitted, mkdir '${e}'`);return t.code="EPERM",t.errno=-4048,t.path=e,t.syscall="mkdir",t};e.exports.makeDir=async(e,t)=>{if(i(e),t=a(t),s){const r=o.resolve(e);return n.mkdir(r,{mode:t.mode,recursive:!0})}const r=async e=>{try{await n.mkdir(e,t.mode)}catch(t){if("EPERM"===t.code)throw t;if("ENOENT"===t.code){if(o.dirname(e)===e)throw c(e);if(t.message.includes("null bytes"))throw t;return await r(o.dirname(e)),r(e)}try{if(!(await n.stat(e)).isDirectory())throw new Error("The path is not a directory")}catch{throw t}}};return r(o.resolve(e))},e.exports.makeDirSync=(e,t)=>{if(i(e),t=a(t),s){const r=o.resolve(e);return n.mkdirSync(r,{mode:t.mode,recursive:!0})}const r=e=>{try{n.mkdirSync(e,t.mode)}catch(t){if("EPERM"===t.code)throw t;if("ENOENT"===t.code){if(o.dirname(e)===e)throw c(e);if(t.message.includes("null bytes"))throw t;return r(o.dirname(e)),r(e)}try{if(!n.statSync(e).isDirectory())throw new Error("The path is not a directory")}catch{throw t}}};return r(o.resolve(e))}},function(e,t,r){"use strict";const n=r(4),o=r(0),s=r(7).mkdirs,i=r(11).pathExists,a=r(60).utimesMillis,c=r(24);function l(e,t,r,n,a){const c=o.dirname(r);i(c,(o,i)=>o?a(o):i?d(e,t,r,n,a):void s(c,o=>o?a(o):d(e,t,r,n,a)))}function u(e,t,r,n,o,s){Promise.resolve(o.filter(r,n)).then(i=>i?e(t,r,n,o,s):s(),e=>s(e))}function d(e,t,r,n,o){return n.filter?u(h,e,t,r,n,o):h(e,t,r,n,o)}function h(e,t,r,o,s){(o.dereference?n.stat:n.lstat)(t,(i,a)=>i?s(i):a.isDirectory()?function(e,t,r,o,s,i){if(!t)return function(e,t,r,o,s){n.mkdir(r,n=>{if(n)return s(n);g(t,r,o,t=>t?s(t):m(r,e,s))})}(e.mode,r,o,s,i);if(t&&!t.isDirectory())return i(new Error(`Cannot overwrite non-directory '${o}' with directory '${r}'.`));return g(r,o,s,i)}(a,e,t,r,o,s):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?function(e,t,r,o,s,i){return t?function(e,t,r,o,s){if(!o.overwrite)return o.errorOnExist?s(new Error(`'${r}' already exists`)):s();n.unlink(r,n=>n?s(n):p(e,t,r,o,s))}(e,r,o,s,i):p(e,r,o,s,i)}(a,e,t,r,o,s):a.isSymbolicLink()?v(e,t,r,o,s):void 0)}function p(e,t,r,o,s){n.copyFile(t,r,n=>n?s(n):o.preserveTimestamps?function(e,t,r,n){if(function(e){return 0==(128&e)}(e))return function(e,t,r){return m(e,128|t,r)}(r,e,o=>o?n(o):f(e,t,r,n));return f(e,t,r,n)}(e.mode,t,r,s):m(r,e.mode,s))}function f(e,t,r,o){!function(e,t,r){n.stat(e,(e,n)=>e?r(e):a(t,n.atime,n.mtime,r))}(t,r,t=>t?o(t):m(r,e,o))}function m(e,t,r){return n.chmod(e,t,r)}function g(e,t,r,o){n.readdir(e,(n,s)=>n?o(n):y(s,e,t,r,o))}function y(e,t,r,n,s){const i=e.pop();return i?function(e,t,r,n,s,i){const a=o.join(r,t),l=o.join(n,t);c.checkPaths(a,l,"copy",(t,o)=>{if(t)return i(t);const{destStat:c}=o;d(c,a,l,s,t=>t?i(t):y(e,r,n,s,i))})}(e,i,t,r,n,s):s()}function v(e,t,r,s,i){n.readlink(t,(t,a)=>t?i(t):(s.dereference&&(a=o.resolve(process.cwd(),a)),e?void n.readlink(r,(t,l)=>t?"EINVAL"===t.code||"UNKNOWN"===t.code?n.symlink(a,r,i):i(t):(s.dereference&&(l=o.resolve(process.cwd(),l)),c.isSrcSubdir(a,l)?i(new Error(`Cannot copy '${a}' to a subdirectory of itself, '${l}'.`)):e.isDirectory()&&c.isSrcSubdir(l,a)?i(new Error(`Cannot overwrite '${l}' with '${a}'.`)):function(e,t,r){n.unlink(t,o=>o?r(o):n.symlink(e,t,r))}(a,r,i))):n.symlink(a,r,i)))}e.exports=function(e,t,r,n){"function"!=typeof r||n?"function"==typeof r&&(r={filter:r}):(n=r,r={}),n=n||function(){},(r=r||{}).clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269"),c.checkPaths(e,t,"copy",(o,s)=>{if(o)return n(o);const{srcStat:i,destStat:a}=s;c.checkParentPaths(e,i,t,"copy",o=>o?n(o):r.filter?u(l,a,e,t,r,n):l(a,e,t,r,n))})}},function(e,t,r){"use strict";const n=r(5).fromCallback,o=r(4),s=r(0),i=r(7),a=r(25),c=n((function(e,t){t=t||function(){},o.readdir(e,(r,n)=>{if(r)return i.mkdirs(e,t);n=n.map(t=>s.join(e,t)),function e(){const r=n.pop();if(!r)return t();a.remove(r,r=>{if(r)return t(r);e()})}()})}));function l(e){let t;try{t=o.readdirSync(e)}catch{return i.mkdirsSync(e)}t.forEach(t=>{t=s.join(e,t),a.removeSync(t)})}e.exports={emptyDirSync:l,emptydirSync:l,emptyDir:c,emptydir:c}},function(e,t,r){"use strict";const n=r(4),o=r(0),s=r(57),i="win32"===process.platform;function a(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(t=>{e[t]=e[t]||n[t],e[t+="Sync"]=e[t]||n[t]}),e.maxBusyTries=e.maxBusyTries||3}function c(e,t,r){let n=0;"function"==typeof t&&(r=t,t={}),s(e,"rimraf: missing path"),s.strictEqual(typeof e,"string","rimraf: path should be a string"),s.strictEqual(typeof r,"function","rimraf: callback function required"),s(t,"rimraf: invalid options argument provided"),s.strictEqual(typeof t,"object","rimraf: options should be object"),a(t),l(e,t,(function o(s){if(s){if(("EBUSY"===s.code||"ENOTEMPTY"===s.code||"EPERM"===s.code)&&n<t.maxBusyTries){n++;return setTimeout(()=>l(e,t,o),100*n)}"ENOENT"===s.code&&(s=null)}r(s)}))}function l(e,t,r){s(e),s(t),s("function"==typeof r),t.lstat(e,(n,o)=>n&&"ENOENT"===n.code?r(null):n&&"EPERM"===n.code&&i?u(e,t,n,r):o&&o.isDirectory()?h(e,t,n,r):void t.unlink(e,n=>{if(n){if("ENOENT"===n.code)return r(null);if("EPERM"===n.code)return i?u(e,t,n,r):h(e,t,n,r);if("EISDIR"===n.code)return h(e,t,n,r)}return r(n)}))}function u(e,t,r,n){s(e),s(t),s("function"==typeof n),t.chmod(e,438,o=>{o?n("ENOENT"===o.code?null:r):t.stat(e,(o,s)=>{o?n("ENOENT"===o.code?null:r):s.isDirectory()?h(e,t,r,n):t.unlink(e,n)})})}function d(e,t,r){let n;s(e),s(t);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw r}try{n=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw r}n.isDirectory()?f(e,t,r):t.unlinkSync(e)}function h(e,t,r,n){s(e),s(t),s("function"==typeof n),t.rmdir(e,i=>{!i||"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code?i&&"ENOTDIR"===i.code?n(r):n(i):function(e,t,r){s(e),s(t),s("function"==typeof r),t.readdir(e,(n,s)=>{if(n)return r(n);let i,a=s.length;if(0===a)return t.rmdir(e,r);s.forEach(n=>{c(o.join(e,n),t,n=>{if(!i)return n?r(i=n):void(0==--a&&t.rmdir(e,r))})})})}(e,t,n)})}function p(e,t){let r;a(t=t||{}),s(e,"rimraf: missing path"),s.strictEqual(typeof e,"string","rimraf: path should be a string"),s(t,"rimraf: missing options"),s.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(r){if("ENOENT"===r.code)return;"EPERM"===r.code&&i&&d(e,t,r)}try{r&&r.isDirectory()?f(e,t,null):t.unlinkSync(e)}catch(r){if("ENOENT"===r.code)return;if("EPERM"===r.code)return i?d(e,t,r):f(e,t,r);if("EISDIR"!==r.code)throw r;f(e,t,r)}}function f(e,t,r){s(e),s(t);try{t.rmdirSync(e)}catch(n){if("ENOTDIR"===n.code)throw r;if("ENOTEMPTY"===n.code||"EEXIST"===n.code||"EPERM"===n.code)!function(e,t){if(s(e),s(t),t.readdirSync(e).forEach(r=>p(o.join(e,r),t)),!i){return t.rmdirSync(e,t)}{const r=Date.now();do{try{return t.rmdirSync(e,t)}catch{}}while(Date.now()-r<500)}}(e,t);else if("ENOENT"!==n.code)throw n}}e.exports=c,c.sync=p},function(e,t,r){"use strict";const n=r(148),o=r(149),s=r(150);e.exports={createFile:n.createFile,createFileSync:n.createFileSync,ensureFile:n.createFile,ensureFileSync:n.createFileSync,createLink:o.createLink,createLinkSync:o.createLinkSync,ensureLink:o.createLink,ensureLinkSync:o.createLinkSync,createSymlink:s.createSymlink,createSymlinkSync:s.createSymlinkSync,ensureSymlink:s.createSymlink,ensureSymlinkSync:s.createSymlinkSync}},function(e,t,r){"use strict";const n=r(5).fromCallback,o=r(0),s=r(4),i=r(7);e.exports={createFile:n((function(e,t){function r(){s.writeFile(e,"",e=>{if(e)return t(e);t()})}s.stat(e,(n,a)=>{if(!n&&a.isFile())return t();const c=o.dirname(e);s.stat(c,(e,n)=>{if(e)return"ENOENT"===e.code?i.mkdirs(c,e=>{if(e)return t(e);r()}):t(e);n.isDirectory()?r():s.readdir(c,e=>{if(e)return t(e)})})})})),createFileSync:function(e){let t;try{t=s.statSync(e)}catch{}if(t&&t.isFile())return;const r=o.dirname(e);try{s.statSync(r).isDirectory()||s.readdirSync(r)}catch(e){if(!e||"ENOENT"!==e.code)throw e;i.mkdirsSync(r)}s.writeFileSync(e,"")}}},function(e,t,r){"use strict";const n=r(5).fromCallback,o=r(0),s=r(4),i=r(7),a=r(11).pathExists;e.exports={createLink:n((function(e,t,r){function n(e,t){s.link(e,t,e=>{if(e)return r(e);r(null)})}a(t,(c,l)=>c?r(c):l?r(null):void s.lstat(e,s=>{if(s)return s.message=s.message.replace("lstat","ensureLink"),r(s);const c=o.dirname(t);a(c,(o,s)=>o?r(o):s?n(e,t):void i.mkdirs(c,o=>{if(o)return r(o);n(e,t)}))}))})),createLinkSync:function(e,t){if(s.existsSync(t))return;try{s.lstatSync(e)}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const r=o.dirname(t);return s.existsSync(r)||i.mkdirsSync(r),s.linkSync(e,t)}}},function(e,t,r){"use strict";const n=r(5).fromCallback,o=r(0),s=r(4),i=r(7),a=i.mkdirs,c=i.mkdirsSync,l=r(151),u=l.symlinkPaths,d=l.symlinkPathsSync,h=r(152),p=h.symlinkType,f=h.symlinkTypeSync,m=r(11).pathExists;e.exports={createSymlink:n((function(e,t,r,n){n="function"==typeof r?r:n,r="function"!=typeof r&&r,m(t,(i,c)=>i?n(i):c?n(null):void u(e,t,(i,c)=>{if(i)return n(i);e=c.toDst,p(c.toCwd,r,(r,i)=>{if(r)return n(r);const c=o.dirname(t);m(c,(r,o)=>r?n(r):o?s.symlink(e,t,i,n):void a(c,r=>{if(r)return n(r);s.symlink(e,t,i,n)}))})}))})),createSymlinkSync:function(e,t,r){if(s.existsSync(t))return;const n=d(e,t);e=n.toDst,r=f(n.toCwd,r);const i=o.dirname(t);return s.existsSync(i)||c(i),s.symlinkSync(e,t,r)}}},function(e,t,r){"use strict";const n=r(0),o=r(4),s=r(11).pathExists;e.exports={symlinkPaths:function(e,t,r){if(n.isAbsolute(e))return o.lstat(e,t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),r(t)):r(null,{toCwd:e,toDst:e}));{const i=n.dirname(t),a=n.join(i,e);return s(a,(t,s)=>t?r(t):s?r(null,{toCwd:a,toDst:e}):o.lstat(e,t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),r(t)):r(null,{toCwd:e,toDst:n.relative(i,e)})))}},symlinkPathsSync:function(e,t){let r;if(n.isAbsolute(e)){if(r=o.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}{const s=n.dirname(t),i=n.join(s,e);if(r=o.existsSync(i),r)return{toCwd:i,toDst:e};if(r=o.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:n.relative(s,e)}}}}},function(e,t,r){"use strict";const n=r(4);e.exports={symlinkType:function(e,t,r){if(r="function"==typeof t?t:r,t="function"!=typeof t&&t)return r(null,t);n.lstat(e,(e,n)=>{if(e)return r(null,"file");t=n&&n.isDirectory()?"dir":"file",r(null,t)})},symlinkTypeSync:function(e,t){let r;if(t)return t;try{r=n.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}}},function(e,t,r){"use strict";const n=r(5).fromPromise,o=r(154);o.outputJson=n(r(156)),o.outputJsonSync=r(157),o.outputJSON=o.outputJson,o.outputJSONSync=o.outputJsonSync,o.writeJSON=o.writeJson,o.writeJSONSync=o.writeJsonSync,o.readJSON=o.readJson,o.readJSONSync=o.readJsonSync,e.exports=o},function(e,t,r){"use strict";const n=r(155);e.exports={readJson:n.readFile,readJsonSync:n.readFileSync,writeJson:n.writeFile,writeJsonSync:n.writeFileSync}},function(e,t,r){let n;try{n=r(4)}catch(e){n=r(3)}const o=r(5),{stringify:s,stripBom:i}=r(34);const a={readFile:o.fromPromise((async function(e,t={}){"string"==typeof t&&(t={encoding:t});const r=t.fs||n,s=!("throws"in t)||t.throws;let a,c=await o.fromCallback(r.readFile)(e,t);c=i(c);try{a=JSON.parse(c,t?t.reviver:null)}catch(t){if(s)throw t.message=`${e}: ${t.message}`,t;return null}return a})),readFileSync:function(e,t={}){"string"==typeof t&&(t={encoding:t});const r=t.fs||n,o=!("throws"in t)||t.throws;try{let n=r.readFileSync(e,t);return n=i(n),JSON.parse(n,t.reviver)}catch(t){if(o)throw t.message=`${e}: ${t.message}`,t;return null}},writeFile:o.fromPromise((async function(e,t,r={}){const i=r.fs||n,a=s(t,r);await o.fromCallback(i.writeFile)(e,a,r)})),writeFileSync:function(e,t,r={}){const o=r.fs||n,i=s(t,r);return o.writeFileSync(e,i,r)}};e.exports=a},function(e,t,r){"use strict";const{stringify:n}=r(34),{outputFile:o}=r(35);e.exports=async function(e,t,r={}){const s=n(t,r);await o(e,s,r)}},function(e,t,r){"use strict";const{stringify:n}=r(34),{outputFileSync:o}=r(35);e.exports=function(e,t,r){const s=n(t,r);o(e,s,r)}},function(e,t,r){"use strict";e.exports={moveSync:r(159)}},function(e,t,r){"use strict";const n=r(4),o=r(0),s=r(58).copySync,i=r(25).removeSync,a=r(7).mkdirpSync,c=r(24);function l(e,t,r){try{n.renameSync(e,t)}catch(n){if("EXDEV"!==n.code)throw n;return function(e,t,r){return s(e,t,{overwrite:r,errorOnExist:true}),i(e)}(e,t,r)}}e.exports=function(e,t,r){const s=(r=r||{}).overwrite||r.clobber||!1,{srcStat:u}=c.checkPathsSync(e,t,"move");return c.checkParentPathsSync(e,u,t,"move"),a(o.dirname(t)),function(e,t,r){if(r)return i(t),l(e,t,r);if(n.existsSync(t))throw new Error("dest already exists.");return l(e,t,r)}(e,t,s)}},function(e,t,r){"use strict";const n=r(5).fromCallback;e.exports={move:n(r(161))}},function(e,t,r){"use strict";const n=r(4),o=r(0),s=r(61).copy,i=r(25).remove,a=r(7).mkdirp,c=r(11).pathExists,l=r(24);function u(e,t,r,o){n.rename(e,t,n=>n?"EXDEV"!==n.code?o(n):function(e,t,r,n){s(e,t,{overwrite:r,errorOnExist:!0},t=>t?n(t):i(e,n))}(e,t,r,o):o())}e.exports=function(e,t,r,n){"function"==typeof r&&(n=r,r={});const s=r.overwrite||r.clobber||!1;l.checkPaths(e,t,"move",(r,d)=>{if(r)return n(r);const{srcStat:h}=d;l.checkParentPaths(e,h,t,"move",r=>{if(r)return n(r);a(o.dirname(t),r=>r?n(r):function(e,t,r,n){if(r)return i(t,o=>o?n(o):u(e,t,r,n));c(t,(o,s)=>o?n(o):s?n(new Error("dest already exists.")):u(e,t,r,n))}(e,t,s,n))})})}},function(e,t,r){"use strict";const n=r(3),o=r(0),s=r(163);e.exports=(...e)=>(e.unshift(new Set),function e(t,r,i,a){let c,l;a?(c=a,l=i):(c=i,l=null),n.lstat(r,(function(i,a){let u=i?0:a.size||0;if(a){if(t.has(a.ino))return c(null,0);t.add(a.ino)}!i&&a.isDirectory()?n.readdir(r,(n,i)=>{if(n)return c(n);s(i,5e3,(n,s)=>{e(t,o.join(r,n),l,(e,t)=>{e||(u+=t),s(e)})},e=>{c(e,u)})}):(l&&l.test(r)&&(u=0),c(i,u))}))}(...e))},function(e,t,r){"use strict";e.exports=function(e,t,r,n){var o,s,i,a=0,c=0,l=e.length-1,u=!1;if("number"==typeof t?(o=t,i=r,s=n||function(){}):(i=t,s=r||function(){},o=e.length),!e.length)return s();var d=i.length,h=function(){return!u&&a<o&&c<l},p=function(e){u||(a--,e||c===l&&!a?(u=!0,s(e)):h()&&f(++c))},f=function t(){a++;var r=2===d?[e[c],p]:[e[c],c,p];i.apply(null,r),h()&&t(++c)};f()}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebViewPanelHandlers=void 0;const c=r(1),l=a(r(62)),u=s(r(2)),d=a(r(243)),h=a(r(244)),p=a(r(9)),f=a(r(84)),m=r(14),g=s(r(0)),y=r(15),v=a(r(41)),b=a(r(27)),w=r(40),S=r(3),E=r(26),_=a(r(85)),P=r(1),x=r(19);class k{constructor(e){this._disposables=[],this._disposables.push(e.onColorClick(this.handleColorClick),e.onFileSave(this.handleFileSave),e.onFileUpdate(this.handleFileUpdate),e.downloadRenditions(this.handleDownloadRenditions),e.onExportTokens(this.handleExportTokens),e.onAuthorize(this.handleAuthorize),e.onOpenURL(this.handleOpenURL),e.onResetDSP(this.handleResetDSP),e.onStartEdit(this.handleStartEdit),e.onGetSettings(this.handleGetSettings),e.onLinkToOutput(this.handleLinkToOutput),e.onLinkToAssets(this.handleLinkToAssets),e.onSavePreferences(this.handleSavePreferences),e.onLoadPreferences(this.handleLoadPreferences),e.onSetIsCreationMode(this.handleSetCreationMode),e.onSavePreviewToAssets(this.handleSavePreviewToAssets),e.onDeleteFromAssets(this.handleDeleteFromAssets),e.onOpenExtensionSettings(this.handleOpenExtensionSettings),e.onReadyForDeeplink(this.handleOnReadyForDeeplink),e.onUpdateConsumerSnippetFilter(this.handleUpdateConsumerSnippetFilter),e.onGetLocalResourceUri(this.handleGetLocalResourceUri),e.onGetMarkdownWithLocalResourceUris(this.handleGetMarkdownWithLocalResourceUris),e.onCheckForLocalAssets(this.handleCheckForLocalAssets),e.onLoadRenditionImage(this.handleLoadRenditionImage),e.onChooseSaveLocation(this.handleChooseSaveLocation),e.onLoadDSPFile(this.handleDSPFileLoad),e.onGetMetaData(this.handleGetMetadata),e.onFetch(this.handleFetch),e.onBrowseForImage(this.handleBrowseForImage),e.onGetStartupSettings(this.handleGetStartupSettings),e.onCopyTokensTo(this.handleCopyTokensTo),h.default.onUpdate(this.handleDSPUpdate)),k.instance=this}static addHandlers(e){var t;null===(t=k.instance)||void 0===t||t.dispose(),e&&(k.instance=new k(e))}dispose(){for(;this._disposables.length;){const e=this._disposables.pop();e&&e.dispose()}}handleColorClick(e){if(console.log("handle color click on extension.ts : "+e),f.default.lastActiveEditor){const t=f.default.lastActiveEditor;t.edit(r=>{r.insert(t.document.positionAt(0),e)})}}handleFileSave(e){console.log("WebViewPanelHandlers handleFileSave !!! compile tokens?: "+e),p.default.currentFile&&h.default.execute(p.default.currentFile,e)}handleChooseSaveLocation(e){return i(this,void 0,void 0,(function*(){const t=()=>i(this,void 0,void 0,(function*(){var r;const n=yield u.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1});if(n&&n.length>0){const o=u.Uri.file(g.join(n[0].path,e.data));let s=!1;if(yield x.packageExists(o)){switch(yield u.window.showWarningMessage(c.getString("Toast.ExistingDSP"),c.getString("Toast.Button.Overwrite"),c.getString("Toast.Button.SelectDifferent"))){case c.getString("Toast.Button.Overwrite"):s=!0;break;case c.getString("Toast.Button.SelectDifferent"):t()}}else s=!0;s&&(null===(r=m.WebViewPanel.currentPanel)||void 0===r||r.onAsyncMessageComplete({data:{success:!0,path:o.path},__id:e.__id}),p.default.currentFolder=o,u.workspace.getConfiguration(P.SettingsSectionName).update(P.ExtSetting.LastPackage,o.fsPath,u.ConfigurationTarget.Workspace))}}));t()}))}handleCopyTokensTo(e){var t,r,n;return i(this,void 0,void 0,(function*(){const o=yield u.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1});if(o&&o.length>0){const n=c.getLastSectionOfPath(e.data),s=u.Uri.file(e.data),i=u.Uri.file(g.join(o[0].path,n));try{yield u.workspace.fs.copy(s,i,{overwrite:!0}),null===(t=m.WebViewPanel.currentPanel)||void 0===t||t.onAsyncMessageComplete({data:{success:!0,path:i.path},__id:e.__id})}catch(t){null===(r=m.WebViewPanel.currentPanel)||void 0===r||r.onAsyncMessageComplete({data:{success:!1},__id:e.__id}),P.Logger.log("WebviewPanelHandler.ts handleCopyTokensTo() error, failed to copy tokens"),P.Logger.log(t)}}else null===(n=m.WebViewPanel.currentPanel)||void 0===n||n.onAsyncMessageComplete({data:{success:!1},__id:e.__id})}))}handleLoadPreferences(e){var t,r,n;return i(this,void 0,void 0,(function*(){const o=yield null===(t=b.default.context)||void 0===t?void 0:t.workspaceState.get("pref");o?null===(r=m.WebViewPanel.currentPanel)||void 0===r||r.onAsyncMessageComplete({data:JSON.parse(o),__id:e.__id}):null===(n=m.WebViewPanel.currentPanel)||void 0===n||n.onAsyncMessageComplete({data:{},__id:e.__id})}))}handleLoadRenditionImage(e){var t;return i(this,void 0,void 0,(function*(){const r=yield w.loadRenditionImage(e.data);null===(t=m.WebViewPanel.currentPanel)||void 0===t||t.onAsyncMessageComplete({data:r,__id:e.__id})}))}handleDSPFileLoad(e){var t;return i(this,void 0,void 0,(function*(){const r=yield d.default.execute(e.data);null===(t=m.WebViewPanel.currentPanel)||void 0===t||t.onAsyncMessageComplete({data:r,__id:e.__id})}))}handleGetMetadata(e){var t;null===(t=m.WebViewPanel.currentPanel)||void 0===t||t.onAsyncMessageComplete({data:{clientId:u.env.machineId},__id:e.__id})}handleOpenURL(e){u.env.openExternal(u.Uri.parse(e))}handleFileUpdate(e){p.default.currentFile=e.file,p.default.entityCache=c.buildAllTokensCache(e.file),h.default.execute(p.default.currentFile,!1)}handleDownloadRenditions(e){w.downloadRenditions(e)}handleExportTokens(){l.default.execute()}handleSetCreationMode(e){return i(this,void 0,void 0,(function*(){if(u.workspace.name)u.workspace.getConfiguration(P.SettingsSectionName).update(P.ExtSetting.Editor,e,u.ConfigurationTarget.Workspace);else{if(!u.workspace.getConfiguration(P.SettingsSectionName).get(P.ExtSetting.Editor)){(yield u.window.showInformationMessage(c.getString("Toast.NoWorkspace"),c.getString("Toast.Button.Settings")))===c.getString("Toast.Button.Settings")&&x.openExtensionSettings()}}}))}handleSavePreviewToAssets(e){e.forEach(e=>{w.savePreviewToAssets(e)})}handleDeleteFromAssets(e){if(p.default.currentFolder)for(let t=0;t<c.supportedComponentPreviewTypes.length;t++)try{const r=y.pathJoin(p.default.currentFolder.fsPath,w.ASSET_FOLDER_NAME,`${e}.${c.supportedComponentPreviewTypes[t]}`);S.unlinkSync(r)}catch(e){}}handleLinkToOutput(){return i(this,void 0,void 0,(function*(){if(p.default.currentFolder)try{yield u.workspace.fs.readDirectory(u.Uri.file(g.join(p.default.currentFolder.path,y.DIST_FOLDER))),y.openInFileExplorer(g.join(p.default.currentFolderPlatformPath,y.DIST_FOLDER))}catch(e){u.window.showInformationMessage(c.getString("Toast.OutputFolder"))}}))}handleLinkToAssets(){return i(this,void 0,void 0,(function*(){if(p.default.currentFolder)try{yield u.workspace.fs.readDirectory(u.Uri.file(g.join(p.default.currentFolder.path,w.ASSET_FOLDER_NAME)))}catch(e){yield u.workspace.fs.createDirectory(u.Uri.file(g.join(p.default.currentFolder.path,w.ASSET_FOLDER_NAME)))}finally{y.openInFileExplorer(g.join(p.default.currentFolderPlatformPath,w.ASSET_FOLDER_NAME))}}))}handleSavePreferences(e){var t;return i(this,void 0,void 0,(function*(){yield null===(t=b.default.context)||void 0===t?void 0:t.workspaceState.update("pref",JSON.stringify(e))}))}handleAuthorize(){_.default.getAuthorization()}handleResetDSP(){p.default.currentFolder=void 0,p.default.currentFile=void 0}handleStartEdit(){return i(this,void 0,void 0,(function*(){if(null!==(yield y.getSDVersion(g.join(p.default.currentFolderPlatformPath,y.GENERATED_FOLDER_NAME))));else{(yield u.window.showErrorMessage(c.getString("Toast.InstallStyleDictionary"),{modal:!0},c.getString("Toast.Button.InstallSD")))===c.getString("Toast.Button.InstallSD")&&u.env.openExternal(u.Uri.parse(c.getString("Url.StyleDictionaryInstall")))}}))}handleGetSettings(e){var t,r;switch(e){case P.ExtSetting.Editor:const e=u.workspace.getConfiguration(P.SettingsSectionName).get(P.ExtSetting.Editor);null===(t=m.WebViewPanel.currentPanel)||void 0===t||t.onCreationModeChange(e);break;case P.ExtSetting.AuthorName:const n=u.workspace.getConfiguration(P.SettingsSectionName).get(P.ExtSetting.AuthorName);null===(r=m.WebViewPanel.currentPanel)||void 0===r||r.onAuthorNameChange(n)}}handleOpenExtensionSettings(){x.openExtensionSettings()}handleOnReadyForDeeplink(e){var t;e&&(null===(t=m.WebViewPanel.currentPanel)||void 0===t?void 0:t.currentDeeplink)&&m.WebViewPanel.currentPanel.deeplinkToToken(m.WebViewPanel.currentPanel.currentDeeplink)}handleUpdateConsumerSnippetFilter(e){p.default.consumerSnippetFilter=e}handleGetLocalResourceUri(e){var t;null===(t=m.WebViewPanel.currentPanel)||void 0===t||t.setLocalResourceUri(e)}handleGetMarkdownWithLocalResourceUris(e){var t;null===(t=m.WebViewPanel.currentPanel)||void 0===t||t.setMarkdownWithLocalResourceUris(e)}handleCheckForLocalAssets(){var e,t,r;return i(this,void 0,void 0,(function*(){const n=(null===(e=u.workspace.workspaceFolders)||void 0===e?void 0:e.some(e=>{var t;return e.uri.path==(null===(t=p.default.currentFolder)||void 0===t?void 0:t.path)}))||!1,o=(null===(r=null===(t=m.WebViewPanel.currentPanel)||void 0===t?void 0:t.localResourceRoots)||void 0===r?void 0:r.some(e=>{var t;return e.path==(null===(t=p.default.currentFolder)||void 0===t?void 0:t.path)}))||!1,s=x.containsLocalReferences(p.default.currentFile);if(!n&&!o&&s){(yield u.window.showErrorMessage(c.getString("Toast.IssuesWithLocalContent"),c.getString("Toast.Button.Reload")))==c.getString("Toast.Button.Reload")&&(u.commands.executeCommand("xd.toggle"),setTimeout(()=>{u.commands.executeCommand("xd.toggle")},250))}}))}handleFetch(e){var t;return i(this,void 0,void 0,(function*(){let r=void 0,n="";try{const t=v.default(e.data.url,e.data.init);yield t,n=yield t.text()}catch(e){P.Logger.log(e),r=e,v.default.HTTPError}null===(t=m.WebViewPanel.currentPanel)||void 0===t||t.onAsyncMessageComplete({data:{result:n,error:r},__id:e.__id})}))}handleGetStartupSettings(e){var t;const r={lastPackage:u.workspace.getConfiguration(P.SettingsSectionName).get(P.ExtSetting.LastPackage)};null===(t=m.WebViewPanel.currentPanel)||void 0===t||t.onAsyncMessageComplete({data:r,__id:e.__id})}handleDSPUpdate(){var e;return i(this,void 0,void 0,(function*(){if(p.default.currentFolder){const t={size:(yield E.getSizeAsync(p.default.currentFolder))/1024};null===(e=m.WebViewPanel.currentPanel)||void 0===e||e.updateComplete(t)}}))}handleBrowseForImage(e){return i(this,void 0,void 0,(function*(){u.window.showOpenDialog({canSelectFolders:!1,canSelectFiles:!0,canSelectMany:!1,filters:{Images:["png","svg"]}}).then(t=>{var r;let n=null,o=null,s="";if(t&&t[0]&&p.default.currentFolder){n=t[0].fsPath;const e=p.default.currentFolder.fsPath,r=g.relative(n,e),i=g.resolve(r,e);r.endsWith("..")&&(n=n.replace(i,"").substr(1)),o=g.extname(n).substr(1),s=g.basename(n,g.extname(n))}const i={path:n||"",type:o,baseName:s,file:t&&n?w.imageToBase64(t[0].fsPath,o):""};null===(r=m.WebViewPanel.currentPanel)||void 0===r||r.onAsyncMessageComplete({data:i,__id:e.__id})})}))}}t.WebViewPanelHandlers=k},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validateEntitys=t.validateDSP=void 0;const o=n(r(166)),s=n(r(200)),i=n(r(201));t.validateDSP=e=>a("dsp-main",e),t.validateEntitys=e=>a("dsp-entity",e);const a=(e,t)=>{const r=new o.default({schemas:[s.default,i.default]});return r.validate(e,t)?{isValid:!0}:{isValid:!1,errors:r.errors,errorString:r.errorsText(r.errors)}}},function(e,t,r){"use strict";var n=r(167),o=r(37),s=r(171),i=r(63),a=r(64),c=r(172),l=r(173),u=r(194),d=r(13);e.exports=y,y.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var n=this._addSchema(e);r=n.validate||this._compile(n)}var o=r(t);!0!==r.$async&&(this.errors=r.errors);return o},y.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},y.prototype.addSchema=function(e,t,r,n){if(Array.isArray(e)){for(var s=0;s<e.length;s++)this.addSchema(e[s],void 0,r,n);return this}var i=this._getId(e);if(void 0!==i&&"string"!=typeof i)throw new Error("schema id must be string");return _(this,t=o.normalizeId(t||i)),this._schemas[t]=this._addSchema(e,r,n,!0),this},y.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},y.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(f)?f:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(r,e);if(!n&&t){var o="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(o);this.logger.error(o)}return n},y.prototype.getSchema=function(e){var t=v(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=o.schema.call(e,{schema:{}},t);if(r){var s=r.schema,a=r.root,c=r.baseId,l=n.call(e,s,a,void 0,c);return e._fragments[t]=new i({ref:t,fragment:!0,schema:s,root:a,baseId:c,validate:l}),l}}(this,e)}},y.prototype.removeSchema=function(e){if(e instanceof RegExp)return b(this,this._schemas,e),b(this,this._refs,e),this;switch(typeof e){case"undefined":return b(this,this._schemas),b(this,this._refs),this._cache.clear(),this;case"string":var t=v(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,n=r?r(e):e;this._cache.del(n);var s=this._getId(e);s&&(s=o.normalizeId(s),delete this._schemas[s],delete this._refs[s])}return this},y.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},y.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,n=void 0===t.dataVar?"data":t.dataVar,o="",s=0;s<e.length;s++){var i=e[s];i&&(o+=n+i.dataPath+" "+i.message+r)}return o.slice(0,-r.length)},y.prototype._addSchema=function(e,t,r,n){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var s=this._opts.serialize,a=s?s(e):e,c=this._cache.get(a);if(c)return c;n=n||!1!==this._opts.addUsedSchema;var l=o.normalizeId(this._getId(e));l&&n&&_(this,l);var u,d=!1!==this._opts.validateSchema&&!t;d&&!(u=l&&l==o.normalizeId(e.$schema))&&this.validateSchema(e,!0);var h=o.ids.call(this,e),p=new i({id:l,schema:e,localRefs:h,cacheKey:a,meta:r});"#"!=l[0]&&n&&(this._refs[l]=p);this._cache.put(a,p),d&&u&&this.validateSchema(e,!0);return p},y.prototype._compile=function(e,t){if(e.compiling)return e.validate=s,s.schema=e.schema,s.errors=null,s.root=t||s,!0===e.schema.$async&&(s.$async=!0),s;var r,o;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{o=n.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=o,e.refs=o.refs,e.refVal=o.refVal,e.root=o.root,o;function s(){var t=e.validate,r=t.apply(this,arguments);return s.errors=t.errors,r}},y.prototype.compileAsync=r(195);var h=r(196);y.prototype.addKeyword=h.add,y.prototype.getKeyword=h.get,y.prototype.removeKeyword=h.remove,y.prototype.validateKeyword=h.validate;var p=r(39);y.ValidationError=p.Validation,y.MissingRefError=p.MissingRef,y.$dataMetaSchema=u;var f="http://json-schema.org/draft-07/schema",m=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],g=["/properties"];function y(e){if(!(this instanceof y))return new y(e);e=this._opts=d.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:P,warn:P,error:P};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=c(e.format),this._cache=e.cache||new s,this._loadingSchemas={},this._compilations=[],this.RULES=l(),this._getId=function(e){switch(e.schemaId){case"auto":return E;case"id":return w;default:return S}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=a),this._metaOpts=function(e){for(var t=d.copy(e._opts),r=0;r<m.length;r++)delete t[m[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(e){var t;e._opts.$data&&(t=r(199),e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var n=r(70);e._opts.$data&&(n=u(n,g));e.addMetaSchema(n,f,!0),e._refs["http://json-schema.org/schema"]=f}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function v(e,t){return t=o.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function b(e,t,r){for(var n in t){var o=t[n];o.meta||r&&!r.test(n)||(e._cache.del(o.cacheKey),delete t[n])}}function w(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function S(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function E(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function _(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function P(){}},function(e,t,r){"use strict";var n=r(37),o=r(13),s=r(39),i=r(64),a=r(65),c=o.ucs2length,l=r(38),u=s.Validation;function d(e,t,r){var n=p.call(this,e,t,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:e,root:t,baseId:r},{index:n,compiling:!1})}function h(e,t,r){var n=p.call(this,e,t,r);n>=0&&this._compilations.splice(n,1)}function p(e,t,r){for(var n=0;n<this._compilations.length;n++){var o=this._compilations[n];if(o.schema==e&&o.root==t&&o.baseId==r)return n}return-1}function f(e,t){return"var pattern"+e+" = new RegExp("+o.toQuotedString(t[e])+");"}function m(e){return"var default"+e+" = defaults["+e+"];"}function g(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function y(e){return"var customRule"+e+" = customRules["+e+"];"}function v(e,t){if(!e.length)return"";for(var r="",n=0;n<e.length;n++)r+=t(n,e);return r}e.exports=function e(t,r,p,b){var w=this,S=this._opts,E=[void 0],_={},P=[],x={},k=[],C={},T=[];r=r||{schema:t,refVal:E,refs:_};var A=d.call(this,t,r,b),O=this._compilations[A.index];if(A.compiling)return O.callValidate=function e(){var t=O.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var R=this._formats,D=this.RULES;try{var L=j(t,r,p,b);O.validate=L;var F=O.callValidate;return F&&(F.schema=L.schema,F.errors=null,F.refs=L.refs,F.refVal=L.refVal,F.root=L.root,F.$async=L.$async,S.sourceCode&&(F.source=L.source)),L}finally{h.call(this,t,r,b)}function j(t,i,d,h){var p=!i||i&&i.schema==t;if(i.schema!=r.schema)return e.call(w,t,i,d,h);var b,x=!0===t.$async,C=a({isTop:!0,schema:t,isRoot:p,baseId:h,root:i,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:s.MissingRef,RULES:D,validate:a,util:o,resolve:n,resolveRef:I,usePattern:$,useDefault:H,useCustomRule:U,opts:S,formats:R,logger:w.logger,self:w});C=v(E,g)+v(P,f)+v(k,m)+v(T,y)+C,S.processCode&&(C=S.processCode(C,t));try{b=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",C)(w,D,R,r,E,k,T,l,c,u),E[0]=b}catch(e){throw w.logger.error("Error compiling schema, function code:",C),e}return b.schema=t,b.errors=null,b.refs=_,b.refVal=E,b.root=p?b:i,x&&(b.$async=!0),!0===S.sourceCode&&(b.source={code:C,patterns:P,defaults:k}),b}function I(t,o,s){o=n.url(t,o);var i,a,c=_[o];if(void 0!==c)return N(i=E[c],a="refVal["+c+"]");if(!s&&r.refs){var l=r.refs[o];if(void 0!==l)return N(i=r.refVal[l],a=M(o,i))}a=M(o);var u=n.call(w,j,r,o);if(void 0===u){var d=p&&p[o];d&&(u=n.inlineRef(d,S.inlineRefs)?d:e.call(w,d,r,p,t))}if(void 0!==u)return function(e,t){var r=_[e];E[r]=t}(o,u),N(u,a);!function(e){delete _[e]}(o)}function M(e,t){var r=E.length;return E[r]=t,_[e]=r,"refVal"+r}function N(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function $(e){var t=x[e];return void 0===t&&(t=x[e]=P.length,P[t]=e),"pattern"+t}function H(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return o.toQuotedString(e);case"object":if(null===e)return"null";var t=i(e),r=C[t];return void 0===r&&(r=C[t]=k.length,k[r]=e),"default"+r}}function U(e,t,r,n){if(!1!==w._opts.validateSchema){var o=e.definition.dependencies;if(o&&!o.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+o.join(","));var s=e.definition.validateSchema;if(s)if(!s(t)){var i="keyword schema is invalid: "+w.errorsText(s.errors);if("log"!=w._opts.validateSchema)throw new Error(i);w.logger.error(i)}}var a,c=e.definition.compile,l=e.definition.inline,u=e.definition.macro;if(c)a=c.call(w,t,r,n);else if(u)a=u.call(w,t,r,n),!1!==S.validateSchema&&w.validateSchema(a,!0);else if(l)a=l.call(w,n,e.keyword,t,r);else if(!(a=e.definition.validate))return;if(void 0===a)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var d=T.length;return T[d]=a,{code:"customRule"+d,validate:a}}}},function(e,t,r){!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var n=t.length-1,o=1;o<n;++o)t[o]=t[o].slice(1,-1);return t[n]=t[n].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function o(e){return e.toUpperCase()}function s(e){var n=t("[0-9]","[A-Fa-f]"),o=r(r("%[EFef]"+n+"%"+n+n+"%"+n+n)+"|"+r("%[89A-Fa-f]"+n+"%"+n+n)+"|"+r("%"+n+n)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",i=t("[\\:\\/\\?\\#\\[\\]\\@]",s),a=e?"[\\uE000-\\uF8FF]":"[]",c=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),l=r("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),u=r(r(o+"|"+t(c,s,"[\\:]"))+"*"),d=(r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("[1-9][0-9]")+"|[0-9]"),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?[0-9]")),h=r(d+"\\."+d+"\\."+d+"\\."+d),p=r(n+"{1,4}"),f=r(r(p+"\\:"+p)+"|"+h),m=r(r(p+"\\:")+"{6}"+f),g=r("\\:\\:"+r(p+"\\:")+"{5}"+f),y=r(r(p)+"?\\:\\:"+r(p+"\\:")+"{4}"+f),v=r(r(r(p+"\\:")+"{0,1}"+p)+"?\\:\\:"+r(p+"\\:")+"{3}"+f),b=r(r(r(p+"\\:")+"{0,2}"+p)+"?\\:\\:"+r(p+"\\:")+"{2}"+f),w=r(r(r(p+"\\:")+"{0,3}"+p)+"?\\:\\:"+p+"\\:"+f),S=r(r(r(p+"\\:")+"{0,4}"+p)+"?\\:\\:"+f),E=r(r(r(p+"\\:")+"{0,5}"+p)+"?\\:\\:"+p),_=r(r(r(p+"\\:")+"{0,6}"+p)+"?\\:\\:"),P=r([m,g,y,v,b,w,S,E,_].join("|")),x=r(r(c+"|"+o)+"+"),k=(r(P+"\\%25"+x),r(P+r("\\%25|\\%(?!"+n+"{2})")+x)),C=r("[vV]"+n+"+\\."+t(c,s,"[\\:]")+"+"),T=r("\\["+r(k+"|"+P+"|"+C)+"\\]"),A=r(r(o+"|"+t(c,s))+"*"),O=r(T+"|"+h+"(?!"+A+")|"+A),R=r("[0-9]*"),D=r(r(u+"@")+"?"+O+r("\\:"+R)+"?"),L=r(o+"|"+t(c,s,"[\\:\\@]")),F=r(L+"*"),j=r(L+"+"),I=r(r(o+"|"+t(c,s,"[\\@]"))+"+"),M=r(r("\\/"+F)+"*"),N=r("\\/"+r(j+M)+"?"),$=r(I+M),H=r(j+M),U="(?!"+L+")",B=(r(M+"|"+N+"|"+$+"|"+H+"|"+U),r(r(L+"|"+t("[\\/\\?]",a))+"*")),z=r(r(L+"|[\\/\\?]")+"*"),q=r(r("\\/\\/"+D+M)+"|"+N+"|"+H+"|"+U),V=r(l+"\\:"+q+r("\\?"+B)+"?"+r("\\#"+z)+"?"),Q=r(r("\\/\\/"+D+M)+"|"+N+"|"+$+"|"+U),W=r(Q+r("\\?"+B)+"?"+r("\\#"+z)+"?");return r(V+"|"+W),r(l+"\\:"+q+r("\\?"+B)+"?"),r(r("\\/\\/("+r("("+u+")@")+"?("+O+")"+r("\\:("+R+")")+"?)")+"?("+M+"|"+N+"|"+H+"|"+U+")"),r("\\?("+B+")"),r("\\#("+z+")"),r(r("\\/\\/("+r("("+u+")@")+"?("+O+")"+r("\\:("+R+")")+"?)")+"?("+M+"|"+N+"|"+$+"|"+U+")"),r("\\?("+B+")"),r("\\#("+z+")"),r(r("\\/\\/("+r("("+u+")@")+"?("+O+")"+r("\\:("+R+")")+"?)")+"?("+M+"|"+N+"|"+H+"|"+U+")"),r("\\?("+B+")"),r("\\#("+z+")"),r("("+u+")@"),r("\\:("+R+")"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",c,s),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",c,s),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",c,s),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",c,s),"g"),NOT_QUERY:new RegExp(t("[^\\%]",c,s,"[\\:\\@\\/\\?]",a),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",c,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",c,s),"g"),UNRESERVED:new RegExp(c,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",c,i),"g"),PCT_ENCODED:new RegExp(o,"g"),IPV4ADDRESS:new RegExp("^("+h+")$"),IPV6ADDRESS:new RegExp("^\\[?("+P+")"+r(r("\\%25|\\%(?!"+n+"{2})")+"("+x+")")+"?\\]?$")}}var i=s(!1),a=s(!0),c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,s=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,s=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=2147483647,u=/^xn--/,d=/[^\0-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,m=String.fromCharCode;function g(e){throw new RangeError(p[e])}function y(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var o=function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}((e=e.replace(h,".")).split("."),t).join(".");return n+o}function v(e){for(var t=[],r=0,n=e.length;r<n;){var o=e.charCodeAt(r++);if(o>=55296&&o<=56319&&r<n){var s=e.charCodeAt(r++);56320==(64512&s)?t.push(((1023&o)<<10)+(1023&s)+65536):(t.push(o),r--)}else t.push(o)}return t}var b=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},w=function(e,t,r){var n=0;for(e=r?f(e/700):e>>1,e+=f(e/t);e>455;n+=36)e=f(e/35);return f(n+36*e/(e+38))},S=function(e){var t,r=[],n=e.length,o=0,s=128,i=72,a=e.lastIndexOf("-");a<0&&(a=0);for(var c=0;c<a;++c)e.charCodeAt(c)>=128&&g("not-basic"),r.push(e.charCodeAt(c));for(var u=a>0?a+1:0;u<n;){for(var d=o,h=1,p=36;;p+=36){u>=n&&g("invalid-input");var m=(t=e.charCodeAt(u++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(m>=36||m>f((l-o)/h))&&g("overflow"),o+=m*h;var y=p<=i?1:p>=i+26?26:p-i;if(m<y)break;var v=36-y;h>f(l/v)&&g("overflow"),h*=v}var b=r.length+1;i=w(o-d,b,0==d),f(o/b)>l-s&&g("overflow"),s+=f(o/b),o%=b,r.splice(o++,0,s)}return String.fromCodePoint.apply(String,r)},E=function(e){var t=[],r=(e=v(e)).length,n=128,o=0,s=72,i=!0,a=!1,c=void 0;try{for(var u,d=e[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var h=u.value;h<128&&t.push(m(h))}}catch(e){a=!0,c=e}finally{try{!i&&d.return&&d.return()}finally{if(a)throw c}}var p=t.length,y=p;for(p&&t.push("-");y<r;){var S=l,E=!0,_=!1,P=void 0;try{for(var x,k=e[Symbol.iterator]();!(E=(x=k.next()).done);E=!0){var C=x.value;C>=n&&C<S&&(S=C)}}catch(e){_=!0,P=e}finally{try{!E&&k.return&&k.return()}finally{if(_)throw P}}var T=y+1;S-n>f((l-o)/T)&&g("overflow"),o+=(S-n)*T,n=S;var A=!0,O=!1,R=void 0;try{for(var D,L=e[Symbol.iterator]();!(A=(D=L.next()).done);A=!0){var F=D.value;if(F<n&&++o>l&&g("overflow"),F==n){for(var j=o,I=36;;I+=36){var M=I<=s?1:I>=s+26?26:I-s;if(j<M)break;var N=j-M,$=36-M;t.push(m(b(M+N%$,0))),j=f(N/$)}t.push(m(b(j,0))),s=w(o,T,y==p),o=0,++y}}}catch(e){O=!0,R=e}finally{try{!A&&L.return&&L.return()}finally{if(O)throw R}}++o,++n}return t.join("")},_=function(e){return y(e,(function(e){return d.test(e)?"xn--"+E(e):e}))},P=function(e){return y(e,(function(e){return u.test(e)?S(e.slice(4).toLowerCase()):e}))},x={};function k(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function C(e){for(var t="",r=0,n=e.length;r<n;){var o=parseInt(e.substr(r+1,2),16);if(o<128)t+=String.fromCharCode(o),r+=3;else if(o>=194&&o<224){if(n-r>=6){var s=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&o)<<6|63&s)}else t+=e.substr(r,6);r+=6}else if(o>=224){if(n-r>=9){var i=parseInt(e.substr(r+4,2),16),a=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&o)<<12|(63&i)<<6|63&a)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function T(e,t){function r(e){var r=C(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,k).replace(t.PCT_ENCODED,o)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,k).replace(t.PCT_ENCODED,o)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,k).replace(t.PCT_ENCODED,o)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,k).replace(t.PCT_ENCODED,o)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,k).replace(t.PCT_ENCODED,o)),e}function A(e){return e.replace(/^0*(.*)/,"$1")||"0"}function O(e,t){var r=e.match(t.IPV4ADDRESS)||[],n=c(r,2)[1];return n?n.split(".").map(A).join("."):e}function R(e,t){var r=e.match(t.IPV6ADDRESS)||[],n=c(r,3),o=n[1],s=n[2];if(o){for(var i=o.toLowerCase().split("::").reverse(),a=c(i,2),l=a[0],u=a[1],d=u?u.split(":").map(A):[],h=l.split(":").map(A),p=t.IPV4ADDRESS.test(h[h.length-1]),f=p?7:8,m=h.length-f,g=Array(f),y=0;y<f;++y)g[y]=d[y]||h[m+y]||"";p&&(g[f-1]=O(g[f-1],t));var v=g.reduce((function(e,t,r){if(!t||"0"===t){var n=e[e.length-1];n&&n.index+n.length===r?n.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(v&&v.length>1){var w=g.slice(0,v.index),S=g.slice(v.index+v.length);b=w.join(":")+"::"+S.join(":")}else b=g.join(":");return s&&(b+="%"+s),b}return e}var D=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,L=void 0==="".match(/(){0}/)[1];function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=!1!==t.iri?a:i;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var o=e.match(D);if(o){L?(r.scheme=o[1],r.userinfo=o[3],r.host=o[4],r.port=parseInt(o[5],10),r.path=o[6]||"",r.query=o[7],r.fragment=o[8],isNaN(r.port)&&(r.port=o[5])):(r.scheme=o[1]||void 0,r.userinfo=-1!==e.indexOf("@")?o[3]:void 0,r.host=-1!==e.indexOf("//")?o[4]:void 0,r.port=parseInt(o[5],10),r.path=o[6]||"",r.query=-1!==e.indexOf("?")?o[7]:void 0,r.fragment=-1!==e.indexOf("#")?o[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?o[4]:void 0)),r.host&&(r.host=R(O(r.host,n),n)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var s=x[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||s&&s.unicodeSupport)T(r,n);else{if(r.host&&(t.domainHost||s&&s.domainHost))try{r.host=_(r.host.replace(n.PCT_ENCODED,C).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}T(r,i)}s&&s.parse&&s.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function j(e,t){var r=!1!==t.iri?a:i,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(R(O(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"==typeof e.port&&(n.push(":"),n.push(e.port.toString(10))),n.length?n.join(""):void 0}var I=/^\.\.?\//,M=/^\/\.(\/|$)/,N=/^\/\.\.(\/|$)/,$=/^\/?(?:.|\n)*?(?=\/|$)/;function H(e){for(var t=[];e.length;)if(e.match(I))e=e.replace(I,"");else if(e.match(M))e=e.replace(M,"/");else if(e.match(N))e=e.replace(N,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match($);if(!r)throw new Error("Unexpected dot segment condition");var n=r[0];e=e.slice(n.length),t.push(n)}return t.join("")}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?a:i,n=[],o=x[(t.scheme||e.scheme||"").toLowerCase()];if(o&&o.serialize&&o.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||o&&o.domainHost)try{e.host=t.iri?P(e.host):_(e.host.replace(r.PCT_ENCODED,C).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}T(e,r),"suffix"!==t.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var s=j(e,t);if(void 0!==s&&("suffix"!==t.reference&&n.push("//"),n.push(s),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var c=e.path;t.absolutePath||o&&o.absolutePath||(c=H(c)),void 0===s&&(c=c.replace(/^\/\//,"/%2F")),n.push(c)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function B(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],o={};return n||(e=F(U(e,r),r),t=F(U(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(o.scheme=t.scheme,o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=H(t.path||""),o.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=H(t.path||""),o.query=t.query):(t.path?("/"===t.path.charAt(0)?o.path=H(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?o.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:o.path=t.path:o.path="/"+t.path,o.path=H(o.path)),o.query=t.query):(o.path=e.path,void 0!==t.query?o.query=t.query:o.query=e.query),o.userinfo=e.userinfo,o.host=e.host,o.port=e.port),o.scheme=e.scheme),o.fragment=t.fragment,o}function z(e,t){return e&&e.toString().replace(t&&t.iri?a.PCT_ENCODED:i.PCT_ENCODED,C)}var q={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},V={scheme:"https",domainHost:q.domainHost,parse:q.parse,serialize:q.serialize},Q={},W="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",G="[0-9A-Fa-f]",J=r(r("%[EFef]"+G+"%"+G+G+"%"+G+G)+"|"+r("%[89A-Fa-f]"+G+"%"+G+G)+"|"+r("%"+G+G)),K=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),X=new RegExp(W,"g"),Y=new RegExp(J,"g"),Z=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',K),"g"),ee=new RegExp(t("[^]",W,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),te=ee;function re(e){var t=C(e);return t.match(X)?t:e}var ne={scheme:"mailto",parse:function(e,t){var r=e,n=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var o=!1,s={},i=r.query.split("&"),a=0,c=i.length;a<c;++a){var l=i[a].split("=");switch(l[0]){case"to":for(var u=l[1].split(","),d=0,h=u.length;d<h;++d)n.push(u[d]);break;case"subject":r.subject=z(l[1],t);break;case"body":r.body=z(l[1],t);break;default:o=!0,s[z(l[0],t)]=z(l[1],t)}}o&&(r.headers=s)}r.query=void 0;for(var p=0,f=n.length;p<f;++p){var m=n[p].split("@");if(m[0]=z(m[0]),t.unicodeSupport)m[1]=z(m[1],t).toLowerCase();else try{m[1]=_(z(m[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}n[p]=m.join("@")}return r},serialize:function(e,t){var r,n=e,s=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(s){for(var i=0,a=s.length;i<a;++i){var c=String(s[i]),l=c.lastIndexOf("@"),u=c.slice(0,l).replace(Y,re).replace(Y,o).replace(Z,k),d=c.slice(l+1);try{d=t.iri?P(d):_(z(d,t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}s[i]=u+"@"+d}n.path=s.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var p=[];for(var f in h)h[f]!==Q[f]&&p.push(f.replace(Y,re).replace(Y,o).replace(ee,k)+"="+h[f].replace(Y,re).replace(Y,o).replace(te,k));return p.length&&(n.query=p.join("&")),n}},oe=/^([^\:]+)\:(.*)/,se={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(oe),n=e;if(r){var o=t.scheme||n.scheme||"urn",s=r[1].toLowerCase(),i=r[2],a=o+":"+(t.nid||s),c=x[a];n.nid=s,n.nss=i,n.path=void 0,c&&(n=c.parse(n,t))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",n=e.nid,o=r+":"+(t.nid||n),s=x[o];s&&(e=s.serialize(e,t));var i=e,a=e.nss;return i.path=(n||t.nid)+":"+a,i}},ie=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ae={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(ie)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};x[q.scheme]=q,x[V.scheme]=V,x[ne.scheme]=ne,x[se.scheme]=se,x[ae.scheme]=ae,e.SCHEMES=x,e.pctEncChar=k,e.pctDecChars=C,e.parse=F,e.removeDotSegments=H,e.serialize=U,e.resolveComponents=B,e.resolve=function(e,t,r){var n=function(e,t){var r=e;if(t)for(var n in t)r[n]=t[n];return r}({scheme:"null"},r);return U(B(F(e,n),F(t,n),n,!0),n)},e.normalize=function(e,t){return"string"==typeof e?e=U(F(e,t),t):"object"===n(e)&&(e=F(U(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=U(F(e,r),r):"object"===n(e)&&(e=U(e,r)),"string"==typeof t?t=U(F(t,r),r):"object"===n(t)&&(t=U(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?a.ESCAPE:i.ESCAPE,k)},e.unescapeComponent=z,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,r){"use strict";e.exports=function(e){for(var t,r=0,n=e.length,o=0;o<n;)r++,(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<n&&56320==(64512&(t=e.charCodeAt(o)))&&o++;return r}},function(e,t,r){"use strict";var n=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),function e(t,r,o,s,i,a,c,l,u,d){if(s&&"object"==typeof s&&!Array.isArray(s)){for(var h in r(s,i,a,c,l,u,d),s){var p=s[h];if(Array.isArray(p)){if(h in n.arrayKeywords)for(var f=0;f<p.length;f++)e(t,r,o,p[f],i+"/"+h+"/"+f,a,i,h,s,f)}else if(h in n.propsKeywords){if(p&&"object"==typeof p)for(var m in p)e(t,r,o,p[m],i+"/"+h+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),a,i,h,s,m)}else(h in n.keywords||t.allKeys&&!(h in n.skipKeywords))&&e(t,r,o,p,i+"/"+h,a,i,h,s)}o(s,i,a,c,l,u,d)}}(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};n.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},n.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},n.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},n.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},function(e,t,r){"use strict";var n=e.exports=function(){this._cache={}};n.prototype.put=function(e,t){this._cache[e]=t},n.prototype.get=function(e){return this._cache[e]},n.prototype.del=function(e){delete this._cache[e]},n.prototype.clear=function(){this._cache={}}},function(e,t,r){"use strict";var n=r(13),o=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31],i=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,a=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,c=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,l=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,u=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,d=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,h=/^(?:\/(?:[^~/]|~0|~1)*)*$/,p=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,f=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function m(e){return e="full"==e?"full":"fast",n.copy(m[e])}function g(e){var t=e.match(o);if(!t)return!1;var r=+t[1],n=+t[2],i=+t[3];return n>=1&&n<=12&&i>=1&&i<=(2==n&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:s[n])}function y(e,t){var r=e.match(i);if(!r)return!1;var n=r[1],o=r[2],s=r[3],a=r[5];return(n<=23&&o<=59&&s<=59||23==n&&59==o&&60==s)&&(!t||a)}e.exports=m,m.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":l,url:u,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:S,uuid:d,"json-pointer":h,"json-pointer-uri-fragment":p,"relative-json-pointer":f},m.full={date:g,time:y,"date-time":function(e){var t=e.split(v);return 2==t.length&&g(t[0])&&y(t[1],!0)},uri:function(e){return b.test(e)&&c.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":l,url:u,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:S,uuid:d,"json-pointer":h,"json-pointer-uri-fragment":p,"relative-json-pointer":f};var v=/t|\s/i;var b=/\/|:/;var w=/[^\\]\\Z/;function S(e){if(w.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},function(e,t,r){"use strict";var n=r(174),o=r(13).toHash;e.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=o(t),e.types=o(["number","integer","string","array","object","boolean","null"]),e.forEach((function(r){r.rules=r.rules.map((function(r){var o;if("object"==typeof r){var s=Object.keys(r)[0];o=r[s],r=s,o.forEach((function(r){t.push(r),e.all[r]=!0}))}return t.push(r),e.all[r]={keyword:r,code:n[r],implements:o}})),e.all.$comment={keyword:"$comment",code:n.$comment},r.type&&(e.types[r.type]=r)})),e.keywords=o(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},function(e,t,r){"use strict";e.exports={$ref:r(175),allOf:r(176),anyOf:r(177),$comment:r(178),const:r(179),contains:r(180),dependencies:r(181),enum:r(182),format:r(183),if:r(184),items:r(185),maximum:r(66),minimum:r(66),maxItems:r(67),minItems:r(67),maxLength:r(68),minLength:r(68),maxProperties:r(69),minProperties:r(69),multipleOf:r(186),not:r(187),oneOf:r(188),pattern:r(189),properties:r(190),propertyNames:r(191),required:r(192),uniqueItems:r(193),validate:r(65)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o,s=" ",i=e.level,a=e.dataLevel,c=e.schema[t],l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),h="valid"+i;if("#"==c||"#/"==c)e.isRoot?(n=e.async,o="validate"):(n=!0===e.root.schema.$async,o="root.refVal[0]");else{var p=e.resolveRef(e.baseId,c,e.isRoot);if(void 0===p){var f=e.MissingRefError.message(e.baseId,c);if("fail"==e.opts.missingRefs){e.logger.error(f),(v=v||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",!1!==e.opts.messages&&(s+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(s+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var m=s;s=v.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+m+"]); ":s+=" validate.errors = ["+m+"]; return false; ":s+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(s+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,c,f);e.logger.warn(f),u&&(s+=" if (true) { ")}}else if(p.inline){var g=e.util.copy(e);g.level++;var y="valid"+g.level;g.schema=p.schema,g.schemaPath="",g.errSchemaPath=c,s+=" "+e.validate(g).replace(/validate\.schema/g,p.code)+" ",u&&(s+=" if ("+y+") { ")}else n=!0===p.$async||e.async&&!1!==p.$async,o=p.code}if(o){var v;(v=v||[]).push(s),s="",e.opts.passContext?s+=" "+o+".call(this, ":s+=" "+o+"( ",s+=" "+d+", (dataPath || '')",'""'!=e.errorPath&&(s+=" + "+e.errorPath);var b=s+=" , "+(a?"data"+(a-1||""):"parentData")+" , "+(a?e.dataPathArr[a]:"parentDataProperty")+", rootData)  ";if(s=v.pop(),n){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(s+=" var "+h+"; "),s+=" try { await "+b+"; ",u&&(s+=" "+h+" = true; "),s+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(s+=" "+h+" = false; "),s+=" } ",u&&(s+=" if ("+h+") { ")}else s+=" if (!"+b+") { if (vErrors === null) vErrors = "+o+".errors; else vErrors = vErrors.concat("+o+".errors); errors = vErrors.length; } ",u&&(s+=" else { ")}return s}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),i=e.errSchemaPath+"/"+t,a=!e.opts.allErrors,c=e.util.copy(e),l="";c.level++;var u="valid"+c.level,d=c.baseId,h=!0,p=o;if(p)for(var f,m=-1,g=p.length-1;m<g;)f=p[m+=1],(e.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0||!1===f:e.util.schemaHasRules(f,e.RULES.all))&&(h=!1,c.schema=f,c.schemaPath=s+"["+m+"]",c.errSchemaPath=i+"/"+m,n+="  "+e.validate(c)+" ",c.baseId=d,a&&(n+=" if ("+u+") { ",l+="}"));return a&&(n+=h?" if (true) { ":" "+l.slice(0,-1)+" "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="valid"+o,h="errs__"+o,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level;if(i.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0||!1===t:e.util.schemaHasRules(t,e.RULES.all)}))){var g=p.baseId;n+=" var "+h+" = errors; var "+d+" = false;  ";var y=e.compositeRule;e.compositeRule=p.compositeRule=!0;var v=i;if(v)for(var b,w=-1,S=v.length-1;w<S;)b=v[w+=1],p.schema=b,p.schemaPath=a+"["+w+"]",p.errSchemaPath=c+"/"+w,n+="  "+e.validate(p)+" ",p.baseId=g,n+=" "+d+" = "+d+" || "+m+"; if (!"+d+") { ",f+="}";e.compositeRule=p.compositeRule=y,n+=" "+f+" if (!"+d+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else l&&(n+=" if (true) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.schema[t],s=e.errSchemaPath+"/"+t,i=(e.opts.allErrors,e.util.toQuotedString(o));return!0===e.opts.$comment?n+=" console.log("+i+");":"function"==typeof e.opts.$comment&&(n+=" self._opts.$comment("+i+", "+e.util.toQuotedString(s)+", validate.root.schema);"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="valid"+o,h=e.opts.$data&&i&&i.$data;h&&(n+=" var schema"+o+" = "+e.util.getData(i.$data,s,e.dataPathArr)+"; "),h||(n+=" var schema"+o+" = validate.schema"+a+";"),n+="var "+d+" = equal("+u+", schema"+o+"); if (!"+d+") {   ";var p=p||[];p.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValue: schema"+o+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to constant' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var f=n;return n=p.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+f+"]); ":n+=" validate.errors = ["+f+"]; return false; ":n+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",l&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="valid"+o,h="errs__"+o,p=e.util.copy(e);p.level++;var f="valid"+p.level,m="i"+o,g=p.dataLevel=e.dataLevel+1,y="data"+g,v=e.baseId,b=e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0||!1===i:e.util.schemaHasRules(i,e.RULES.all);if(n+="var "+h+" = errors;var "+d+";",b){var w=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=i,p.schemaPath=a,p.errSchemaPath=c,n+=" var "+f+" = false; for (var "+m+" = 0; "+m+" < "+u+".length; "+m+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var S=u+"["+m+"]";p.dataPathArr[g]=m;var E=e.validate(p);p.baseId=v,e.util.varOccurences(E,y)<2?n+=" "+e.util.varReplace(E,y,S)+" ":n+=" var "+y+" = "+S+"; "+E+" ",n+=" if ("+f+") break; }  ",e.compositeRule=p.compositeRule=w,n+="  if (!"+f+") {"}else n+=" if ("+u+".length == 0) {";var _=_||[];_.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should contain a valid item' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var P=n;return n=_.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+P+"]); ":n+=" validate.errors = ["+P+"]; return false; ":n+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",b&&(n+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(n+=" } "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="errs__"+o,h=e.util.copy(e),p="";h.level++;var f="valid"+h.level,m={},g={},y=e.opts.ownProperties;for(S in i)if("__proto__"!=S){var v=i[S],b=Array.isArray(v)?g:m;b[S]=v}n+="var "+d+" = errors;";var w=e.errorPath;for(var S in n+="var missing"+o+";",g)if((b=g[S]).length){if(n+=" if ( "+u+e.util.getProperty(S)+" !== undefined ",y&&(n+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(S)+"') "),l){n+=" && ( ";var E=b;if(E)for(var _=-1,P=E.length-1;_<P;){O=E[_+=1],_&&(n+=" || "),n+=" ( ( "+(F=u+(L=e.util.getProperty(O)))+" === undefined ",y&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(O)+"') "),n+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?O:L)+") ) "}n+=")) {  ";var x="missing"+o,k="' + "+x+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,x,!0):w+" + "+x);var C=C||[];C.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(S)+"', missingProperty: '"+k+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==b.length?n+="property "+e.util.escapeQuotes(b[0]):n+="properties "+e.util.escapeQuotes(b.join(", ")),n+=" when property "+e.util.escapeQuotes(S)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var T=n;n=C.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+T+"]); ":n+=" validate.errors = ["+T+"]; return false; ":n+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var A=b;if(A)for(var O,R=-1,D=A.length-1;R<D;){O=A[R+=1];var L=e.util.getProperty(O),F=(k=e.util.escapeQuotes(O),u+L);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,O,e.opts.jsonPointers)),n+=" if ( "+F+" === undefined ",y&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(O)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(S)+"', missingProperty: '"+k+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==b.length?n+="property "+e.util.escapeQuotes(b[0]):n+="properties "+e.util.escapeQuotes(b.join(", ")),n+=" when property "+e.util.escapeQuotes(S)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",l&&(p+="}",n+=" else { ")}e.errorPath=w;var j=h.baseId;for(var S in m){v=m[S];(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0||!1===v:e.util.schemaHasRules(v,e.RULES.all))&&(n+=" "+f+" = true; if ( "+u+e.util.getProperty(S)+" !== undefined ",y&&(n+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(S)+"') "),n+=") { ",h.schema=v,h.schemaPath=a+e.util.getProperty(S),h.errSchemaPath=c+"/"+e.util.escapeFragment(S),n+="  "+e.validate(h)+" ",h.baseId=j,n+=" }  ",l&&(n+=" if ("+f+") { ",p+="}"))}return l&&(n+="   "+p+" if ("+d+" == errors) {"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="valid"+o,h=e.opts.$data&&i&&i.$data;h&&(n+=" var schema"+o+" = "+e.util.getData(i.$data,s,e.dataPathArr)+"; ");var p="i"+o,f="schema"+o;h||(n+=" var "+f+" = validate.schema"+a+";"),n+="var "+d+";",h&&(n+=" if (schema"+o+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+o+")) "+d+" = false; else {"),n+=d+" = false;for (var "+p+"=0; "+p+"<"+f+".length; "+p+"++) if (equal("+u+", "+f+"["+p+"])) { "+d+" = true; break; }",h&&(n+="  }  "),n+=" if (!"+d+") {   ";var m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValues: schema"+o+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var g=n;return n=m.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",l&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||"");if(!1===e.opts.format)return l&&(n+=" if (true) { "),n;var d,h=e.opts.$data&&i&&i.$data;h?(n+=" var schema"+o+" = "+e.util.getData(i.$data,s,e.dataPathArr)+"; ",d="schema"+o):d=i;var p=e.opts.unknownFormats,f=Array.isArray(p);if(h){n+=" var "+(m="format"+o)+" = formats["+d+"]; var "+(g="isObject"+o)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(y="formatType"+o)+" = "+g+" && "+m+".type || 'string'; if ("+g+") { ",e.async&&(n+=" var async"+o+" = "+m+".async; "),n+=" "+m+" = "+m+".validate; } if (  ",h&&(n+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),n+=" (","ignore"!=p&&(n+=" ("+d+" && !"+m+" ",f&&(n+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),n+=") || "),n+=" ("+m+" && "+y+" == '"+r+"' && !(typeof "+m+" == 'function' ? ",e.async?n+=" (async"+o+" ? await "+m+"("+u+") : "+m+"("+u+")) ":n+=" "+m+"("+u+") ",n+=" : "+m+".test("+u+"))))) {"}else{var m;if(!(m=e.formats[i])){if("ignore"==p)return e.logger.warn('unknown format "'+i+'" ignored in schema at path "'+e.errSchemaPath+'"'),l&&(n+=" if (true) { "),n;if(f&&p.indexOf(i)>=0)return l&&(n+=" if (true) { "),n;throw new Error('unknown format "'+i+'" is used in schema at path "'+e.errSchemaPath+'"')}var g,y=(g="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(g){var v=!0===m.async;m=m.validate}if(y!=r)return l&&(n+=" if (true) { "),n;if(v){if(!e.async)throw new Error("async format in sync schema");n+=" if (!(await "+(b="formats"+e.util.getProperty(i)+".validate")+"("+u+"))) { "}else{n+=" if (! ";var b="formats"+e.util.getProperty(i);g&&(b+=".validate"),n+="function"==typeof m?" "+b+"("+u+") ":" "+b+".test("+u+") ",n+=") { "}}var w=w||[];w.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",n+=h?""+d:""+e.util.toQuotedString(i),n+="  } ",!1!==e.opts.messages&&(n+=" , message: 'should match format \"",n+=h?"' + "+d+" + '":""+e.util.escapeQuotes(i),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+a:""+e.util.toQuotedString(i),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var S=n;return n=w.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+S+"]); ":n+=" validate.errors = ["+S+"]; return false; ":n+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",l&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="valid"+o,h="errs__"+o,p=e.util.copy(e);p.level++;var f="valid"+p.level,m=e.schema.then,g=e.schema.else,y=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0||!1===m:e.util.schemaHasRules(m,e.RULES.all)),v=void 0!==g&&(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0||!1===g:e.util.schemaHasRules(g,e.RULES.all)),b=p.baseId;if(y||v){var w;p.createErrors=!1,p.schema=i,p.schemaPath=a,p.errSchemaPath=c,n+=" var "+h+" = errors; var "+d+" = true;  ";var S=e.compositeRule;e.compositeRule=p.compositeRule=!0,n+="  "+e.validate(p)+" ",p.baseId=b,p.createErrors=!0,n+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }  ",e.compositeRule=p.compositeRule=S,y?(n+=" if ("+f+") {  ",p.schema=e.schema.then,p.schemaPath=e.schemaPath+".then",p.errSchemaPath=e.errSchemaPath+"/then",n+="  "+e.validate(p)+" ",p.baseId=b,n+=" "+d+" = "+f+"; ",y&&v?n+=" var "+(w="ifClause"+o)+" = 'then'; ":w="'then'",n+=" } ",v&&(n+=" else { ")):n+=" if (!"+f+") { ",v&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+".else",p.errSchemaPath=e.errSchemaPath+"/else",n+="  "+e.validate(p)+" ",p.baseId=b,n+=" "+d+" = "+f+"; ",y&&v?n+=" var "+(w="ifClause"+o)+" = 'else'; ":w="'else'",n+=" } "),n+=" if (!"+d+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+w+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match \"' + "+w+" + '\" schema' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" }   ",l&&(n+=" else { ")}else l&&(n+=" if (true) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="valid"+o,h="errs__"+o,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level,g="i"+o,y=p.dataLevel=e.dataLevel+1,v="data"+y,b=e.baseId;if(n+="var "+h+" = errors;var "+d+";",Array.isArray(i)){var w=e.schema.additionalItems;if(!1===w){n+=" "+d+" = "+u+".length <= "+i.length+"; ";var S=c;c=e.errSchemaPath+"/additionalItems",n+="  if (!"+d+") {   ";var E=E||[];E.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+i.length+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have more than "+i.length+" items' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var _=n;n=E.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+_+"]); ":n+=" validate.errors = ["+_+"]; return false; ":n+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",c=S,l&&(f+="}",n+=" else { ")}var P=i;if(P)for(var x,k=-1,C=P.length-1;k<C;)if(x=P[k+=1],e.opts.strictKeywords?"object"==typeof x&&Object.keys(x).length>0||!1===x:e.util.schemaHasRules(x,e.RULES.all)){n+=" "+m+" = true; if ("+u+".length > "+k+") { ";var T=u+"["+k+"]";p.schema=x,p.schemaPath=a+"["+k+"]",p.errSchemaPath=c+"/"+k,p.errorPath=e.util.getPathExpr(e.errorPath,k,e.opts.jsonPointers,!0),p.dataPathArr[y]=k;var A=e.validate(p);p.baseId=b,e.util.varOccurences(A,v)<2?n+=" "+e.util.varReplace(A,v,T)+" ":n+=" var "+v+" = "+T+"; "+A+" ",n+=" }  ",l&&(n+=" if ("+m+") { ",f+="}")}if("object"==typeof w&&(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0||!1===w:e.util.schemaHasRules(w,e.RULES.all))){p.schema=w,p.schemaPath=e.schemaPath+".additionalItems",p.errSchemaPath=e.errSchemaPath+"/additionalItems",n+=" "+m+" = true; if ("+u+".length > "+i.length+") {  for (var "+g+" = "+i.length+"; "+g+" < "+u+".length; "+g+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);T=u+"["+g+"]";p.dataPathArr[y]=g;A=e.validate(p);p.baseId=b,e.util.varOccurences(A,v)<2?n+=" "+e.util.varReplace(A,v,T)+" ":n+=" var "+v+" = "+T+"; "+A+" ",l&&(n+=" if (!"+m+") break; "),n+=" } }  ",l&&(n+=" if ("+m+") { ",f+="}")}}else if(e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0||!1===i:e.util.schemaHasRules(i,e.RULES.all)){p.schema=i,p.schemaPath=a,p.errSchemaPath=c,n+="  for (var "+g+" = 0; "+g+" < "+u+".length; "+g+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);T=u+"["+g+"]";p.dataPathArr[y]=g;A=e.validate(p);p.baseId=b,e.util.varOccurences(A,v)<2?n+=" "+e.util.varReplace(A,v,T)+" ":n+=" var "+v+" = "+T+"; "+A+" ",l&&(n+=" if (!"+m+") break; "),n+=" }"}return l&&(n+=" "+f+" if ("+h+" == errors) {"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",s=e.level,i=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(i||""),h=e.opts.$data&&a&&a.$data;if(h?(o+=" var schema"+s+" = "+e.util.getData(a.$data,i,e.dataPathArr)+"; ",n="schema"+s):n=a,!h&&"number"!=typeof a)throw new Error(t+" must be number");o+="var division"+s+";if (",h&&(o+=" "+n+" !== undefined && ( typeof "+n+" != 'number' || "),o+=" (division"+s+" = "+d+" / "+n+", ",e.opts.multipleOfPrecision?o+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":o+=" division"+s+" !== parseInt(division"+s+") ",o+=" ) ",h&&(o+="  )  "),o+=" ) {   ";var p=p||[];p.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { multipleOf: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should be multiple of ",o+=h?"' + "+n:n+"'"),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var f=o;return o=p.pop(),!e.compositeRule&&u?e.async?o+=" throw new ValidationError(["+f+"]); ":o+=" validate.errors = ["+f+"]; return false; ":o+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",u&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="errs__"+o,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0||!1===i:e.util.schemaHasRules(i,e.RULES.all)){h.schema=i,h.schemaPath=a,h.errSchemaPath=c,n+=" var "+d+" = errors;  ";var f,m=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1,h.opts.allErrors&&(f=h.opts.allErrors,h.opts.allErrors=!1),n+=" "+e.validate(h)+" ",h.createErrors=!0,f&&(h.opts.allErrors=f),e.compositeRule=h.compositeRule=m,n+=" if ("+p+") {   ";var g=g||[];g.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var y=n;n=g.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(n+=" if (false) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="valid"+o,h="errs__"+o,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level,g=p.baseId,y="prevValid"+o,v="passingSchemas"+o;n+="var "+h+" = errors , "+y+" = false , "+d+" = false , "+v+" = null; ";var b=e.compositeRule;e.compositeRule=p.compositeRule=!0;var w=i;if(w)for(var S,E=-1,_=w.length-1;E<_;)S=w[E+=1],(e.opts.strictKeywords?"object"==typeof S&&Object.keys(S).length>0||!1===S:e.util.schemaHasRules(S,e.RULES.all))?(p.schema=S,p.schemaPath=a+"["+E+"]",p.errSchemaPath=c+"/"+E,n+="  "+e.validate(p)+" ",p.baseId=g):n+=" var "+m+" = true; ",E&&(n+=" if ("+m+" && "+y+") { "+d+" = false; "+v+" = ["+v+", "+E+"]; } else { ",f+="}"),n+=" if ("+m+") { "+d+" = "+y+" = true; "+v+" = "+E+"; }";return e.compositeRule=p.compositeRule=b,n+=f+"if (!"+d+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+v+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(n+=" } "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",s=e.level,i=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(i||""),h=e.opts.$data&&a&&a.$data;h?(o+=" var schema"+s+" = "+e.util.getData(a.$data,i,e.dataPathArr)+"; ",n="schema"+s):n=a,o+="if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'string') || "),o+=" !"+(h?"(new RegExp("+n+"))":e.usePattern(a))+".test("+d+") ) {   ";var p=p||[];p.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { pattern:  ",o+=h?""+n:""+e.util.toQuotedString(a),o+="  } ",!1!==e.opts.messages&&(o+=" , message: 'should match pattern \"",o+=h?"' + "+n+" + '":""+e.util.escapeQuotes(a),o+="\"' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+e.util.toQuotedString(a),o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var f=o;return o=p.pop(),!e.compositeRule&&u?e.async?o+=" throw new ValidationError(["+f+"]); ":o+=" validate.errors = ["+f+"]; return false; ":o+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",u&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="errs__"+o,h=e.util.copy(e),p="";h.level++;var f="valid"+h.level,m="key"+o,g="idx"+o,y=h.dataLevel=e.dataLevel+1,v="data"+y,b="dataProperties"+o,w=Object.keys(i||{}).filter(L),S=e.schema.patternProperties||{},E=Object.keys(S).filter(L),_=e.schema.additionalProperties,P=w.length||E.length,x=!1===_,k="object"==typeof _&&Object.keys(_).length,C=e.opts.removeAdditional,T=x||k||C,A=e.opts.ownProperties,O=e.baseId,R=e.schema.required;if(R&&(!e.opts.$data||!R.$data)&&R.length<e.opts.loopRequired)var D=e.util.toHash(R);function L(e){return"__proto__"!==e}if(n+="var "+d+" = errors;var "+f+" = true;",A&&(n+=" var "+b+" = undefined;"),T){if(n+=A?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+m+" = "+b+"["+g+"]; ":" for (var "+m+" in "+u+") { ",P){if(n+=" var isAdditional"+o+" = !(false ",w.length)if(w.length>8)n+=" || validate.schema"+a+".hasOwnProperty("+m+") ";else{var F=w;if(F)for(var j=-1,I=F.length-1;j<I;)J=F[j+=1],n+=" || "+m+" == "+e.util.toQuotedString(J)+" "}if(E.length){var M=E;if(M)for(var N=-1,$=M.length-1;N<$;)se=M[N+=1],n+=" || "+e.usePattern(se)+".test("+m+") "}n+=" ); if (isAdditional"+o+") { "}if("all"==C)n+=" delete "+u+"["+m+"]; ";else{var H=e.errorPath,U="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),x)if(C)n+=" delete "+u+"["+m+"]; ";else{n+=" "+f+" = false; ";var B=c;c=e.errSchemaPath+"/additionalProperties",(re=re||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+U+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is an invalid additional property":n+="should NOT have additional properties",n+="' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var z=n;n=re.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+z+"]); ":n+=" validate.errors = ["+z+"]; return false; ":n+=" var err = "+z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=B,l&&(n+=" break; ")}else if(k)if("failing"==C){n+=" var "+d+" = errors;  ";var q=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=_,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var V=u+"["+m+"]";h.dataPathArr[y]=m;var Q=e.validate(h);h.baseId=O,e.util.varOccurences(Q,v)<2?n+=" "+e.util.varReplace(Q,v,V)+" ":n+=" var "+v+" = "+V+"; "+Q+" ",n+=" if (!"+f+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+m+"]; }  ",e.compositeRule=h.compositeRule=q}else{h.schema=_,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);V=u+"["+m+"]";h.dataPathArr[y]=m;Q=e.validate(h);h.baseId=O,e.util.varOccurences(Q,v)<2?n+=" "+e.util.varReplace(Q,v,V)+" ":n+=" var "+v+" = "+V+"; "+Q+" ",l&&(n+=" if (!"+f+") break; ")}e.errorPath=H}P&&(n+=" } "),n+=" }  ",l&&(n+=" if ("+f+") { ",p+="}")}var W=e.opts.useDefaults&&!e.compositeRule;if(w.length){var G=w;if(G)for(var J,K=-1,X=G.length-1;K<X;){var Y=i[J=G[K+=1]];if(e.opts.strictKeywords?"object"==typeof Y&&Object.keys(Y).length>0||!1===Y:e.util.schemaHasRules(Y,e.RULES.all)){var Z=e.util.getProperty(J),ee=(V=u+Z,W&&void 0!==Y.default);h.schema=Y,h.schemaPath=a+Z,h.errSchemaPath=c+"/"+e.util.escapeFragment(J),h.errorPath=e.util.getPath(e.errorPath,J,e.opts.jsonPointers),h.dataPathArr[y]=e.util.toQuotedString(J);Q=e.validate(h);if(h.baseId=O,e.util.varOccurences(Q,v)<2){Q=e.util.varReplace(Q,v,V);var te=V}else{te=v;n+=" var "+v+" = "+V+"; "}if(ee)n+=" "+Q+" ";else{if(D&&D[J]){n+=" if ( "+te+" === undefined ",A&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(J)+"') "),n+=") { "+f+" = false; ";H=e.errorPath,B=c;var re,ne=e.util.escapeQuotes(J);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(H,J,e.opts.jsonPointers)),c=e.errSchemaPath+"/required",(re=re||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+ne+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+ne+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";z=n;n=re.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+z+"]); ":n+=" validate.errors = ["+z+"]; return false; ":n+=" var err = "+z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=B,e.errorPath=H,n+=" } else { "}else l?(n+=" if ( "+te+" === undefined ",A&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(J)+"') "),n+=") { "+f+" = true; } else { "):(n+=" if ("+te+" !== undefined ",A&&(n+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(J)+"') "),n+=" ) { ");n+=" "+Q+" } "}}l&&(n+=" if ("+f+") { ",p+="}")}}if(E.length){var oe=E;if(oe)for(var se,ie=-1,ae=oe.length-1;ie<ae;){Y=S[se=oe[ie+=1]];if(e.opts.strictKeywords?"object"==typeof Y&&Object.keys(Y).length>0||!1===Y:e.util.schemaHasRules(Y,e.RULES.all)){h.schema=Y,h.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(se),h.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(se),n+=A?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+m+" = "+b+"["+g+"]; ":" for (var "+m+" in "+u+") { ",n+=" if ("+e.usePattern(se)+".test("+m+")) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);V=u+"["+m+"]";h.dataPathArr[y]=m;Q=e.validate(h);h.baseId=O,e.util.varOccurences(Q,v)<2?n+=" "+e.util.varReplace(Q,v,V)+" ":n+=" var "+v+" = "+V+"; "+Q+" ",l&&(n+=" if (!"+f+") break; "),n+=" } ",l&&(n+=" else "+f+" = true; "),n+=" }  ",l&&(n+=" if ("+f+") { ",p+="}")}}}return l&&(n+=" "+p+" if ("+d+" == errors) {"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="errs__"+o,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(n+="var "+d+" = errors;",e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0||!1===i:e.util.schemaHasRules(i,e.RULES.all)){h.schema=i,h.schemaPath=a,h.errSchemaPath=c;var f="key"+o,m="idx"+o,g="i"+o,y="' + "+f+" + '",v="data"+(h.dataLevel=e.dataLevel+1),b="dataProperties"+o,w=e.opts.ownProperties,S=e.baseId;w&&(n+=" var "+b+" = undefined; "),n+=w?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+f+" = "+b+"["+m+"]; ":" for (var "+f+" in "+u+") { ",n+=" var startErrs"+o+" = errors; ";var E=f,_=e.compositeRule;e.compositeRule=h.compositeRule=!0;var P=e.validate(h);h.baseId=S,e.util.varOccurences(P,v)<2?n+=" "+e.util.varReplace(P,v,E)+" ":n+=" var "+v+" = "+E+"; "+P+" ",e.compositeRule=h.compositeRule=_,n+=" if (!"+p+") { for (var "+g+"=startErrs"+o+"; "+g+"<errors; "+g+"++) { vErrors["+g+"].propertyName = "+f+"; }   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { propertyName: '"+y+"' } ",!1!==e.opts.messages&&(n+=" , message: 'property name \\'"+y+"\\' is invalid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),l&&(n+=" break; "),n+=" } }"}return l&&(n+="  if ("+d+" == errors) {"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),d="valid"+o,h=e.opts.$data&&i&&i.$data;h&&(n+=" var schema"+o+" = "+e.util.getData(i.$data,s,e.dataPathArr)+"; ");var p="schema"+o;if(!h)if(i.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var f=[],m=i;if(m)for(var g,y=-1,v=m.length-1;y<v;){g=m[y+=1];var b=e.schema.properties[g];b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0||!1===b:e.util.schemaHasRules(b,e.RULES.all))||(f[f.length]=g)}}else f=i;if(h||f.length){var w=e.errorPath,S=h||f.length>=e.opts.loopRequired,E=e.opts.ownProperties;if(l)if(n+=" var missing"+o+"; ",S){h||(n+=" var "+p+" = validate.schema"+a+"; ");var _="' + "+(A="schema"+o+"["+(k="i"+o)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,A,e.opts.jsonPointers)),n+=" var "+d+" = true; ",h&&(n+=" if (schema"+o+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+o+")) "+d+" = false; else {"),n+=" for (var "+k+" = 0; "+k+" < "+p+".length; "+k+"++) { "+d+" = "+u+"["+p+"["+k+"]] !== undefined ",E&&(n+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+p+"["+k+"]) "),n+="; if (!"+d+") break; } ",h&&(n+="  }  "),n+="  if (!"+d+") {   ",(T=T||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+_+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+_+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var P=n;n=T.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+P+"]); ":n+=" validate.errors = ["+P+"]; return false; ":n+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var x=f;if(x)for(var k=-1,C=x.length-1;k<C;){R=x[k+=1],k&&(n+=" || "),n+=" ( ( "+(j=u+(F=e.util.getProperty(R)))+" === undefined ",E&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(R)+"') "),n+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?R:F)+") ) "}n+=") {  ";var T;_="' + "+(A="missing"+o)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,A,!0):w+" + "+A),(T=T||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+_+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+_+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";P=n;n=T.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+P+"]); ":n+=" validate.errors = ["+P+"]; return false; ":n+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(S){h||(n+=" var "+p+" = validate.schema"+a+"; ");var A;_="' + "+(A="schema"+o+"["+(k="i"+o)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,A,e.opts.jsonPointers)),h&&(n+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+_+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+_+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),n+=" for (var "+k+" = 0; "+k+" < "+p+".length; "+k+"++) { if ("+u+"["+p+"["+k+"]] === undefined ",E&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+p+"["+k+"]) "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+_+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+_+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(n+="  }  ")}else{var O=f;if(O)for(var R,D=-1,L=O.length-1;D<L;){R=O[D+=1];var F=e.util.getProperty(R),j=(_=e.util.escapeQuotes(R),u+F);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,R,e.opts.jsonPointers)),n+=" if ( "+j+" === undefined ",E&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(R)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+_+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+_+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=w}else l&&(n+=" if (true) {");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",s=e.level,i=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(i||""),h="valid"+s,p=e.opts.$data&&a&&a.$data;if(p?(o+=" var schema"+s+" = "+e.util.getData(a.$data,i,e.dataPathArr)+"; ",n="schema"+s):n=a,(a||p)&&!1!==e.opts.uniqueItems){p&&(o+=" var "+h+"; if ("+n+" === false || "+n+" === undefined) "+h+" = true; else if (typeof "+n+" != 'boolean') "+h+" = false; else { "),o+=" var i = "+d+".length , "+h+" = true , j; if (i > 1) { ";var f=e.schema.items&&e.schema.items.type,m=Array.isArray(f);if(!f||"object"==f||"array"==f||m&&(f.indexOf("object")>=0||f.indexOf("array")>=0))o+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+h+" = false; break outer; } } } ";else{o+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ";var g="checkDataType"+(m?"s":"");o+=" if ("+e.util[g](f,"item",e.opts.strictNumbers,!0)+") continue; ",m&&(o+=" if (typeof item == 'string') item = '\"' + item; "),o+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}o+=" } ",p&&(o+="  }  "),o+=" if (!"+h+") {   ";var y=y||[];y.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(o+=" , schema:  ",o+=p?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var v=o;o=y.pop(),!e.compositeRule&&u?e.async?o+=" throw new ValidationError(["+v+"]); ":o+=" validate.errors = ["+v+"]; return false; ":o+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",u&&(o+=" else { ")}else u&&(o+=" if (true) { ");return o}},function(e,t,r){"use strict";var n=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var o,s=t[r].split("/"),i=e;for(o=1;o<s.length;o++)i=i[s[o]];for(o=0;o<n.length;o++){var a=n[o],c=i[a];c&&(i[a]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e}},function(e,t,r){"use strict";var n=r(39).MissingRef;e.exports=function e(t,r,o){var s=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(o=r,r=void 0);var i=a(t).then((function(){var e=s._addSchema(t,void 0,r);return e.validate||function e(t){try{return s._compile(t)}catch(e){if(e instanceof n)return o(e);throw e}function o(n){var o=n.missingSchema;if(l(o))throw new Error("Schema "+o+" is loaded but "+n.missingRef+" cannot be resolved");var i=s._loadingSchemas[o];return i||(i=s._loadingSchemas[o]=s._opts.loadSchema(o)).then(c,c),i.then((function(e){if(!l(o))return a(e).then((function(){l(o)||s.addSchema(e,o,void 0,r)}))})).then((function(){return e(t)}));function c(){delete s._loadingSchemas[o]}function l(e){return s._refs[e]||s._schemas[e]}}}(e)}));o&&i.then((function(e){o(null,e)}),o);return i;function a(t){var r=t.$schema;return r&&!s.getSchema(r)?e.call(s,{$ref:r},!0):Promise.resolve()}}},function(e,t,r){"use strict";var n=/^[a-z_$][a-z0-9_$-]*$/i,o=r(197),s=r(198);e.exports={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!n.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var s=t.type;if(Array.isArray(s))for(var i=0;i<s.length;i++)c(e,s[i],t);else c(e,s,t);var a=t.metaSchema;a&&(t.$data&&this._opts.$data&&(a={anyOf:[a,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(a,!0))}function c(e,t,n){for(var s,i=0;i<r.length;i++){var a=r[i];if(a.type==t){s=a;break}}s||(s={type:t,rules:[]},r.push(s));var c={keyword:e,definition:n,custom:!0,code:o,implements:n.implements};s.rules.push(c),r.custom[e]=c}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var n=t[r].rules,o=0;o<n.length;o++)if(n[o].keyword==e){n.splice(o,1);break}return this},validate:function e(t,r){e.errors=null;var n=this._validateKeyword=this._validateKeyword||this.compile(s,!0);if(n(t))return!0;if(e.errors=n.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(n.errors));return!1}}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o,s=" ",i=e.level,a=e.dataLevel,c=e.schema[t],l=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,h="data"+(a||""),p="valid"+i,f="errs__"+i,m=e.opts.$data&&c&&c.$data;m?(s+=" var schema"+i+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",o="schema"+i):o=c;var g,y,v,b,w,S="definition"+i,E=this.definition,_="";if(m&&E.$data){w="keywordValidate"+i;var P=E.validateSchema;s+=" var "+S+" = RULES.custom['"+t+"'].definition; var "+w+" = "+S+".validate;"}else{if(!(b=e.useCustomRule(this,c,e.schema,e)))return;o="validate.schema"+l,w=b.code,g=E.compile,y=E.inline,v=E.macro}var x=w+".errors",k="i"+i,C="ruleErr"+i,T=E.async;if(T&&!e.async)throw new Error("async keyword in sync schema");if(y||v||(s+=x+" = null;"),s+="var "+f+" = errors;var "+p+";",m&&E.$data&&(_+="}",s+=" if ("+o+" === undefined) { "+p+" = true; } else { ",P&&(_+="}",s+=" "+p+" = "+S+".validateSchema("+o+"); if ("+p+") { ")),y)E.statements?s+=" "+b.validate+" ":s+=" "+p+" = "+b.validate+"; ";else if(v){var A=e.util.copy(e);_="";A.level++;var O="valid"+A.level;A.schema=b.validate,A.schemaPath="";var R=e.compositeRule;e.compositeRule=A.compositeRule=!0;var D=e.validate(A).replace(/validate\.schema/g,w);e.compositeRule=A.compositeRule=R,s+=" "+D}else{(I=I||[]).push(s),s="",s+="  "+w+".call( ",e.opts.passContext?s+="this":s+="self",g||!1===E.schema?s+=" , "+h+" ":s+=" , "+o+" , "+h+" , validate.schema"+e.schemaPath+" ",s+=" , (dataPath || '')",'""'!=e.errorPath&&(s+=" + "+e.errorPath);var L=a?"data"+(a-1||""):"parentData",F=a?e.dataPathArr[a]:"parentDataProperty",j=s+=" , "+L+" , "+F+" , rootData )  ";s=I.pop(),!1===E.errors?(s+=" "+p+" = ",T&&(s+="await "),s+=j+"; "):s+=T?" var "+(x="customErrors"+i)+" = null; try { "+p+" = await "+j+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+x+" = e.errors; else throw e; } ":" "+x+" = null; "+p+" = "+j+"; "}if(E.modifying&&(s+=" if ("+L+") "+h+" = "+L+"["+F+"];"),s+=""+_,E.valid)d&&(s+=" if (true) { ");else{var I;s+=" if ( ",void 0===E.valid?(s+=" !",s+=v?""+O:""+p):s+=" "+!E.valid+" ",s+=") { ",n=this.keyword,(I=I||[]).push(s),s="",(I=I||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),s+=" } "):s+=" {} ";var M=s;s=I.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+M+"]); ":s+=" validate.errors = ["+M+"]; return false; ":s+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var N=s;s=I.pop(),y?E.errors?"full"!=E.errors&&(s+="  for (var "+k+"="+f+"; "+k+"<errors; "+k+"++) { var "+C+" = vErrors["+k+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+C+".schemaPath === undefined) { "+C+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(s+=" "+C+".schema = "+o+"; "+C+".data = "+h+"; "),s+=" } "):!1===E.errors?s+=" "+N+" ":(s+=" if ("+f+" == errors) { "+N+" } else {  for (var "+k+"="+f+"; "+k+"<errors; "+k+"++) { var "+C+" = vErrors["+k+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+C+".schemaPath === undefined) { "+C+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(s+=" "+C+".schema = "+o+"; "+C+".data = "+h+"; "),s+=" } } "):v?(s+="   var err =   ",!1!==e.createErrors?(s+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; ")):!1===E.errors?s+=" "+N+" ":(s+=" if (Array.isArray("+x+")) { if (vErrors === null) vErrors = "+x+"; else vErrors = vErrors.concat("+x+"); errors = vErrors.length;  for (var "+k+"="+f+"; "+k+"<errors; "+k+"++) { var "+C+" = vErrors["+k+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+e.errorPath+";  "+C+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(s+=" "+C+".schema = "+o+"; "+C+".data = "+h+"; "),s+=" } } else { "+N+" } "),s+=" } ",d&&(s+=" else { ")}return s}},function(e,t,r){"use strict";var n=r(70);e.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:n.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:n.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dsp-main","type":"object","allOf":[{"$ref":"#/definitions/dsp-header"},{"properties":{"settings":{"$ref":"#/definitions/dsp-settings"}}}],"required":["settings"],"definitions":{"dsp-header":{"type":"object","properties":{"dsp_spec_version":{"cont":"1.0"},"last_updated":{"type":"string","format":"date-time"},"last_updated_by":{"type":"string"},"import":{"type":"array","items":{"$ref":"#/definitions/imports"}}},"required":["dsp_spec_version","last_updated","last_updated_by"]},"language":{"type":"object","properties":{"label":{"type":"string"},"export_tokens":{"type":"boolean"},"snippet_id":{"type":"string"},"syntax":{"type":"string"}},"required":["label"]},"imports":{"type":"object","properties":{"src":{"type":"string"}},"required":["src"],"additionalProperties":false},"dsp-settings":{"type":"object","properties":{"name":{"type":"string"},"package_version":{"type":"string"},"build_status_label":{"type":"string"},"snippet_trigger_prefix":{"type":"string"},"build_tool":{"type":"string"},"build_tool_version":{"type":"string"},"build_params":{"type":"string"},"languages":{"type":"array","items":{"$ref":"#/definitions/language"}}},"required":["name","package_version","snippet_trigger_prefix","build_tool"]}}}')},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dsp-entity","definitions":{"base-entity":{"type":"object","properties":{"class":{"type":"string","enum":["token","collection","doc","component"]},"type":{"type":"string","enum":["color","font","size","custom","alias","page"]},"id":{"type":"string"},"name":{"type":"string"},"tags":{"type":"array","items":{"type":"string"}},"description":{"type":"string"},"last_updated":{"type":"string","format":"date-time"},"last_updated_by":{"type":"string"}},"required":["class","type","id","name","tags"]},"base-value-entity":{"type":"object","allOf":[{"$ref":"#/definitions/base-entity"},{"properties":{"value":{"type":"string"}}}]},"font-entity_token":{"type":"object","$comment":"Part of a font. Family, size, or weight.","properties":{"key":{"type":"string"},"id":{"type":"string"},"type":{"type":"string"},"value":{"type":"string"}},"required":["key","id","type","value"]},"font-entity":{"type":"object","allOf":[{"$ref":"#/definitions/base-value-entity"},{"properties":{"tokens":{"type":"array","items":{"$ref":"#/definitions/font-entity_token"}}}}]},"component-entity":{"type":"object","allOf":[{"$ref":"#/definitions/base-value-entity"},{"properties":{"related_entity_ids":{"type":"array","items":{"type":"string"}},"snippets":{"type":"object","properties":{"trigger":{"type":"string"},"languages":{"type":"object"}}}}}]}},"type":"object","oneOf":[{"$ref":"dsp-main#/definitions/dsp-header"}],"properties":{"settings":{"$ref":"dsp-main#/definitions/dsp-settings"},"entities":{"type":"array","minLength":0,"items":{"allOf":[{"if":{"properties":{"type":{"const":"font"}}},"then":{"$ref":"#/definitions/font-entity"}},{"if":{"properties":{"class":{"const":"component"},"type":{"const":"page"}}},"then":{"$ref":"#/definitions/component-entity"}},{"if":{"properties":{"type":{"enum":["size","custom","alias","color"]}}},"then":{"$ref":"#/definitions/base-value-entity"}},{"if":{"properties":{"class":{"const":"doc"},"type":{"const":"page"}}},"then":{"$ref":"#/definitions/base-entity"}}]}}},"required":["entities"]}')},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(17),o=new Set([413,429,503]),s=e=>e instanceof n.HTTPError||e instanceof n.ParseError||e instanceof n.MaxRedirectsError;t.default=({attemptCount:e,retryOptions:t,error:r})=>{if(e>t.limit)return 0;const n=t.methods.includes(r.options.method),i=t.errorCodes.includes(r.code),a=s(r)&&t.statusCodes.includes(r.response.statusCode);if(!n||!i&&!a)return 0;if(s(r)){const{response:e}=r;if(e&&"retry-after"in e.headers&&o.has(e.statusCode)){let r=Number(e.headers["retry-after"]);return Number.isNaN(r)?r=Date.parse(e.headers["retry-after"])-Date.now():r*=1e3,void 0===t.maxRetryAfter||r>t.maxRetryAfter?0:r}if(413===e.statusCode)return 0}return 2**(e-1)*1e3+100*Math.random()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(204),o=Number(process.versions.node.split(".")[0]),s=e=>{const t={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};e.timings=t;const r=e=>{const r=e.emit.bind(e);e.emit=(n,...o)=>("error"===n&&(t.error=Date.now(),t.phases.total=t.error-t.start,e.emit=r),r(n,...o))};r(e),e.prependOnceListener("abort",()=>{t.abort=Date.now(),(!t.response||o>=13)&&(t.phases.total=Date.now()-t.start)});const s=e=>{t.socket=Date.now(),t.phases.wait=t.socket-t.start;const r=()=>{t.lookup=Date.now(),t.phases.dns=t.lookup-t.socket};e.prependOnceListener("lookup",r),n.default(e,{connect:()=>{t.connect=Date.now(),void 0===t.lookup&&(e.removeListener("lookup",r),t.lookup=t.connect,t.phases.dns=t.lookup-t.socket),t.phases.tcp=t.connect-t.lookup},secureConnect:()=>{t.secureConnect=Date.now(),t.phases.tls=t.secureConnect-t.connect}})};e.socket?s(e.socket):e.prependOnceListener("socket",s);const i=()=>{var e;t.upload=Date.now(),t.phases.request=t.upload-(null!=(e=t.secureConnect)?e:t.connect)};return("boolean"==typeof e.writableFinished?!e.writableFinished:!e.finished||0!==e.outputSize||e.socket&&0!==e.socket.writableLength)?e.prependOnceListener("finish",i):i(),e.prependOnceListener("response",e=>{t.response=Date.now(),t.phases.firstByte=t.response-t.upload,e.timings=t,r(e),e.prependOnceListener("end",()=>{t.end=Date.now(),t.phases.download=t.end-t.response,t.phases.total=t.end-t.start})}),t};t.default=s,e.exports=s,e.exports.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(44),o=(e,t)=>{let r;if("function"==typeof t){r={connect:t}}else r=t;const o="function"==typeof r.connect,s="function"==typeof r.secureConnect,i="function"==typeof r.close,a=()=>{o&&r.connect(),e instanceof n.TLSSocket&&s&&(e.authorized?r.secureConnect():e.authorizationError||e.once("secureConnect",r.secureConnect)),i&&e.once("close",r.close)};e.writable&&!e.connecting?a():e.connecting?e.once("connect",a):e.destroyed&&i&&r.close(e._hadError)};t.default=o,e.exports=o,e.exports.default=o},function(e,t,r){"use strict";const{V4MAPPED:n,ADDRCONFIG:o,ALL:s,promises:{Resolver:i},lookup:a}=r(206),{promisify:c}=r(6),l=r(31),u=Symbol("cacheableLookupCreateConnection"),d=Symbol("cacheableLookupInstance"),h=Symbol("expires"),p="number"==typeof s,f=e=>{if(!e||"function"!=typeof e.createConnection)throw new Error("Expected an Agent instance as the first argument")},m=()=>{let e=!1,t=!1;for(const r of Object.values(l.networkInterfaces()))for(const n of r)if(!n.internal&&("IPv6"===n.family?t=!0:e=!0,e&&t))return{has4:e,has6:t};return{has4:e,has6:t}},g={ttl:!0},y={all:!0};class v{constructor({cache:e=new Map,maxTtl:t=1/0,fallbackDuration:r=3600,errorTtl:n=.15,resolver:o=new i,lookup:s=a}={}){if(this.maxTtl=t,this.errorTtl=n,this._cache=e,this._resolver=o,this._dnsLookup=c(s),this._resolver instanceof i?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=c(this._resolver.resolve4.bind(this._resolver)),this._resolve6=c(this._resolver.resolve6.bind(this._resolver))),this._iface=m(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,r<1)this._fallback=!1;else{this._fallback=!0;const e=setInterval(()=>{this._hostnamesToFallback.clear()},1e3*r);e.unref&&e.unref()}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,t,r){if("function"==typeof t?(r=t,t={}):"number"==typeof t&&(t={family:t}),!r)throw new Error("Callback must be a function.");this.lookupAsync(e,t).then(e=>{t.all?r(null,e):r(null,e.address,e.family,e.expires,e.ttl)},r)}async lookupAsync(e,t={}){"number"==typeof t&&(t={family:t});let r=await this.query(e);if(6===t.family){const e=r.filter(e=>6===e.family);t.hints&n&&(p&&t.hints&s||0===e.length)?(e=>{for(const t of e)6!==t.family&&(t.address="::ffff:"+t.address,t.family=6)})(r):r=e}else 4===t.family&&(r=r.filter(e=>4===e.family));if(t.hints&o){const{_iface:e}=this;r=r.filter(t=>6===t.family?e.has6:e.has4)}if(0===r.length){const t=new Error("cacheableLookup ENOTFOUND "+e);throw t.code="ENOTFOUND",t.hostname=e,t}return t.all?r:r[0]}async query(e){let t=await this._cache.get(e);if(!t){const r=this._pending[e];if(r)t=await r;else{const r=this.queryAndCache(e);this._pending[e]=r,t=await r}}return t=t.map(e=>({...e})),t}async _resolve(e){const[t,r]=await Promise.all([this._resolve4(e,g),this._resolve6(e,g)].map(e=>(async e=>{try{return await e}catch(e){if("ENODATA"===e.code||"ENOTFOUND"===e.code)return[];throw e}})(e)));let n=0,o=0,s=0;const i=Date.now();for(const e of t)e.family=4,e.expires=i+1e3*e.ttl,n=Math.max(n,e.ttl);for(const e of r)e.family=6,e.expires=i+1e3*e.ttl,o=Math.max(o,e.ttl);return s=t.length>0?r.length>0?Math.min(n,o):n:o,{entries:[...t,...r],cacheTtl:s}}async _lookup(e){try{return{entries:await this._dnsLookup(e,{all:!0}),cacheTtl:0}}catch(e){return{entries:[],cacheTtl:0}}}async _set(e,t,r){if(this.maxTtl>0&&r>0){r=1e3*Math.min(r,this.maxTtl),t[h]=Date.now()+r;try{await this._cache.set(e,t,r)}catch(e){this.lookupAsync=async()=>{const t=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw t.cause=e,t}}n=this._cache,Symbol.iterator in n&&this._tick(r)}var n}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,y);try{let t=await this._resolve(e);0===t.entries.length&&this._fallback&&(t=await this._lookup(e),0!==t.entries.length&&this._hostnamesToFallback.add(e));const r=0===t.entries.length?this.errorTtl:t.cacheTtl;return await this._set(e,t.entries,r),delete this._pending[e],t.entries}catch(t){throw delete this._pending[e],t}}_tick(e){const t=this._nextRemovalTime;(!t||e<t)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let e=1/0;const t=Date.now();for(const[r,n]of this._cache){const o=n[h];t>=o?this._cache.delete(r):o<e&&(e=o)}e!==1/0&&this._tick(e-t)},e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(f(e),u in e)throw new Error("CacheableLookup has been already installed");e[u]=e.createConnection,e[d]=this,e.createConnection=(t,r)=>("lookup"in t||(t.lookup=this.lookup),e[u](t,r))}uninstall(e){if(f(e),e[u]){if(e[d]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[u],delete e[u],delete e[d]}}updateInterfaceInfo(){const{_iface:e}=this;this._iface=m(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){e?this._cache.delete(e):this._cache.clear()}}e.exports=v,e.exports.default=v},function(e,t){e.exports=require("dns")},function(e,t,r){"use strict";const n=r(28),o=r(16),s=r(208),i=r(209),a=r(214),c=r(215),l=r(45),u=r(216),d=r(218);class h{constructor(e,t){if("function"!=typeof e)throw new TypeError("Parameter `request` must be a function");return this.cache=new d({uri:"string"==typeof t&&t,store:"string"!=typeof t&&t,namespace:"cacheable-request"}),this.createCacheableRequest(e)}createCacheableRequest(e){return(t,r)=>{let d;if("string"==typeof t)d=f(o.parse(t)),t={};else if(t instanceof o.URL)d=f(o.parse(t.toString())),t={};else{const[e,...r]=(t.path||"").split("?"),n=r.length>0?"?"+r.join("?"):"";d=f({...t,pathname:e,search:n})}(t={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...t,...p(d)}).headers=l(t.headers);const m=new n,g=s(o.format(d),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),y=`${t.method}:${g}`;let v=!1,b=!1;const w=t=>{b=!0;let n,o=!1;const s=new Promise(e=>{n=()=>{o||(o=!0,e())}}),l=e=>{if(v&&!t.forceRefresh){e.status=e.statusCode;const r=a.fromObject(v.cachePolicy).revalidatedPolicy(t,e);if(!r.modified){const t=r.policy.responseHeaders();(e=new c(v.statusCode,t,v.body,v.url)).cachePolicy=r.policy,e.fromCache=!0}}let n;e.fromCache||(e.cachePolicy=new a(t,e,t),e.fromCache=!1),t.cache&&e.cachePolicy.storable()?(n=u(e),(async()=>{try{const r=i.buffer(e);if(await Promise.race([s,new Promise(t=>e.once("end",t))]),o)return;const n=await r,a={cachePolicy:e.cachePolicy.toObject(),url:e.url,statusCode:e.fromCache?v.statusCode:e.statusCode,body:n};let c=t.strictTtl?e.cachePolicy.timeToLive():void 0;t.maxTtl&&(c=c?Math.min(c,t.maxTtl):t.maxTtl),await this.cache.set(y,a,c)}catch(e){m.emit("error",new h.CacheError(e))}})()):t.cache&&v&&(async()=>{try{await this.cache.delete(y)}catch(e){m.emit("error",new h.CacheError(e))}})(),m.emit("response",n||e),"function"==typeof r&&r(n||e)};try{const r=e(t,l);r.once("error",n),r.once("abort",n),m.emit("request",r)}catch(e){m.emit("error",new h.RequestError(e))}};return(async()=>{const e=async e=>{await Promise.resolve();const t=e.cache?await this.cache.get(y):void 0;if(void 0===t)return w(e);const n=a.fromObject(t.cachePolicy);if(n.satisfiesWithoutRevalidation(e)&&!e.forceRefresh){const e=n.responseHeaders(),o=new c(t.statusCode,e,t.body,t.url);o.cachePolicy=n,o.fromCache=!0,m.emit("response",o),"function"==typeof r&&r(o)}else v=t,e.headers=n.revalidationHeaders(e),w(e)},n=e=>m.emit("error",new h.CacheError(e));this.cache.once("error",n),m.on("response",()=>this.cache.removeListener("error",n));try{await e(t)}catch(e){t.automaticFailover&&!b&&w(t),m.emit("error",new h.CacheError(e))}})(),m}}}function p(e){const t={...e};return t.path=`${e.pathname||"/"}${e.search||""}`,delete t.pathname,delete t.search,t}function f(e){return{protocol:e.protocol,auth:e.auth,hostname:e.hostname||e.host||"localhost",port:e.port,pathname:e.pathname,search:e.search}}h.RequestError=class extends Error{constructor(e){super(e.message),this.name="RequestError",Object.assign(this,e)}},h.CacheError=class extends Error{constructor(e){super(e.message),this.name="CacheError",Object.assign(this,e)}},e.exports=h},function(e,t,r){"use strict";const n="undefined"==typeof URL?r(16).URL:URL,o=(e,t)=>t.some(t=>t instanceof RegExp?t.test(e):t===e),s=(e,t)=>{if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},Reflect.has(t,"normalizeHttps"))throw new Error("options.normalizeHttps is renamed to options.forceHttp");if(Reflect.has(t,"normalizeHttp"))throw new Error("options.normalizeHttp is renamed to options.forceHttps");if(Reflect.has(t,"stripFragment"))throw new Error("options.stripFragment is renamed to options.stripHash");if(e=e.trim(),/^data:/i.test(e))return((e,{stripHash:t})=>{const r=e.match(/^data:(.*?),(.*?)(?:#(.*))?$/);if(!r)throw new Error("Invalid URL: "+e);const n=r[1].split(";"),o=r[2],s=t?"":r[3];let i=!1;"base64"===n[n.length-1]&&(n.pop(),i=!0);const a=(n.shift()||"").toLowerCase(),c=[...n.map(e=>{let[t,r=""]=e.split("=").map(e=>e.trim());return"charset"===t&&(r=r.toLowerCase(),"us-ascii"===r)?"":`${t}${r?"="+r:""}`}).filter(Boolean)];return i&&c.push("base64"),(0!==c.length||a&&"text/plain"!==a)&&c.unshift(a),`data:${c.join(";")},${i?o.trim():o}${s?"#"+s:""}`})(e,t);const r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));const s=new n(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&"https:"===s.protocol&&(s.protocol="http:"),t.forceHttps&&"http:"===s.protocol&&(s.protocol="https:"),t.stripAuthentication&&(s.username="",s.password=""),t.stripHash&&(s.hash=""),s.pathname&&(s.pathname=s.pathname.replace(/((?!:).|^)\/{2,}/g,(e,t)=>/^(?!\/)/g.test(t)?t+"/":"/")),s.pathname&&(s.pathname=decodeURI(s.pathname)),!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=s.pathname.split("/");const r=e[e.length-1];o(r,t.removeDirectoryIndex)&&(e=e.slice(0,e.length-1),s.pathname=e.slice(1).join("/")+"/")}if(s.hostname&&(s.hostname=s.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.([a-z\-\d]{2,63})\.([a-z.]{2,5})$/.test(s.hostname)&&(s.hostname=s.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(const e of[...s.searchParams.keys()])o(e,t.removeQueryParameters)&&s.searchParams.delete(e);return t.sortQueryParameters&&s.searchParams.sort(),t.removeTrailingSlash&&(s.pathname=s.pathname.replace(/\/$/,"")),e=s.toString(),!t.removeTrailingSlash&&"/"!==s.pathname||""!==s.hash||(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e};e.exports=s,e.exports.default=s},function(e,t,r){"use strict";const n=r(210),o=r(213);class s extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function i(e,t){if(!e)return Promise.reject(new Error("Expected a stream"));t={maxBuffer:1/0,...t};const{maxBuffer:r}=t;let i;return await new Promise((a,c)=>{const l=e=>{e&&(e.bufferedData=i.getBufferedValue()),c(e)};i=n(e,o(t),e=>{e?l(e):a()}),i.on("data",()=>{i.getBufferedLength()>r&&l(new s)})}),i.getBufferedValue()}e.exports=i,e.exports.default=i,e.exports.buffer=(e,t)=>i(e,{...t,encoding:"buffer"}),e.exports.array=(e,t)=>i(e,{...t,array:!0}),e.exports.MaxBufferError=s},function(e,t,r){var n=r(74),o=r(212),s=r(3),i=function(){},a=/^v?\.0/.test(process.version),c=function(e){return"function"==typeof e},l=function(e,t,r,l){l=n(l);var u=!1;e.on("close",(function(){u=!0})),o(e,{readable:t,writable:r},(function(e){if(e)return l(e);u=!0,l()}));var d=!1;return function(t){if(!u&&!d)return d=!0,function(e){return!!a&&(!!s&&((e instanceof(s.ReadStream||i)||e instanceof(s.WriteStream||i))&&c(e.close)))}(e)?e.close(i):function(e){return e.setHeader&&c(e.abort)}(e)?e.abort():c(e.destroy)?e.destroy():void l(t||new Error("stream was destroyed"))}},u=function(e){e()},d=function(e,t){return e.pipe(t)};e.exports=function(){var e,t=Array.prototype.slice.call(arguments),r=c(t[t.length-1]||i)&&t.pop()||i;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var n=t.map((function(o,s){var i=s<t.length-1;return l(o,i,s>0,(function(t){e||(e=t),t&&n.forEach(u),i||(n.forEach(u),r(e))}))}));return t.reduce(d)}},function(e,t){e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),o=e[e.length-1];return"function"==typeof n&&n!==o&&Object.keys(o).forEach((function(e){n[e]=o[e]})),n}}},function(e,t,r){var n=r(74),o=function(){},s=function(e,t,r){if("function"==typeof t)return s(e,null,t);t||(t={}),r=n(r||o);var i=e._writableState,a=e._readableState,c=t.readable||!1!==t.readable&&e.readable,l=t.writable||!1!==t.writable&&e.writable,u=!1,d=function(){e.writable||h()},h=function(){l=!1,c||r.call(e)},p=function(){c=!1,l||r.call(e)},f=function(t){r.call(e,t?new Error("exited with error code: "+t):null)},m=function(t){r.call(e,t)},g=function(){process.nextTick(y)},y=function(){if(!u)return(!c||a&&a.ended&&!a.destroyed)&&(!l||i&&i.ended&&!i.destroyed)?void 0:r.call(e,new Error("premature close"))},v=function(){e.req.on("finish",h)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?l&&!i&&(e.on("end",d),e.on("close",d)):(e.on("complete",h),e.on("abort",g),e.req?v():e.on("request",v)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",f),e.on("end",p),e.on("finish",h),!1!==t.error&&e.on("error",m),e.on("close",g),function(){u=!0,e.removeListener("complete",h),e.removeListener("abort",g),e.removeListener("request",v),e.req&&e.req.removeListener("finish",h),e.removeListener("end",d),e.removeListener("close",d),e.removeListener("finish",h),e.removeListener("exit",f),e.removeListener("end",p),e.removeListener("error",m),e.removeListener("close",g)}};e.exports=s},function(e,t,r){"use strict";const{PassThrough:n}=r(10);e.exports=e=>{e={...e};const{array:t}=e;let{encoding:r}=e;const o="buffer"===r;let s=!1;t?s=!(r||o):r=r||"utf8",o&&(r=null);const i=new n({objectMode:s});r&&i.setEncoding(r);let a=0;const c=[];return i.on("data",e=>{c.push(e),s?a=c.length:a+=e.length}),i.getBufferedValue=()=>t?c:o?Buffer.concat(c,a):c.join(""),i.getBufferedLength=()=>a,i}},function(e,t,r){"use strict";const n=new Set([200,203,204,206,300,301,404,405,410,414,501]),o=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),s=new Set([500,502,503,504]),i={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},a={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function c(e){const t=parseInt(e,10);return isFinite(t)?t:0}function l(e){const t={};if(!e)return t;const r=e.trim().split(/\s*,\s*/);for(const e of r){const[r,n]=e.split(/\s*=\s*/,2);t[r]=void 0===n||n.replace(/^"|"$/g,"")}return t}function u(e){let t=[];for(const r in e){const n=e[r];t.push(!0===n?r:r+"="+n)}if(t.length)return t.join(", ")}e.exports=class{constructor(e,t,{shared:r,cacheHeuristic:n,immutableMinTimeToLive:o,ignoreCargoCult:s,_fromObject:i}={}){if(i)this._fromObject(i);else{if(!t||!t.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=!1!==r,this._cacheHeuristic=void 0!==n?n:.1,this._immutableMinTtl=void 0!==o?o:864e5,this._status="status"in t?t.status:200,this._resHeaders=t.headers,this._rescc=l(t.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=t.headers.vary?e.headers:null,this._reqcc=l(e.headers["cache-control"]),s&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":u(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),null==t.headers["cache-control"]&&/no-cache/.test(t.headers.pragma)&&(this._rescc["no-cache"]=!0)}}now(){return Date.now()}storable(){return!(this._reqcc["no-store"]||!("GET"===this._method||"HEAD"===this._method||"POST"===this._method&&this._hasExplicitExpiration())||!o.has(this._status)||this._rescc["no-store"]||this._isShared&&this._rescc.private||this._isShared&&!this._noAuthorization&&!this._allowsStoringAuthenticated()||!(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||n.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);const t=l(e.headers["cache-control"]);if(t["no-cache"]||/no-cache/.test(e.headers.pragma))return!1;if(t["max-age"]&&this.age()>t["max-age"])return!1;if(t["min-fresh"]&&this.timeToLive()<1e3*t["min-fresh"])return!1;if(this.stale()){if(!(t["max-stale"]&&!this._rescc["must-revalidate"]&&(!0===t["max-stale"]||t["max-stale"]>this.age()-this.maxAge())))return!1}return this._requestMatches(e,!1)}_requestMatches(e,t){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||t&&"HEAD"===e.method)&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if("*"===this._resHeaders.vary)return!1;const t=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(const r of t)if(e.headers[r]!==this._reqHeaders[r])return!1;return!0}_copyWithoutHopByHopHeaders(e){const t={};for(const r in e)i[r]||(t[r]=e[r]);if(e.connection){const r=e.connection.trim().split(/\s*,\s*/);for(const e of r)delete t[e]}if(t.warning){const e=t.warning.split(/,/).filter(e=>!/^\s*1[0-9][0-9]/.test(e));e.length?t.warning=e.join(",").trim():delete t.warning}return t}responseHeaders(){const e=this._copyWithoutHopByHopHeaders(this._resHeaders),t=this.age();return t>86400&&!this._hasExplicitExpiration()&&this.maxAge()>86400&&(e.warning=(e.warning?e.warning+", ":"")+'113 - "rfc7234 5.5.4"'),e.age=""+Math.round(t),e.date=new Date(this.now()).toUTCString(),e}date(){const e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){return this._ageValue()+(this.now()-this._responseTime)/1e3}_ageValue(){return c(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"])return 0;if(this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable)return 0;if("*"===this._resHeaders.vary)return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return c(this._rescc["s-maxage"])}if(this._rescc["max-age"])return c(this._rescc["max-age"]);const e=this._rescc.immutable?this._immutableMinTtl:0,t=this.date();if(this._resHeaders.expires){const r=Date.parse(this._resHeaders.expires);return Number.isNaN(r)||r<t?0:Math.max(e,(r-t)/1e3)}if(this._resHeaders["last-modified"]){const r=Date.parse(this._resHeaders["last-modified"]);if(isFinite(r)&&t>r)return Math.max(e,(t-r)/1e3*this._cacheHeuristic)}return e}timeToLive(){const e=this.maxAge()-this.age(),t=e+c(this._rescc["stale-if-error"]),r=e+c(this._rescc["stale-while-revalidate"]);return 1e3*Math.max(0,e,t,r)}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+c(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+c(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||1!==e.v)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=void 0!==e.imm?e.imm:864e5,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);const t=this._copyWithoutHopByHopHeaders(e.headers);if(delete t["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete t["if-none-match"],delete t["if-modified-since"],t;this._resHeaders.etag&&(t["if-none-match"]=t["if-none-match"]?`${t["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag);if(t["accept-ranges"]||t["if-match"]||t["if-unmodified-since"]||this._method&&"GET"!=this._method){if(delete t["if-modified-since"],t["if-none-match"]){const e=t["if-none-match"].split(/,/).filter(e=>!/^\s*W\//.test(e));e.length?t["if-none-match"]=e.join(",").trim():delete t["if-none-match"]}}else this._resHeaders["last-modified"]&&!t["if-modified-since"]&&(t["if-modified-since"]=this._resHeaders["last-modified"]);return t}revalidatedPolicy(e,t){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&function(e){return!e||s.has(e.status)}(t))return{modified:!1,matches:!1,policy:this};if(!t||!t.headers)throw Error("Response headers missing");let r=!1;if(void 0!==t.status&&304!=t.status?r=!1:t.headers.etag&&!/^\s*W\//.test(t.headers.etag)?r=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag:this._resHeaders.etag&&t.headers.etag?r=this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?r=this._resHeaders["last-modified"]===t.headers["last-modified"]:this._resHeaders.etag||this._resHeaders["last-modified"]||t.headers.etag||t.headers["last-modified"]||(r=!0),!r)return{policy:new this.constructor(e,t),modified:304!=t.status,matches:!1};const n={};for(const e in this._resHeaders)n[e]=e in t.headers&&!a[e]?t.headers[e]:this._resHeaders[e];const o=Object.assign({},t,{status:this._status,method:this._method,headers:n});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}},function(e,t,r){"use strict";const n=r(10).Readable,o=r(45);e.exports=class extends n{constructor(e,t,r,n){if("number"!=typeof e)throw new TypeError("Argument `statusCode` should be a number");if("object"!=typeof t)throw new TypeError("Argument `headers` should be an object");if(!(r instanceof Buffer))throw new TypeError("Argument `body` should be a buffer");if("string"!=typeof n)throw new TypeError("Argument `url` should be a string");super(),this.statusCode=e,this.headers=o(t),this.body=r,this.url=n}_read(){this.push(this.body),this.push(null)}}},function(e,t,r){"use strict";const n=r(10).PassThrough,o=r(217);e.exports=e=>{if(!e||!e.pipe)throw new TypeError("Parameter `response` must be a response stream.");const t=new n;return o(e,t),e.pipe(t)}},function(e,t,r){"use strict";const n=["destroy","setTimeout","socket","headers","trailers","rawHeaders","statusCode","httpVersion","httpVersionMinor","httpVersionMajor","rawTrailers","statusMessage"];e.exports=(e,t)=>{const r=new Set(Object.keys(e).concat(n));for(const n of r)n in t||(t[n]="function"==typeof e[n]?e[n].bind(e):e[n])}},function(e,t,r){"use strict";const n=r(28),o=r(219);e.exports=class extends n{constructor(e,t){if(super(),this.opts=Object.assign({namespace:"keyv",serialize:o.stringify,deserialize:o.parse},"string"==typeof e?{uri:e}:e,t),!this.opts.store){const e=Object.assign({},this.opts);this.opts.store=(e=>{const t={redis:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql"};if(e.adapter||e.uri){const n=e.adapter||/^[^:]*/.exec(e.uri)[0];return new(r(220)(t[n]))(e)}return new Map})(e)}"function"==typeof this.opts.store.on&&this.opts.store.on("error",e=>this.emit("error",e)),this.opts.store.namespace=this.opts.namespace}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}get(e,t){const r=this._getKeyPrefix(e),{store:n}=this.opts;return Promise.resolve().then(()=>n.get(r)).then(e=>"string"==typeof e?this.opts.deserialize(e):e).then(r=>{if(void 0!==r){if(!("number"==typeof r.expires&&Date.now()>r.expires))return t&&t.raw?r:r.value;this.delete(e)}})}set(e,t,r){const n=this._getKeyPrefix(e);void 0===r&&(r=this.opts.ttl),0===r&&(r=void 0);const{store:o}=this.opts;return Promise.resolve().then(()=>{const e="number"==typeof r?Date.now()+r:null;return t={value:t,expires:e},this.opts.serialize(t)}).then(e=>o.set(n,e,r)).then(()=>!0)}delete(e){const t=this._getKeyPrefix(e),{store:r}=this.opts;return Promise.resolve().then(()=>r.delete(t))}clear(){const{store:e}=this.opts;return Promise.resolve().then(()=>e.clear())}}},function(e,t){t.stringify=function e(t){if(void 0===t)return t;if(t&&Buffer.isBuffer(t))return JSON.stringify(":base64:"+t.toString("base64"));if(t&&t.toJSON&&(t=t.toJSON()),t&&"object"==typeof t){var r="",n=Array.isArray(t);r=n?"[":"{";var o=!0;for(var s in t){var i="function"==typeof t[s]||!n&&void 0===t[s];Object.hasOwnProperty.call(t,s)&&!i&&(o||(r+=","),o=!1,n?null==t[s]?r+="null":r+=e(t[s]):void 0!==t[s]&&(r+=e(s)+":"+e(t[s])))}return r+=n?"]":"}"}return"string"==typeof t?JSON.stringify(/^:/.test(t)?":"+t:t):void 0===t?"null":JSON.stringify(t)},t.parse=function(e){return JSON.parse(e,(function(e,t){return"string"==typeof t?/^:base64:/.test(t)?Buffer.from(t.substring(8),"base64"):/^:/.test(t)?t.substring(1):t:t}))}},function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=220},function(e,t,r){"use strict";const{Transform:n,PassThrough:o}=r(10),s=r(222),i=r(223);e.exports=e=>{const t=(e.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(t))return e;const r="br"===t;if(r&&"function"!=typeof s.createBrotliDecompress)return e.destroy(new Error("Brotli is not supported on Node.js < 12")),e;let a=!0;const c=new n({transform(e,t,r){a=!1,r(null,e)},flush(e){e()}}),l=new o({autoDestroy:!1,destroy(t,r){e.destroy(),r(t)}}),u=r?s.createBrotliDecompress():s.createUnzip();return u.once("error",t=>{!a||e.readable?l.destroy(t):l.end()}),i(e,l),e.pipe(c).pipe(u).pipe(l),l}},function(e,t){e.exports=require("zlib")},function(e,t,r){"use strict";const n=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];e.exports=(e,t)=>{if(t._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");const r=new Set(Object.keys(e).concat(n)),o={};for(const n of r)n in t||(o[n]={get(){const t=e[n];return"function"==typeof t?t.bind(e):t},set(t){e[n]=t},enumerable:!0,configurable:!1});return Object.defineProperties(t,o),e.once("aborted",()=>{t.destroy(),t.emit("aborted")}),e.once("close",()=>{e.complete&&t.readable?t.once("end",()=>{t.emit("close")}):t.emit("close")}),t}},function(e,t,r){"use strict";const n=r(46),o=r(75),s=r(77),i=r(78),a=r(228);e.exports={...n,ClientRequest:s,IncomingMessage:i,...o,request:(e,t,r)=>new s(e,t,r),get:(e,t,r)=>{const n=new s(e,t,r);return n.end(),n},auto:a}},function(e,t,r){"use strict";e.exports=(e,t,r)=>{for(const n of r)e.on(n,(...e)=>t.emit(n,...e))}},function(e,t,r){"use strict";e.exports=e=>{switch(e){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}},function(e,t,r){"use strict";const n=(t,r,n)=>{e.exports[r]=class extends t{constructor(...e){super("string"==typeof n?n:n(e)),this.name=`${super.name} [${r}]`,this.code=r}}};n(TypeError,"ERR_INVALID_ARG_TYPE",e=>{const t=e[0].includes(".")?"property":"argument";let r=e[1];const n=Array.isArray(r);return n&&(r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`),`The "${e[0]}" ${t} must be ${n?"one of":"of"} type ${r}. Received ${typeof e[2]}`}),n(TypeError,"ERR_INVALID_PROTOCOL",e=>`Protocol "${e[0]}" not supported. Expected "${e[1]}"`),n(Error,"ERR_HTTP_HEADERS_SENT",e=>`Cannot ${e[0]} headers after they are sent to the client`),n(TypeError,"ERR_INVALID_HTTP_TOKEN",e=>`${e[0]} must be a valid HTTP token [${e[1]}]`),n(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",e=>`Invalid value "${e[0]} for header "${e[1]}"`),n(TypeError,"ERR_INVALID_CHAR",e=>`Invalid character in ${e[0]} [${e[1]}]`)},function(e,t,r){"use strict";const n=r(43),o=r(73),s=r(229),i=r(76),a=r(77),c=r(230),l=r(79),u=new i({maxSize:100}),d=new Map,h=(e,t,r)=>{t._httpMessage={shouldKeepAlive:!0};const n=()=>{e.emit("free",t,r)};t.on("free",n);const o=()=>{e.removeSocket(t,r)};t.on("close",o);const s=()=>{e.removeSocket(t,r),t.off("close",o),t.off("free",n),t.off("agentRemove",s)};t.on("agentRemove",s),e.emit("free",t,r)};e.exports=async(e,t,r)=>{if(("string"==typeof e||e instanceof URL)&&(e=l(new URL(e))),"function"==typeof t&&(r=t,t=void 0),t={ALPNProtocols:["h2","http/1.1"],...e,...t,resolveSocket:!0},!Array.isArray(t.ALPNProtocols)||0===t.ALPNProtocols.length)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");t.protocol=t.protocol||"https:";const i="https:"===t.protocol;t.host=t.hostname||t.host||"localhost",t.session=t.tlsSession,t.servername=t.servername||c(t),t.port=t.port||(i?443:80),t._defaultAgent=i?o.globalAgent:n.globalAgent;const p=t.agent;if(p){if(p.addRequest)throw new Error("The `options.agent` object can contain only `http`, `https` or `http2` properties");t.agent=p[i?"https":"http"]}if(i){if("h2"===await(async e=>{const t=`${e.host}:${e.port}:${e.ALPNProtocols.sort()}`;if(!u.has(t)){if(d.has(t)){return(await d.get(t)).alpnProtocol}const{path:r,agent:n}=e;e.path=e.socketPath;const i=s(e);d.set(t,i);try{const{socket:s,alpnProtocol:a}=await i;if(u.set(t,a),e.path=r,"h2"===a)s.destroy();else{const{globalAgent:t}=o,r=o.Agent.prototype.createConnection;n?n.createConnection===r?h(n,s,e):s.destroy():t.createConnection===r?h(t,s,e):s.destroy()}return d.delete(t),a}catch(e){throw d.delete(t),e}}return u.get(t)})(t))return p&&(t.agent=p.http2),new a(t,r)}return n.request(t,r)},e.exports.protocolCache=u},function(e,t,r){"use strict";const n=r(44);e.exports=(e={})=>new Promise((t,r)=>{const o=n.connect(e,()=>{e.resolveSocket?(o.off("error",r),t({alpnProtocol:o.alpnProtocol,socket:o})):(o.destroy(),t({alpnProtocol:o.alpnProtocol}))});o.on("error",r)})},function(e,t,r){"use strict";const n=r(80);e.exports=e=>{let t=e.host;const r=e.headers&&e.headers.host;if(r)if(r.startsWith("[")){t=-1===r.indexOf("]")?r:r.slice(1,-1)}else t=r.split(":",1)[0];return n.isIP(t)?"":t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3),o=r(6),s=r(12),i=r(81),a=o.promisify(n.stat);t.default=async(e,t)=>{if(t&&"content-length"in t)return Number(t["content-length"]);if(!e)return 0;if(s.default.string(e))return Buffer.byteLength(e);if(s.default.buffer(e))return e.length;if(i.default(e))return o.promisify(e.getLength.bind(e))();if(e instanceof n.ReadStream){const{size:t}=await a(e.path);return t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeoutError=void 0;const n=r(80),o=r(233),s=Symbol("reentry"),i=()=>{};class a extends Error{constructor(e,t){super(`Timeout awaiting '${t}' for ${e}ms`),this.event=t,this.name="TimeoutError",this.code="ETIMEDOUT"}}t.TimeoutError=a,t.default=(e,t,r)=>{if(s in e)return i;e[s]=!0;const c=[],{once:l,unhandleAll:u}=o.default(),d=(e,t,r)=>{var n;const o=setTimeout(t,e,e,r);null===(n=o.unref)||void 0===n||n.call(o);const s=()=>{clearTimeout(o)};return c.push(s),s},{host:h,hostname:p}=r,f=(t,r)=>{e.destroy(new a(t,r))},m=()=>{for(const e of c)e();u()};if(e.once("error",t=>{if(m(),0===e.listenerCount("error"))throw t}),e.once("close",m),l(e,"response",e=>{l(e,"end",m)}),void 0!==t.request&&d(t.request,f,"request"),void 0!==t.socket){const r=()=>{f(t.socket,"socket")};e.setTimeout(t.socket,r),c.push(()=>{e.removeListener("timeout",r)})}return l(e,"socket",o=>{var s;const{socketPath:i}=e;if(o.connecting){const e=Boolean(null!=i?i:0!==n.isIP(null!==(s=null!=p?p:h)&&void 0!==s?s:""));if(void 0!==t.lookup&&!e&&void 0===o.address().address){const e=d(t.lookup,f,"lookup");l(o,"lookup",e)}if(void 0!==t.connect){const r=()=>d(t.connect,f,"connect");e?l(o,"connect",r()):l(o,"lookup",e=>{null===e&&l(o,"connect",r())})}void 0!==t.secureConnect&&"https:"===r.protocol&&l(o,"connect",()=>{const e=d(t.secureConnect,f,"secureConnect");l(o,"secureConnect",e)})}if(void 0!==t.send){const r=()=>d(t.send,f,"send");o.connecting?l(o,"connect",()=>{l(e,"upload-complete",r())}):l(e,"upload-complete",r())}}),void 0!==t.response&&l(e,"upload-complete",()=>{const r=d(t.response,f,"response");l(e,"response",r)}),m}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=()=>{const e=[];return{once(t,r,n){t.once(r,n),e.push({origin:t,event:r,fn:n})},unhandleAll(){for(const t of e){const{origin:e,event:r,fn:n}=t;e.removeListener(r,n)}e.length=0}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(12);t.default=e=>{const t={protocol:(e=e).protocol,hostname:n.default.string(e.hostname)&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return n.default.string(e.port)&&0!==e.port.length&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username||""}:${e.password||""}`),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(16),o=["protocol","host","hostname","port","pathname","search"];t.default=(e,t)=>{var r,s;if(t.path){if(t.pathname)throw new TypeError("Parameters `path` and `pathname` are mutually exclusive.");if(t.search)throw new TypeError("Parameters `path` and `search` are mutually exclusive.");if(t.searchParams)throw new TypeError("Parameters `path` and `searchParams` are mutually exclusive.")}if(t.search&&t.searchParams)throw new TypeError("Parameters `search` and `searchParams` are mutually exclusive.");if(!e){if(!t.protocol)throw new TypeError("No URL protocol specified");e=`${t.protocol}//${null!==(s=null!==(r=t.hostname)&&void 0!==r?r:t.host)&&void 0!==s?s:""}`}const i=new n.URL(e);if(t.path){const e=t.path.indexOf("?");-1===e?t.pathname=t.path:(t.pathname=t.path.slice(0,e),t.search=t.path.slice(e+1)),delete t.path}for(const e of o)t[e]&&(i[e]=t[e].toString());return i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.weakMap=new WeakMap,this.map=new Map}set(e,t){"object"==typeof e?this.weakMap.set(e,t):this.map.set(e,t)}get(e){return"object"==typeof e?this.weakMap.get(e):this.map.get(e)}has(e){return"object"==typeof e?this.weakMap.has(e):this.map.has(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dnsLookupIpVersionToFamily=t.isDnsLookupIpVersion=void 0;const n={auto:0,ipv4:4,ipv6:6};t.isDnsLookupIpVersion=e=>e in n,t.dnsLookupIpVersionToFamily=e=>{if(t.isDnsLookupIpVersion(e))return n[e];throw new Error("Invalid DNS lookup IP version")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=new Set;t.default=e=>{n.has(e)||(n.add(e),process.emitWarning("Got: "+e,{type:"DeprecationWarning"}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBody=t.knownBodyTypes=void 0;const n=r(12),o=r(17),s=r(29);s.knownHookEvents.includes("beforeRetry")||s.knownHookEvents.push("beforeRetry","afterResponse"),t.knownBodyTypes=["json","buffer","text"],t.parseBody=(e,t,r,n)=>{const{rawBody:s}=e;try{if("text"===t)return s.toString(n);if("json"===t)return 0===s.length?"":r(s.toString());if("buffer"===t)return Buffer.from(s);throw new o.ParseError({message:`Unknown body type '${t}'`,name:"Error"},e)}catch(t){throw new o.ParseError(t,e)}};class i extends s.default{static normalizeArguments(e,t,r){const o=super.normalizeArguments(e,t,r);if(n.default.null_(o.encoding))throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");n.assert.any([n.default.string,n.default.undefined],o.encoding),n.assert.any([n.default.boolean,n.default.undefined],o.resolveBodyOnly),n.assert.any([n.default.boolean,n.default.undefined],o.methodRewriting),n.assert.any([n.default.boolean,n.default.undefined],o.isStream),n.assert.any([n.default.string,n.default.undefined],o.responseType),void 0===o.responseType&&(o.responseType="text");const{retry:s}=o;if(o.retry=r?{...r.retry}:{calculateDelay:e=>e.computedValue,limit:0,methods:[],statusCodes:[],errorCodes:[],maxRetryAfter:void 0},n.default.object(s)?(o.retry={...o.retry,...s},o.retry.methods=[...new Set(o.retry.methods.map(e=>e.toUpperCase()))],o.retry.statusCodes=[...new Set(o.retry.statusCodes)],o.retry.errorCodes=[...new Set(o.retry.errorCodes)]):n.default.number(s)&&(o.retry.limit=s),n.default.undefined(o.retry.maxRetryAfter)&&(o.retry.maxRetryAfter=Math.min(...[o.timeout.request,o.timeout.connect].filter(n.default.number))),n.default.object(o.pagination)){r&&(o.pagination={...r.pagination,...o.pagination});const{pagination:e}=o;if(!n.default.function_(e.transform))throw new Error("`options.pagination.transform` must be implemented");if(!n.default.function_(e.shouldContinue))throw new Error("`options.pagination.shouldContinue` must be implemented");if(!n.default.function_(e.filter))throw new TypeError("`options.pagination.filter` must be implemented");if(!n.default.function_(e.paginate))throw new Error("`options.pagination.paginate` must be implemented")}return"json"===o.responseType&&void 0===o.headers.accept&&(o.headers.accept="application/json"),o}static mergeOptions(...e){let t;for(const r of e)t=i.normalizeArguments(void 0,r,t);return t}_beforeError(e){this.destroyed||(e instanceof s.RequestError||(e=new s.RequestError(e.message,e,this)),this.emit("error",e))}}t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(17);t.default=function(e,...t){const r=(async()=>{if(e instanceof n.RequestError)try{for(const r of t)if(r)for(const t of r)e=await t(e)}catch(t){e=t}throw e})(),o=()=>r;return r.json=o,r.text=o,r.buffer=o,r.on=o,r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(12);t.default=function e(t){for(const r of Object.values(t))(n.default.plainObject(r)||n.default.array(r))&&e(r);return Object.freeze(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const c=r(1),l=a(r(36)),u=r(19),d=s(r(2)),h=a(r(9));t.default=new class{constructor(){this.name="xd.loadPackage"}execute(e){return i(this,void 0,void 0,(function*(){if(c.Logger.log("LoadPackageCommand: "+e),e){const t="file://";return 0===e.indexOf(t)&&(e=e.slice(t.length)),c.Logger.log("vscode.Uri.file(lastPackagePath): "+d.Uri.file(e).path),this.setData(l.default.loadPackageFrom(d.Uri.file(e)))}{const e=yield u.tryFindPackage();if(c.Logger.log("Package path: "+e),e){const t=yield d.window.showInformationMessage(c.getString("Toast.OpenExistingDSP",{packagePath:e.path}),c.getString("Toast.Button.Open"),c.getString("Toast.Button.OpenOther"),c.getString("Button.Cancel"));if(c.Logger.log("Result: "+t),t===c.getString("Toast.Button.Open"))return this.setData(l.default.loadPackageFrom(e));if(t===c.getString("Toast.Button.OpenOther"))return this.setData(l.default.loadPackage())}}return this.setData(l.default.loadPackage())}))}setData(e){return i(this,void 0,void 0,(function*(){const t=yield null==e?void 0:e.catch(e=>{c.Logger.log(e)});return t?(c.Logger.log("Package opened at "+t[0].path),d.workspace.getConfiguration(c.SettingsSectionName).update(c.ExtSetting.LastPackage,t[0].path,d.ConfigurationTarget.Workspace),h.default.currentFolder=t[0],h.default.currentFile=t[1],{success:!0,path:t[0].path,file:t[1],compiledTokenPaths:t[2]}):(d.window.showErrorMessage(c.getString("Error.DSP.NoPackageFound")),{success:!1})}))}}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const c=r(1),l=a(r(36)),u=a(r(9)),d=a(r(62)),h=s(r(2));t.default=new class{constructor(){this.name="xd.savePackage",this._onUpdate=new h.EventEmitter}get onUpdate(){var e;return null===(e=this._onUpdate)||void 0===e?void 0:e.event}execute(e,t){this.__debounceInt&&clearTimeout(this.__debounceInt),this.__debounceInt=setTimeout(()=>{this.run(e,t)},250)}run(e,t){return i(this,void 0,void 0,(function*(){c.Logger.log("Save DSP File: "+u.default.currentFolder),u.default.currentFile=e,u.default.currentFolder?(yield l.default.savePackage(e,u.default.currentFolder),this._onUpdate.fire(),t&&d.default.execute()):(u.default.currentFolder=yield l.default.savePackageAs(e),this._onUpdate.fire(),t&&d.default.execute())}))}}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getCodeChallenge=t.getCodeVerifier=void 0;const a=s(r(8)),c=i(r(246));t.getCodeVerifier=()=>c.default({length:128,characters:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~"}),t.getCodeChallenge=e=>a.createHash("sha256").update(e).digest("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},function(e,t,r){"use strict";const{promisify:n}=r(6),o=r(8),s=n(o.randomBytes),i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~".split(""),a="0123456789".split(""),c="CDEHKMPRTUWXY012458".split(""),l="!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~".split(""),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),d=[void 0,"hex","base64","url-safe","numeric","distinguishable","ascii-printable","alphanumeric"],h=(e,t)=>({length:r,type:n,characters:o})=>{if(!(r>=0&&Number.isFinite(r)))throw new TypeError("Expected a `length` to be a non-negative finite number");if(void 0!==n&&void 0!==o)throw new TypeError("Expected either `type` or `characters`");if(void 0!==o&&"string"!=typeof o)throw new TypeError("Expected `characters` to be string");if(!d.includes(n))throw new TypeError("Unknown type: "+n);if(void 0===n&&void 0===o&&(n="hex"),"hex"===n||void 0===n&&void 0===o)return t(Math.ceil(.5*r),"hex",r);if("base64"===n)return t(Math.ceil(.75*r),"base64",r);if("url-safe"===n)return e(r,i);if("numeric"===n)return e(r,a);if("distinguishable"===n)return e(r,c);if("ascii-printable"===n)return e(r,l);if("alphanumeric"===n)return e(r,u);if(0===o.length)throw new TypeError("Expected `characters` string length to be greater than or equal to 1");if(o.length>65536)throw new TypeError("Expected `characters` string length to be less or equal to 65536");return e(r,o.split(""))};e.exports=h((e,t)=>{const r=t.length,n=Math.floor(65536/r)*r-1,s=2*Math.ceil(1.1*e);let i="",a=0;for(;a<e;){const c=o.randomBytes(s);let l=0;for(;l<s&&a<e;){const e=c.readUInt16LE(l);l+=2,e>n||(i+=t[e%r],a++)}}return i},(e,t,r)=>o.randomBytes(e).toString(t).slice(0,r)),e.exports.async=h(async(e,t)=>{const r=t.length,n=Math.floor(65536/r)*r-1,o=2*Math.ceil(1.1*e);let i="",a=0;for(;a<e;){const c=await s(o);let l=0;for(;l<o&&a<e;){const e=c.readUInt16LE(l);l+=2,e>n||(i+=t[e%r],a++)}}return i},async(e,t,r)=>(await s(e)).toString(t).slice(0,r))},function(e,t,r){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>"%"+e.charCodeAt(0).toString(16).toUpperCase())},function(e,t,r){"use strict";var n=new RegExp("%[a-f0-9]{2}","gi"),o=new RegExp("(%[a-f0-9]{2})+","gi");function s(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],s(r),s(n))}function i(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(n),r=1;r<t.length;r++)t=(e=s(t,r).join("")).match(n);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=o.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var n=i(r[0]);n!==r[0]&&(t[r[0]]=n)}r=o.exec(e)}t["%C2"]="�";for(var s=Object.keys(t),a=0;a<s.length;a++){var c=s[a];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},function(e,t,r){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WindowHandlers=void 0;const a=r(1),c=r(14),l=s(r(2)),u=i(r(84));t.WindowHandlers=class{constructor(){this._disposables=[],this._disposables.push(l.window.onDidChangeActiveTextEditor(this.handleActiveTextEditorChange),l.window.onDidChangeActiveColorTheme(this.handleActiveColorThemeChange),l.workspace.onDidChangeConfiguration(this.handleChangeConfiguration))}handleActiveTextEditorChange(e){var t;void 0!==(null===(t=null==e?void 0:e.document)||void 0===t?void 0:t.fileName)&&(u.default.lastActiveEditor=e)}handleActiveColorThemeChange(e){var t;null===(t=c.WebViewPanel.currentPanel)||void 0===t||t.onDidChangeActiveColorTheme(e)}handleChangeConfiguration(e){var t,r;if(e.affectsConfiguration(a.SettingsSectionName)){const e=l.workspace.getConfiguration(a.SettingsSectionName).get(a.ExtSetting.Editor);null===(t=c.WebViewPanel.currentPanel)||void 0===t||t.onCreationModeChange(e);const n=l.workspace.getConfiguration(a.SettingsSectionName).get(a.ExtSetting.AuthorName);null===(r=c.WebViewPanel.currentPanel)||void 0===r||r.onAuthorNameChange(n)}}dispose(){for(;this._disposables.length;){const e=this._disposables.pop();e&&e.dispose()}}}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentCompletionProvider=void 0;const a=r(1),c=r(22),l=i(r(0)),u=r(40),d=s(r(2)),h=i(r(9));t.ComponentCompletionProvider=class{provideCompletionItems(e,t,r,n){var o,s,i,p,f;const m=(null===(o=h.default.currentFolder)||void 0===o?void 0:o.fsPath)||"",g=(null===(i=null===(s=h.default.currentFile)||void 0===s?void 0:s.settings)||void 0===i?void 0:i.snippet_trigger_prefix)||"",y=d.workspace.getConfiguration(a.SettingsSectionName).get(a.ExtSetting.Editor);return((null===(f=null===(p=h.default.currentFile)||void 0===p?void 0:p.components)||void 0===f?void 0:f.map(e=>{var t,r;const n=[];for(let o in e.snippets.languages){if(!y&&!h.default.consumerSnippetFilter.some(e=>e.snippet_id===o))continue;const s=new d.CompletionItem(`${g}${e.snippets.trigger}`),i=e.snippets.languages[o];s.insertText=new d.SnippetString(i),s.detail=o;const p=new d.MarkdownString(`### ${e.name} \n`),f=[...e.renditions||[],((null===(t=e[a.adobeCClibID])||void 0===t?void 0:t.id)||e.id)+".svg",((null===(r=e[a.adobeCClibID])||void 0===r?void 0:r.id)||e.id)+".png"].filter(e=>c.existsSync(l.default.join(m,u.ASSET_FOLDER_NAME,e))).find(e=>!!e);if(f){const e=f.substr(f.lastIndexOf(".")+1);if("svg"==e||"png"==e){const t=l.default.join(m,u.ASSET_FOLDER_NAME,f);p.appendMarkdown(`![](${u.imageToBase64(t,e)})\n`)}}e.related_entity_ids.length>0&&(p.appendMarkdown(`### ${a.getString("Intellisense.TokensHeader")}\n`),e.related_entity_ids.filter(e=>{var t;return a.getTokensById((null===(t=null===h.default||void 0===h.default?void 0:h.default.entityCache)||void 0===t?void 0:t.entityList)||[],e).length>0}).map(e=>{var t,r,n,o,s;let i="";const c=a.getTokensById((null===(t=null===h.default||void 0===h.default?void 0:h.default.entityCache)||void 0===t?void 0:t.entityList)||[],e)[0],l=c.name;try{if(c.type===a.EntityType.Alias&&(null===(r=null===h.default||void 0===h.default?void 0:h.default.entityCache)||void 0===r?void 0:r.tokenEntityMap)){const e=a.getSourceForAlias(h.default.entityCache.tokenEntityMap,c);i=e instanceof Error?"":e.value}else if(c.type===a.EntityType.Font){const e=c.tokens;i=[null===(n=e.find(e=>e.key===a.FontKey.Family))||void 0===n?void 0:n.value].concat(null===(o=e.find(e=>e.key===a.FontKey.Weight))||void 0===o?void 0:o.value,null===(s=e.find(e=>e.key===a.FontKey.Size))||void 0===s?void 0:s.value).filter(e=>void 0!==e).join(", ")}else i=c.value;p.appendMarkdown(`[${l}](vscode://adobe.xd/link?tokenName=${encodeURI(l)}) ${i}`),p.appendText("\n")}catch(e){console.log("CompletionProvider.ts Error:"),console.error(e)}}),p.appendText("\n")),i&&(p.appendMarkdown(`### ${a.getString("Intellisense.CodeSnippetHeader")}\n`),p.appendCodeblock(i),p.appendMarkdown("\n")),e.description&&(p.appendMarkdown(`### ${a.getString("Intellisense.DocumentationHeader")}\n`),p.appendMarkdown(e.description)),s.documentation=p,n.push(s)}return n}))||[]).reduce((e,t)=>e.concat(t))}}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UriHandler=void 0;const c=s(r(2)),l=s(r(86)),u=r(14),d=r(1),h=a(r(85));t.UriHandler=class{handleUri(e){var t,r,n,o;return i(this,void 0,void 0,(function*(){switch(d.Logger.log("UriHandler handleUri() uri: "+e.toString()),e.path){case"/authorize":const s=l.parse(e.query);if(s.code){const e=yield h.default.getToken(s.code.toString());e&&(c.window.showInformationMessage(d.getString("Onboarding.CCL.Toast.Authorized")),null===(t=u.WebViewPanel.currentPanel)||void 0===t||t.setCCLoginState({accessToken:e||""}))}break;case"/link":default:const i=decodeURI((null===(n=null===(r=l.parse(e.query))||void 0===r?void 0:r.tokenName)||void 0===n?void 0:n.toString())||"");console.log("Search or deeplink to "+i),i&&""!==i&&(u.WebViewPanel.currentPanel?null===(o=u.WebViewPanel.currentPanel)||void 0===o||o.deeplinkToToken(i):c.commands.executeCommand("xd.toggle",i))}}))}}}]));
//# sourceMappingURL=extension-bundle.js.map